


insertOne 不会自动填充id （完成）


id 都用long （完成）


文件夹的md5计算错误 （完成）

md5应该用到时再计算，先比较最后修改时间是否一致，而不是先计算再使用 （完成）



第一次授权目录访问 （完成）
	然后进入 /Download/Apk，
	然后再返回，直接返回了 /，而不是Download
	第二次访问则不会出现这样的问题
	
	
	第一次进入页面
		[]
	
	进入download
		['/']
	
	进入apk
		['/','/download/apk']
		
		
	
	apk返回上级
		弹出最后一个
		取剩下那个
		['/']
	
	
	
	第一次进入页面
		['/']
	
	进入download
		['/','/download']
	
	进入apk
		['/','/download','/apk']
	
	返回上一级
		进入 /download
		['/','/download',]
	
	再返回上一级
		进入 /，到达根目录
		['/',]
		
	再返回上一级
		弹出后数组为空，直接返回
		
		
		
		
		
	
应该添加一个按钮，选择完文件夹可以直接返回，而不用一级一级返回上级（完成）


备份运行中界面，文件名字太长会溢出（完成）



服务在线程结束后不会自动销毁，stopSelf 不管用（完成）
	但是主动调用unBindService 可以销毁
	
	可能是因为在线程里执行的stopSelf，
	
	到时候改成，不要在create中创建线程，而是单独提供一个方法，让binder来调用，创建新线程
	
	
	
	
服务端需要设置一个备份路径，比如当前可执行文件下的upload，防止备份到电脑的根目录下了（完成）

上传文件总大小统计错误，Download/apk 只有800兆统计为66GB（完成）


备份历史，加个平均速度（完成）


上传之前先调用compare接口比较，如果成功则不必上传（完成）


服务器应该对文件再次进行md5校验，然后对比android传递的md5是否一致，不一致则报错，让android重新上传（完成）

.env文件会被隐藏，应该找个新格式的文件（完成）

如果无需备份，也应该记录一个备份历史，只是文字变成无需备份（完成）



整理安卓代码(完成)

	status:0, //0 准备，1运行中，2暂停

	
	service初始化
		MainActivity
			bindBackupService()


	界面跳转
		123
			
			旧的，正常情况下应该不会被触发，
				仅仅用在dirSelect初始化时，发现没有权限（中途有错误导致非法进入的时候）
			
			openFolderPicker
			
			保存uri，向前端发送root数据 initRootFileList
		124
			
			正常申请，
			申请成功直接进入文件夹选择界面
		
		125
			重新申请根目录时使用
		
		REQUEST_CODE_SCAN
			扫二维码用的 
	
	发起备份：
		window.Android.startBackup()
	
	
	
	
	状态分离
		
		android的备份状态：
			0	未开始
			1	运行中
			2	已暂停
			
			
		前端备份状态
			-2	与服务端对比后没有需要备份的文件
			-1	没有需要备份的文件
			0	未开始
			1	运行中
			2	已暂停
			
			
			
		两种状态的转换
			方案1：
				两种状态分离，没有关联
				前端初始化时，可以获取android的状态
				但是前端不允许直接修改状态，只能通过调用方法的形式来改变状态
					也就是不能直接传递数字
			
			方案2：
				两种状态保持强一致
				由android端来通知js端
				前端初始化时，可以获取android的状态
				前端不允许修改状态，只能通过调用方法的形式来改变状态
				对于特例的两种无需备份弹窗，在Home.vue 单独接收android 通知来弹出
	



中途取消备份，但是备份统计还是完整的大小，实际并没有上传这么多数据(完成)

暂停后无法恢复(完成)

应当允许随时暂停，需要在多个地方打上检查标记(完成)




android 检测到status=701 应该删除此文件，或重新上传(完成)

测试服务端链接还没完成(完成)

设置界面增加md5校验配置，关闭后服务端不再校验md5(完成)

服务端启动后，需要输出一个二维码到文件夹中(完成)

历史记录页面 高度要调整一下(完成)

服务器空间不足，或出现问题时，应当给出提示(完成)

增加强制备份按钮，覆盖掉服务器的文件(完成)


查看教程页面无法按下返回，回到首页(完成)

设置界面增加一个教程选项，点击弹出教程(完成)


判定程序是否第一次运行，如果是则弹出提示框询问是否需要查看教程(完成)


删除备份按钮，点击时要有提醒，并且应该换一个位置存放(完成)


首页应当对中断备份、错误备份，也进行显示(完成)	


如果服务端已经有这个文件，只是服务端数据库没有，那么应当实现秒传。计算md5去比较（完成）

应用程序图标、名称，通知栏图标需要更新（完成）

通知栏图标无法更新（完成）

父目录一直提示不存在 （完成）



第一次插入时可以不算md5  （完成）

提前结束备份时，不应当显示为备份中断（完成）

并行备份可以考虑起来 

恢复功能调研



最后修改时间完全可以作为创建时间
	大部分文件创建后就不再修改
	真有修改的，拿修改时间作为创建时间也不是不可以，相对的也反映出时间排序