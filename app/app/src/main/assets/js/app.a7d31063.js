(function(){"use strict";var t={27:function(t,s,e){var i=e(6848),a=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("Header",{style:{paddingTop:t.statusBarHeight+"px"}}),s("div",{staticStyle:{"padding-bottom":"100px","padding-top":"60px"}},[s("router-view")],1),s("Footer",{directives:[{name:"show",rawName:"v-show",value:!t.$route.meta.hideFooter,expression:"!$route.meta.hideFooter"}]})],1)},r=[],c=function(){var t=this,s=t._self._c;return s("div",{staticClass:"app-bar"},[s("span",{staticClass:"material-icons",on:{click:t.iconCallBack}},[t._v(t._s(t.icon))]),s("div",{staticClass:"title"},[t._v(" "+t._s(t.$store.state.headerTitle?t.$store.state.headerTitle:t.currentTitle)+" ")]),s("div",{staticStyle:{flex:"1"}}),s("span",{staticClass:"material-icons",staticStyle:{"margin-left":"16px"},style:{animation:t.spin?"spin 1s linear infinite":""},on:{click:t.clickSync}},[t._v(t._s(t.rightIcon))])])},o=[],n={name:"header-view",data(){return{spin:!1,currentTitle:"",icon:"",rightIcon:""}},watch:{$route(){this.$store.commit("SET_HEADER_TITLE",null),this.refresh()}},mounted(){this.refresh()},methods:{iconCallBack(){this.$bus.$emit("iconCallBack")},refresh(){this.currentTitle=this.$route.meta.headerTitle||"默认标题",this.icon=this.$route.meta.icon||"cloud_done",this.rightIcon=this.$route.meta.rightIcon||"settings_backup_restore"},clickSync(){this.spin=!0,this.$bus.$emit("rightIconCallBack"),setTimeout(()=>{this.spin=!1},500)}}},l=n,d=e(1656),u=(0,d.A)(l,c,o,!1,null,"41f50993",null),v=u.exports,h=function(){var t=this,s=t._self._c;return s("div",{staticClass:"bottom-nav"},[s("router-link",{staticClass:"nav-item",attrs:{to:"/home","active-class":"active",replace:""}},[s("div",{staticClass:"nav-icon material-icons"},[t._v("home")]),s("div",[t._v("首页")])]),s("router-link",{staticClass:"nav-item",attrs:{to:"/history","active-class":"active",replace:""}},[s("div",{staticClass:"nav-icon material-icons"},[t._v("history")]),s("div",[t._v("历史")])]),s("router-link",{staticClass:"nav-item",attrs:{to:"/settings","active-class":"active",replace:""}},[s("div",{staticClass:"nav-icon material-icons"},[t._v("settings")]),s("div",[t._v("设置")])])],1)},p=[],m={name:"footer-view"},g=m,f=(0,d.A)(g,h,p,!1,null,"b397d976",null),C=f.exports,_=e(3518),b={name:"App",components:{Header:v,Footer:C},data(){return{statusBarHeight:45}},created(){console.log("当前状态="+window.Android.getStatus()),this.$store.commit("SET_BACKUP_STATUS",window.Android.getStatus()),this.statusBarHeight=window.Android.getStatusBarHeight(),this.initDataFromAndroid()},mounted(){window.vue.onAppBackPressed=this.onAppBackPressed,window.vue.receiveBackupStatus=this.receiveBackupStatus},methods:{...(0,_.PY)(["SET_SERVER_CONFIG","SET_SELECTED_DIR"]),receiveBackupStatus(t){console.log("收到android的备份状态="+t),this.$store.commit("SET_BACKUP_STATUS",t)},initDataFromAndroid(){this.getServerConfig(),this.getSelectDir()},getServerConfig(){let t=JSON.parse(window.Android.getServerConfig());this.SET_SERVER_CONFIG(t)},getSelectDir(){let t=JSON.parse(window.Android.getSelectDir());this.SET_SELECTED_DIR(t)},onAppBackPressed(){this.$bus.$emit("onAppBackPressed")}}},k=b,w=(0,d.A)(k,a,r,!1,null,null,null),y=w.exports,S=e(6178),D=function(){var t=this,s=t._self._c;return s("div",{staticClass:"transition-container"},[s("AnimatedTransition",[0!==t.$store.state.backupStatus?s("BackupRunning",{key:1}):s("BackupReady",{key:0})],1),s("MaterialDialog",{attrs:{visible:t.showCancel,title:t.title,icon:t.icon,"show-cancel":!1},on:{confirm:t.handleReturnHome}},[s("p",[t._v(" "+t._s(t.cancelHint)+" ")])]),s("MaterialDialog",{attrs:{visible:t.isFirst,title:"首次使用提示",icon:"notifications_active"},on:{confirm:t.handleIsFirstConfirm,cancel:t.handleIsFirstCancel}},[s("p",[t._v(" 您是第一次使用本软件，是否需要查看使用教程？ 如果您取消，后续也可以再首页-右上角按钮重新进入教程页面。 ")])])],1)},T=[],B=(e(4114),function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isReady,expression:"isReady"}],staticClass:"card backup-status",attrs:{id:"backupCard"}},[s("div",{staticClass:"status-indicator",class:t.getStatusIndicatorClass(),attrs:{id:"statusIndicator"}}),t._m(0),t.hasBackup&&t.backupList[0].success?s("div",{staticClass:"card-body"},[s("div",{staticClass:"backup-info"},[t._m(1),s("div",{staticClass:"device-info"},[s("div",{staticClass:"device-name"},[t._v("我的手机")]),s("div",{staticClass:"device-model"},[t._v(t._s(t.phoneDetail))])])]),s("div",{staticClass:"backup-stats"},[s("div",{staticClass:"stat-item"},[s("div",{staticClass:"stat-label"},[t._v("上次备份")]),s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatRelativeTime(t.backupList[0].backUpTime)))])]),s("div",{staticClass:"stat-item"},[s("div",{staticClass:"stat-label"},[t._v("备份文件数")]),s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatNumberWithCommas(t.backupList[0].backUpNum)))])]),s("div",{staticClass:"stat-item"},[s("div",{staticClass:"stat-label"},[t._v("总大小")]),s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatSize(t.backupList[0].totalFileSize)))])]),s("div",{staticClass:"stat-item"},[s("div",{staticClass:"stat-label"},[t._v("花费时长")]),s("div",{staticClass:"stat-value"},[t._v(t._s(t.backupList[0].backUpCostTime)+" 秒")])])]),s("div",{staticClass:"backup-details-section"},[t.backupList[0].backupDetail?s("div",{staticClass:"detail-item"},[t._m(2),s("div",{staticClass:"detail-content"},[t._v(t._s(t.backupList[0].backupDetail))])]):t._e(),t.backupList[0].backupResult?s("div",{staticClass:"detail-item"},[t._m(3),s("div",{staticClass:"detail-content result-content"},[t._v(t._s(t.backupList[0].backupResult))])]):t._e()])]):t.hasBackup&&null==t.backupList[0].success?s("div",{staticClass:"card-body"},[s("div",{staticClass:"interrupted-backup"},[t._m(4),s("div",{staticClass:"interrupted-title"},[t._v("备份被中断")]),s("div",{staticClass:"interrupted-text"},[t._v("上次备份未完成，可能由于设备断开连接或应用被关闭导致")]),t.backupList[0].backUpTime?s("div",{staticClass:"interrupted-time"},[t._v(" 中断时间: "+t._s(t.formatRelativeTime(t.backupList[0].backUpTime))+" ")]):t._e()])]):s("div",{staticClass:"card-body"},[t._m(5)])]),s("div",{staticClass:"card"},[t._m(6),s("div",{staticClass:"card-body"},[s("div",{staticClass:"storage-progress"},[s("div",{staticClass:"storage-bar",style:{width:t.progress+"%",backgroundColor:t.progress>=90?"#f44336":t.progress>=80?"#ff9800":t.progress>=70?"#ffeb3b":t.progress>=50?"#1a73e8":"#4caf50"},attrs:{id:"storageBar"}})]),s("div",{staticClass:"storage-info"},[s("div",{staticClass:"storage-label"},[t._v("已使用")]),s("div",{staticClass:"storage-value",attrs:{id:"storageValue"}},[t._v(t._s(t.formatSize(t.available))+" / "+t._s(t.formatSize(t.total))+" ")])])])]),t.isReady?t._e():s("div",{staticClass:"state-toggle"},[t.serverSettingReady?t._e():s("router-link",{staticClass:"toggle-btn highlight",attrs:{to:"/settings/server-config",tag:"button"}},[t._v(" 你还没有设置服务器信息，点我设置 ")]),t.sourceSettingReady?t._e():s("router-link",{staticClass:"toggle-btn highlight",attrs:{to:"/settings/source",tag:"button"}},[t._v(" 你还没有添加备份源，点我添加 ")])],1),s("button",{staticClass:"primary-button",class:{warning:!t.isReady},style:{background:t.hasBackup?"#1a73e8":"#34a853"},on:{click:t.startBackup}},[s("i",{staticClass:"material-icons",style:{animation:t.hasBackup?"spin 1s linear infinite":""}},[t._v(" "+t._s(t.isReady?t.hasBackup?"autorenew":"cloud_upload":"error")+" ")]),s("span",[t._v(" "+t._s(t.isReady?t.hasBackup?"立即备份":"开始首次备份":"请配置相关信息（上方）")+" ")]),t.isReady?t._e():s("i",{staticClass:"material-icons",staticStyle:{"margin-left":"20px"}},[t._v(" arrow_circle_up ")])]),s("SelectFolder",{attrs:{"show-count":!1,title:"将要备份的文件夹"},nativeOn:{click:function(s){return t.toSource.apply(null,arguments)}}})],1)}),x=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("备份状态")]),s("span",{staticClass:"material-icons",staticStyle:{color:"#5f6368"}},[t._v("info")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"device-icon"},[s("i",{staticClass:"material-icons"},[t._v("smartphone")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail-label"},[s("i",{staticClass:"material-icons detail-icon"},[t._v("description")]),s("span",[t._v("备份说明")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"detail-label"},[s("i",{staticClass:"material-icons detail-icon"},[t._v("fact_check")]),s("span",[t._v("备份结论")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"interrupted-icon"},[s("i",{staticClass:"material-icons"},[t._v("error")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"no-backup"},[s("div",{staticClass:"no-backup-icon"},[s("i",{staticClass:"material-icons"},[t._v("cloud_off")])]),s("div",{staticClass:"no-backup-title"},[t._v("尚未进行备份")]),s("div",{staticClass:"no-backup-text"},[t._v("您的设备数据尚未备份，请立即备份以防止数据丢失")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header"},[s("div",{staticClass:"card-title"},[t._v("本地存储空间")]),s("span",{staticClass:"material-icons",staticStyle:{color:"#5f6368"}},[t._v("mobile_camera")])])}],P=function(){var t=this,s=t._self._c;return s("div",{staticClass:"selected-folders"},[s("div",{staticClass:"selected-header"},[s("div",{staticClass:"selected-title"},[t._v(t._s(t.title))]),t.showCount?s("div",{staticClass:"selected-count"},[t._v("共"+t._s(this.selectedDir.length)+"个")]):s("div",{staticClass:"selected-count"},[s("span",{staticClass:"material-icons",staticStyle:{color:"#5f6368"}},[t._v("drive_folder_upload")])])]),t.selectedDir.length>0?s("div",{staticClass:"selected-list"},t._l(t.filterSelectDir,function(e){return s("div",{key:e.relativePath,staticClass:"selected-item"},[s("div",{staticClass:"selected-name"},[t._v(t._s(e.relativePath))]),t.update?s("i",{staticClass:"material-icons selected-remove",on:{click:function(s){return t.removeDir(e)}}},[t._v("close")]):t._e()])}),0):s("div",{staticStyle:{padding:"10px",color:"#5f6368","font-size":"14px"}},[t._v(" 你还没有添加文件夹，快去添加吧 ")])])},A=[],$=(e(8111),e(2489),{name:"select-folder-view",components:{},props:{showCount:Boolean,update:Boolean,title:String,filter:String},data(){return{selectedDir:[]}},computed:{filterSelectDir(){return this.filter?this.selectedDir.filter(t=>t.name.toLowerCase().includes(this.filter.toLowerCase())):this.selectedDir}},mounted(){this.selectedDir=this.$store.state.selectedDir},methods:{...(0,_.PY)(["SET_SELECTED_DIR"]),removeDir(t){this.selectedDir=this.selectedDir.filter(s=>s.relativePath!==t.relativePath),this.SET_SELECTED_DIR(this.selectedDir)}}}),E=$,M=(0,d.A)(E,P,A,!1,null,"260b6fbf",null),R=M.exports,F={name:"backup-ready-view",components:{SelectFolder:R},data(){return{hasBackup:!1,backupList:[],phoneDetail:"",total:0,available:0,progress:0,selectedDir:[],showLoading:!0,serverSettingReady:!0,sourceSettingReady:!0}},created(){},mounted(){window.scrollTo(0,0),this.sourceSettingReady=this.$store.state.selectedDir.length>0,this.serverSettingReady=this.$store.state.serverConfig.addr&&this.$store.state.serverConfig.secret,this.getBackupList(),this.getPhoneDetail(),this.getStorageInfo(),setTimeout(()=>{this.getProgress()},500)},computed:{isReady:function(){return this.serverSettingReady&&this.sourceSettingReady}},methods:{getStatusIndicatorClass(){return this.hasBackup?this.hasBackup&&this.backupList[0]&&!this.backupList[0].success?"error":"":"warning"},startBackup(){this.isReady?window.Android.prepareStart():this.scrollTop()},scrollTop(){window.scrollTo(0,0)},toSource(){this.$router.push("/settings/source")},getProgress(){let t=this.available/this.total;t=100-Math.floor(100*t),this.progress=t},getStorageInfo(){this.total=window.Android.getTotalStorage(),this.available=window.Android.getAvailableStorage()},getPhoneDetail(){this.phoneDetail=window.Android.getPhoneDetail()},getBackupList(){this.backupList=JSON.parse(window.Android.getBackupHistory()),console.log("backuplist="),console.log(this.backupList),this.backupList.length>0?this.hasBackup=!0:this.hasBackup=!1},formatNumberWithCommas(t){if("number"!==typeof t||isNaN(t))return"0";const s=Math.round(t);return s.toLocaleString("en-US")},formatRelativeTime(t){const s=new Date(t),e=new Date,i=e-s,a=Math.round(i/6e4),r=Math.round(i/36e5),c=Math.round(i/864e5);if(a<60)return`${a}分钟前`;if(r<24){const t=Math.floor(r),s=a%60;return`${t}小时${s}分钟前`}if(c<=7)return`${c}天前`;{const t=s.getFullYear(),e=s.getMonth()+1,i=s.getDate();return`${t}年${e}月${i}日`}},changeState(){this.hasBackup=!this.hasBackup},formatSize(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":t<1073741824?(t/1048576).toFixed(1)+" MB":(t/1073741824).toFixed(1)+" GB"},formatStorage(t){if(t>=1024){const s=Math.round(t/102.4)/10;return`${s}GB`}return`${Math.round(t)}MB`}}},L=F,N=(0,d.A)(L,B,x,!1,null,"69e1c650",null),I=N.exports,U=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"progress-card pulse"},[s("div",{staticClass:"progress-title",style:{color:1===t.$store.state.backupStatus?"#1a73e8":"#f97316"}},[t._v(" "+t._s(t.circleTitle)+" ")]),s("div",{staticClass:"progress-subtitle"},[t._v(" "+t._s(t.circleDesc)+" ")]),s("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"center","align-items":"center","margin-bottom":"20px"}},[s("CircularProgress",{attrs:{status:t.$store.state.backupStatus,size:170,progress:t.progressData.totalPercent}})],1),s("div",{staticClass:"progress-text"},[t._v("已上传 "+t._s(t.formatSize(t.progressData.alreadyUploadFileSize)))])]),s("div",{staticClass:"file-info"},[s("div",{staticClass:"file-header"},[s("div",{staticClass:"file-icon"},[s("i",{staticClass:"material-icons"},[t._v(t._s(t.getGoogleIconNameFromMimeType(t.progressData.currentFile.mimeType)))])]),s("div",{staticClass:"file-details"},[s("div",{staticClass:"file-name"},[t._v(t._s(t.progressData.currentFile.name))]),s("div",{staticClass:"file-path"},[t._v(t._s(t.progressData.currentFile.relativePath))])])]),s("div",{staticClass:"file-progress-container"},[s("div",{staticClass:"file-progress-bar",style:{width:t.progressData.currentFile.percent+"%",background:1===t.$store.state.backupStatus?"#1a73e8":"#f97316"}})])]),s("div",{staticClass:"stats-container"},[s("div",{staticClass:"stat-card"},[s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatSize(t.progressData.speed))+"/s")]),s("div",{staticClass:"stat-label"},[t._v("上传速度")])]),s("div",{staticClass:"stat-card"},[s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatRelativeTime(t.progressData.startTime)))]),s("div",{staticClass:"stat-label"},[t._v("已用时间")])]),s("div",{staticClass:"stat-card"},[s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatNumberWithCommas(t.progressData.needUploadFileNum)))]),s("div",{staticClass:"stat-label"},[t._v("需要备份的文件数量")])]),s("div",{staticClass:"stat-card"},[s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatNumberWithCommas(t.progressData.alreadyUploadFileNum)))]),s("div",{staticClass:"stat-label"},[t._v("已处理文件")])]),s("div",{staticClass:"stat-card"},[s("div",{staticClass:"stat-value"},[t._v(t._s(t.formatNumberWithCommas(t.progressData.failNum)))]),s("div",{staticClass:"stat-label"},[t._v("上传失败")])])]),s("div",{staticClass:"button-container"},[1===t.$store.state.backupStatus?s("button",{staticClass:"button pause-button",on:{click:t.pauseBackup}},[s("i",{staticClass:"material-icons",staticStyle:{"vertical-align":"middle","margin-right":"5px"}},[t._v("pause")]),t._v(" 暂停备份 ")]):s("button",{staticClass:"button pause-button",on:{click:t.resumeBackup}},[s("i",{staticClass:"material-icons",staticStyle:{"vertical-align":"middle","margin-right":"5px"}},[t._v("work")]),t._v(" 继续备份 ")]),s("button",{staticClass:"button cancel-button",on:{click:t.completeBackup}},[s("i",{staticClass:"material-icons",staticStyle:{"vertical-align":"middle","margin-right":"5px"}},[t._v("cancel")]),t._v(" 结束备份 ")])]),t._m(0),s("MaterialDialog",{attrs:{visible:t.showConfirmModal,title:"结束备份",icon:"warning","show-cancel":!0},on:{confirm:t.handleConfirmComplete,cancel:t.handleCancelComplete}},[s("p",[t._v("您确定要结束备份吗？未完成的备份将需要重新开始。")])])],1)},O=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"network-status"},[s("span",{staticClass:"material-icons network-icon"},[t._v("wifi")]),t._v(" 通过 Wi-Fi 连接 • 安全备份 ")])}],j=(e(116),function(){var t=this,s=t._self._c;return s("div",{staticClass:"circular-progress"},[s("svg",{staticClass:"progress-ring",attrs:{width:t.size,height:t.size,viewBox:"0 0 100 100"}},[s("circle",{staticClass:"progress-ring__bg",attrs:{stroke:"#f1f3f4","stroke-width":"8",fill:"transparent",r:"46",cx:"50",cy:"50"}}),s("circle",{staticClass:"progress-ring__progress",attrs:{stroke:1===t.status?"#1a73e8":"#f97316","stroke-width":"8",fill:"transparent","stroke-dasharray":t.circumference,"stroke-dashoffset":t.strokeDashoffset,r:"46",cx:"50",cy:"50"}})]),s("div",{staticClass:"progress-text"},[s("div",{staticClass:"progress-percent",style:{color:1===t.status?"#1a73e8":"#f97316"}},[t._v(t._s(1===t.status?t.progress:100-t.progress)+"% ")]),s("div",{staticClass:"progress-label",style:{color:1===t.status?"#1a73e8":"#f97316"}},[t._v(" "+t._s(1===t.status?"已完成":"剩余")+" ")])])])}),z=[],H={name:"circular-progress",props:{progress:{type:Number,default:0,validator:t=>t>=0&&t<=100},size:{type:Number,default:120},status:Number},data(){return{radius:46,circumference:2*Math.PI*46}},computed:{strokeDashoffset(){return this.circumference-this.progress/100*this.circumference}}},G=H,W=(0,d.A)(G,j,z,!1,null,"34bc1bf0",null),q=W.exports,J=function(){var t=this,s=t._self._c;return s("transition",{attrs:{name:"dialog-fade"}},[t.visible?s("div",{staticClass:"dialog-overlay",on:{click:function(s){return s.target!==s.currentTarget?null:t.handleOverlayClick.apply(null,arguments)}}},[s("div",{staticClass:"dialog-container",style:{width:t.width}},[s("div",{staticClass:"dialog-header"},[s("div",{staticClass:"dialog-title"},[t.icon?s("i",{staticClass:"material-icons"},[t._v(t._s(t.icon))]):t._e(),s("span",[t._v(t._s(t.title))])]),t.closable?s("button",{staticClass:"dialog-close",on:{click:t.handleClose}},[s("i",{staticClass:"material-icons"},[t._v("close")])]):t._e()]),s("div",{staticClass:"dialog-content"},[t._t("default")],2),s("div",{staticClass:"dialog-actions"},[t.showCancel?s("button",{staticClass:"dialog-button cancel-button",on:{click:t.handleCancel}},[t._v(" "+t._s(t.cancelText)+" ")]):t._e(),s("button",{staticClass:"dialog-button confirm-button",attrs:{disabled:t.confirmDisabled},on:{click:t.handleConfirm}},[t._v(" "+t._s(t.confirmText)+" ")])])])]):t._e()])},V=[],K={name:"MaterialDialog",props:{visible:{type:Boolean,default:!1},title:{type:String,default:"提示"},icon:{type:String,default:""},width:{type:String,default:"500px"},confirmText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},showCancel:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0},confirmDisabled:{type:Boolean,default:!1}},methods:{handleClose(){this.$emit("update:visible",!1),this.$emit("close")},handleConfirm(){this.$emit("confirm")},handleCancel(){this.$emit("cancel")},handleOverlayClick(){this.closeOnClickOverlay&&this.handleClose()}}},Y=K,Q=(0,d.A)(Y,J,V,!1,null,"0e0ad8f1",null),Z=Q.exports,X={name:"backup-running-view",components:{MaterialDialog:Z,CircularProgress:q},data(){return{progressData:{totalPercent:30,needUploadFileNum:0,alreadyUploadFileSize:72,currentFile:{mimeType:"text/html",name:"IMG_20230715_184523.jpg",relativePath:"内部存储/DCIM/Camera",percent:90},speed:20481,startTime:"2025-07-26T18:45:23Z",alreadyUploadFileNum:1,checkFinish:!1,circleTitle:"",circleDesc:""},showConfirmModal:!1}},created(){console.log("backupRunning.vue created")},mounted(){window.scrollTo(0,0),window.vue.receiveProgressData=this.receiveProgressData,console.log("backupRunning.vue startBackup"),window.Android.startBackup()},computed:{circleTitle(){return 1===this.$store.state.backupStatus?this.progressData.checkFinish?"备份中":"准备中":"已暂停"},circleDesc(){return 1===this.$store.state.backupStatus?this.progressData.checkFinish?"请不要关闭应用或断开网络":"请稍后，正在检查哪些文件需要备份...":"点击下方按钮继续备份"}},methods:{resumeBackup(){window.Android.resumeBackup()},pauseBackup(){window.Android.pauseBackup()},completeBackup(){this.showConfirmModal=!0},handleConfirmComplete(){this.showConfirmModal=!1,window.Android.completeBackup()},handleCancelComplete(){this.showConfirmModal=!1},formatNumberWithCommas(t){if("number"!==typeof t||isNaN(t))return"0";const s=Math.round(t);return s.toLocaleString("en-US")},formatRelativeTime(t){const s=new Date(t).getTime(),e=(new Date).getTime();let i=Math.abs(e-s);const a=Math.floor(i/36e5);i-=36e5*a;const r=Math.floor(i/6e4);i-=6e4*r;const c=Math.floor(i/1e3);return`${String(a).padStart(2,"0")}:${String(r).padStart(2,"0")}:${String(c).padStart(2,"0")}`},formatSize(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":t<1073741824?(t/1048576).toFixed(1)+" MB":(t/1073741824).toFixed(1)+" GB"},getGoogleIconNameFromMimeType(t){const s={"vnd.android.document/directory":"folder","text/plain":"description","text/html":"code","text/css":"code","text/javascript":"code","application/json":"code","application/pdf":"picture_as_pdf","image/*":"image","video/*":"video_file","audio/*":"audio_file","application/msword":"article","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"article","application/vnd.ms-excel":"table_chart","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"table_chart","application/zip":"archive","application/x-rar-compressed":"archive","application/x-7z-compressed":"archive","application/x-tar":"archive","application/gzip":"archive","application/octet-stream":"insert_drive_file","application/x-executable":"dangerous","application/vnd.android.package-archive":"android"};if(s[t])return s[t];const e=Object.keys(s).find(s=>s.endsWith("/*")&&t.startsWith(s.split("/*")[0]));return e?s[e]:"insert_drive_file"},receiveProgressData(t){this.progressData=t}}},tt=X,st=(0,d.A)(tt,U,O,!1,null,"5057ba3f",null),et=st.exports,it=function(){var t=this,s=t._self._c;return s("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[t._t("default")],2)},at=[],rt={name:"AnimatedTransition"},ct=rt,ot=(0,d.A)(ct,it,at,!1,null,"8ca16998",null),nt=ot.exports,lt={name:"home-view",components:{MaterialDialog:Z,AnimatedTransition:nt,BackupReady:I,BackupRunning:et},data(){return{running:!0,cancelHint:"",showCancel:!1,title:"温馨提示",icon:"notifications_active",isFirst:!1}},created(){this.$bus.$on("rightIconCallBack",this.toHelpPage),this.isFirst=window.Android.getIsFirst()},mounted(){window.vue.receiveNotNeedBackup=this.receiveNotNeedBackup,window.vue.receiveServerAlreadyLatest=this.receiveServerAlreadyLatest,window.vue.receiveUploadError=this.receiveUploadError},computed:{},methods:{handleIsFirstCancel(){window.Android.setFirst(),this.isFirst=!1},handleIsFirstConfirm(){this.isFirst=!1,window.Android.setFirst(),this.toHelpPage()},toHelpPage(){this.$router.push("/help")},receiveUploadError(t){this.title="出现错误！",this.cancelHint="备份错误："+t,this.icon="error",this.showCancel=!0},receiveServerAlreadyLatest(){this.title="温馨提示",this.cancelHint="经过与服务器的比较，您的文件与服务器文件完全一致，无需进行备份，本次备份不会进行",this.icon="notifications_active",this.showCancel=!0},receiveNotNeedBackup(){this.title="温馨提示",this.cancelHint="扫描后没有发现需要备份的文件，本次备份不会进行",this.icon="notifications_active",this.showCancel=!0},handleReturnHome(){this.showCancel=!1}},beforeDestroy(){this.$bus.$off(["rightIconCallBack"])}},dt=lt,ut=(0,d.A)(dt,D,T,!1,null,"4d23ae28",null),vt=ut.exports,ht=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"content"},[s("div",{staticClass:"settings-group"},[s("div",{staticClass:"group-title"},[t._v("备份选项")]),s("router-link",{staticClass:"setting-item",attrs:{to:"/settings/source"}},[s("div",{staticClass:"setting-content"},[s("div",{staticClass:"setting-icon"},[s("i",{staticClass:"material-icons"},[t._v("folder")])]),s("div",{staticClass:"setting-info"},[s("div",{staticClass:"setting-name"},[t._v("备份源管理")]),s("div",{staticClass:"setting-desc"},[t._v("选择要备份的文件夹")])])]),s("div",{staticClass:"setting-action"},[s("i",{staticClass:"material-icons"},[t._v("chevron_right")])])]),s("router-link",{staticClass:"setting-item",attrs:{to:"/settings/server-config"}},[s("div",{staticClass:"setting-content"},[s("div",{staticClass:"setting-icon"},[s("i",{staticClass:"material-icons"},[t._v("backup")])]),s("div",{staticClass:"setting-info"},[s("div",{staticClass:"setting-name"},[t._v("服务器设置")]),s("div",{staticClass:"setting-desc"},[t._v("设置服务器地址和密钥信息")])])]),s("div",{staticClass:"setting-action"},[s("i",{staticClass:"material-icons"},[t._v("chevron_right")])])])],1),t._m(0),s("div",{staticClass:"settings-group"},[s("div",{staticClass:"group-title"},[t._v("杂项")]),s("div",{staticClass:"setting-item"},[t._m(1),s("div",{staticClass:"setting-action"},[s("label",{staticClass:"setting-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkMd5,expression:"checkMd5"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.checkMd5)?t._i(t.checkMd5,null)>-1:t.checkMd5},on:{change:[function(s){var e=t.checkMd5,i=s.target,a=!!i.checked;if(Array.isArray(e)){var r=null,c=t._i(e,r);i.checked?c<0&&(t.checkMd5=e.concat([r])):c>-1&&(t.checkMd5=e.slice(0,c).concat(e.slice(c+1)))}else t.checkMd5=a},t.checkMd5Change]}}),s("span",{staticClass:"setting-slider"})])])]),s("div",{staticClass:"setting-item"},[t._m(2),s("div",{staticClass:"setting-action"},[s("label",{staticClass:"setting-switch"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.forceBackup,expression:"forceBackup"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.forceBackup)?t._i(t.forceBackup,null)>-1:t.forceBackup},on:{change:[function(s){var e=t.forceBackup,i=s.target,a=!!i.checked;if(Array.isArray(e)){var r=null,c=t._i(e,r);i.checked?c<0&&(t.forceBackup=e.concat([r])):c>-1&&(t.forceBackup=e.slice(0,c).concat(e.slice(c+1)))}else t.forceBackup=a},t.forceBackupChange]}}),s("span",{staticClass:"setting-slider"})])])]),s("div",{staticClass:"setting-item",on:{click:t.showDeleteConfirm}},[t._m(3),t._m(4)])])]),s("MaterialDialog",{attrs:{visible:t.showDel,title:"警告",icon:"warning"},on:{confirm:t.handleDelConfirm,cancel:t.handleDelCancel}},[s("p",[t._v(" 确定要删除备份历史吗？确定后只会删除app本地的历史记录，不会删除本地文件，也不会删除服务端的备份记录和实际文件 ")])])],1)},pt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"advanced-header"},[s("span",[t._v(".")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"setting-content"},[s("div",{staticClass:"setting-icon"},[s("i",{staticClass:"material-icons"},[t._v("folder")])]),s("div",{staticClass:"setting-info"},[s("div",{staticClass:"setting-name"},[t._v("md5校验")]),s("div",{staticClass:"setting-desc"},[t._v("开启后可防止上传错误文件，但会增加上传时间")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"setting-content"},[s("div",{staticClass:"setting-icon"},[s("i",{staticClass:"material-icons"},[t._v("folder")])]),s("div",{staticClass:"setting-info"},[s("div",{staticClass:"setting-name"},[t._v("强制备份")]),s("div",{staticClass:"setting-desc"},[t._v("不管服务端是否存在相同文件，都会进行备份上传")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"setting-content"},[s("div",{staticClass:"setting-icon"},[s("i",{staticClass:"material-icons"},[t._v("delete")])]),s("div",{staticClass:"setting-info"},[s("div",{staticClass:"setting-name"},[t._v("删除备份历史")]),s("div",{staticClass:"setting-desc"},[t._v("清除本地保存的备份记录")])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"setting-action"},[s("i",{staticClass:"material-icons"},[t._v("chevron_right")])])}],mt={name:"settings-view",components:{MaterialDialog:Z},data(){return{checkMd5:!1,forceBackup:!1,showDel:!1}},watch:{},mounted(){this.checkMd5=this.$store.state.serverConfig.checkMd5,this.forceBackup=this.$store.state.serverConfig.forceBackup},methods:{...(0,_.i0)(["setServerConfig"]),showDeleteConfirm(){this.showDel=!0},handleDelConfirm(){this.showDel=!1,window.Android.delBackupInfo()},handleDelCancel(){this.showDel=!1},checkMd5Change(){console.log("checkMd5Change");let t=this.$store.state.serverConfig;t.checkMd5=this.checkMd5,this.setServerConfig(t)},forceBackupChange(){console.log("forceBackupChange");let t=this.$store.state.serverConfig;t.forceBackup=this.forceBackup,this.setServerConfig(t)}}},gt=mt,ft=(0,d.A)(gt,ht,pt,!1,null,"5dcb2e57",null),Ct=ft.exports,_t=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[t.backupList.length>0?s("div",{staticClass:"timeline"},t._l(t.backupList,function(e){return s("div",{key:e.id,staticClass:"log-item"},[s("div",{staticClass:"timeline-node"}),e.success?s("div",[s("div",{staticClass:"log-header"},[t._m(0,!0),s("div",{staticClass:"log-title"},[t._v(t._s(e.backupResult))]),s("div",{staticClass:"log-time"},[t._v(t._s(t.formatRelativeTime(e.backUpTime)))])]),s("div",{staticClass:"log-content"},[t._v(" "+t._s(e.backupDetail)+" ")]),s("div",{staticClass:"log-stats"},[s("div",{staticClass:"stat-badge"},[t._v("📁 "+t._s(t.formatNumberWithCommas(e.backUpNum))+" 个文件")]),s("div",{staticClass:"stat-badge"},[t._v("✅ "+t._s(t.formatNumberWithCommas(e.backUpNum-e.failNum))+" 个文件")]),s("div",{staticClass:"stat-badge"},[t._v("❌️ "+t._s(t.formatNumberWithCommas(e.failNum))+" 个文件")]),s("div",{staticClass:"stat-badge"},[t._v("📊 "+t._s(t.formatSize(e.totalFileSize))+" 数据")]),s("div",{staticClass:"stat-badge"},[t._v("⏱️ "+t._s(t.formatCostTime(e.backUpCostTime)))]),s("div",{staticClass:"stat-badge"},[t._v("✈️ "+t._s(t.formatSize(e.avgSpeed))+"/s")])]),s("div",{staticClass:"log-details"},[s("div",{staticClass:"log-details-list"},t._l(e.backUpPathArr.split(","),function(e){return s("div",{key:e,staticClass:"log-files"},[s("i",{staticClass:"material-icons",staticStyle:{"font-size":"16px","vertical-align":"middle"}},[t._v("folder")]),t._v(" "+t._s(e)+" ")])}),0),s("div",{staticStyle:{display:"flex","justify-content":"center"}},[s("router-link",{staticClass:"detail-button",staticStyle:{"margin-top":"20px"},attrs:{to:"/settings/source",tag:"div"}},[t._v(" 查看配置 "),s("i",{staticClass:"material-icons",staticStyle:{"font-size":"18px"}},[t._v("chevron_right")])])],1)])]):s("div",[s("div",{staticClass:"log-header"},[t._m(1,!0),s("div",{staticClass:"log-title"},[t._v("备份中断")]),s("div",{staticClass:"log-time"},[t._v(t._s(t.formatRelativeTime(e.backUpTime)))])]),s("div",{staticClass:"log-content"},[t._v(" 备份过程被异常中断，可能是应用被杀死,备份未完成，请重新备份 ")])])])}),0):s("div",[t._m(2)])])},bt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"log-status status-success"},[s("i",{staticClass:"material-icons"},[t._v("check_circle")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"log-status status-error"},[s("i",{staticClass:"material-icons"},[t._v("error")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"empty-state"},[s("div",{staticClass:"empty-icon"},[s("i",{staticClass:"material-icons"},[t._v("history")])]),s("div",{staticClass:"empty-title"},[t._v("暂无备份记录")]),s("div",{staticClass:"empty-text"},[t._v("您还没有任何备份历史记录，快去开始备份吧！")])])}],kt={name:"history-view",data(){return{backupList:[]}},mounted(){this.backupList=JSON.parse(window.Android.getBackupHistory())},methods:{formatNumberWithCommas(t){if("number"!==typeof t||isNaN(t))return"0";const s=Math.round(t);return s.toLocaleString("en-US")},formatRelativeTime(t){const s=new Date(t),e=new Date,i=e-s,a=Math.round(i/6e4),r=Math.round(i/36e5),c=Math.round(i/864e5);if(a<60)return`${a}分钟前`;if(r<24){const t=Math.floor(r),s=a%60;return`${t}小时${s}分钟前`}if(c<=7)return`${c}天前`;{const t=s.getFullYear(),e=s.getMonth()+1,i=s.getDate();return`${t}年${e}月${i}日`}},formatStorage(t){if(t>=1024){const s=Math.round(t/102.4)/10;return`${s}GB`}return`${Math.round(t)}MB`},formatSize(t){return t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":t<1073741824?(t/1048576).toFixed(1)+" MB":(t/1073741824).toFixed(1)+" GB"},formatCostTime(t){if("number"!==typeof t||t<0)return"无效时间";const s=Math.floor(t/86400);t%=86400;const e=Math.floor(t/3600);t%=3600;const i=Math.floor(t/60),a=t%60,r=[];return s>0&&r.push(`${s}天`),e>0&&r.push(`${e}小时`),i>0&&r.push(`${i}分钟`),0===s&&0===e&&0===i&&a>=0&&r.push(`${a}秒`),s>0&&a>0&&r.push(`${a}秒`),r.join("")}}},wt=kt,yt=(0,d.A)(wt,_t,bt,!1,null,"f137218c",null),St=yt.exports,Dt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"search-container"},[s("i",{staticClass:"material-icons"},[t._v("search")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],attrs:{type:"text",placeholder:"搜索文件夹..."},domProps:{value:t.filter},on:{input:function(s){s.target.composing||(t.filter=s.target.value)}}})]),s("SelectFolder",{attrs:{filter:t.filter,title:"已选文件夹",update:!0}}),s("div",{staticClass:"action-bar"},[t.hasPermission?s("router-link",{staticClass:"action-button save-button",attrs:{to:"/settings/source/select",tag:"button"}},[t._v(" 添加文件夹 ")]):t._e(),t.hasPermission?s("button",{staticClass:"action-button cancel-button",attrs:{disabled:!t.hasPermission},on:{click:t.saveSelectDir}},[t._v("保存设置 ")]):t._e(),s("button",{staticClass:"action-button authorization-button",class:{secondary:t.hasPermission},on:{click:t.applyPermission}},[t._v(" "+t._s(t.hasPermission?"重新选择根目录":"请授权app访问目录")+" ")])],1)],1)},Tt=[],Bt={name:"backup-source-view",components:{SelectFolder:R},data(){return{filter:"",hasPermission:!0}},created(){},mounted(){window.vue.checkPermission=this.checkPermission,window.vue.jumpSelect=this.jumpSelect,this.$bus.$on("onAppBackPressed",this.onAppBackPressed),this.checkPermission()},methods:{...(0,_.i0)(["setSelectedDir"]),saveSelectDir(){this.setSelectedDir(this.$store.state.selectedDir)},checkPermission(){this.hasPermission=Boolean(window.Android.getDirUri())},applyPermission(){window.Android.applyPermission(this.hasPermission)},jumpSelect(){this.$router.push("/settings/source/select")},onAppBackPressed(){this.saveSelectDir(),this.$router.back()}},beforeDestroy(){this.$bus.$off(["onAppBackPressed"]),this.saveSelectDir()}},xt=Bt,Pt=(0,d.A)(xt,Dt,Tt,!1,null,"aaf5e994",null),At=Pt.exports,$t=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"file-tree-container"},[s("div",{staticClass:"file-tree"},[s("div",{staticClass:"tree-item level-0",staticStyle:{"background-color":"#f5f5f5"},on:{click:t.intoParent}},[t._m(0),t._m(1),t._m(2)]),t._l(t.files,function(e){return s("div",{key:e.relativePath,staticClass:"tree-item level-0",style:{backgroundColor:e.checked?"rgba(26, 115, 232, 0.1)":"white"},on:{click:function(s){return t.toChild(e)}}},[s("div",{staticClass:"tree-icon",class:{folder:e.isDirectory}},[s("i",{staticClass:"material-icons"},[t._v(t._s(t.getGoogleIconNameFromMimeType(e.mimeType)))])]),s("div",{staticClass:"tree-content"},[s("div",{staticClass:"tree-name"},[t._v(t._s(e.name))])]),e.isDirectory?s("div",{staticClass:"tree-checkbox",on:{click:function(s){return s.stopPropagation(),t.select(e)}}},[s("input",{attrs:{type:"checkbox"},domProps:{checked:e.checked}})]):t._e()])})],2)]),s("Loading",{attrs:{show:t.showLoading,text:"数据加载中..."}})],1)},Et=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"tree-icon folder"},[s("i",{staticClass:"material-icons"},[t._v("folder")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"tree-content"},[s("div",{staticClass:"tree-name"},[t._v("上级目录")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"tree-expand"},[s("i",{staticClass:"material-icons"},[t._v("expand_more")])])}],Mt=(e(7588),e(3579),function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"loading-overlay"},[t._m(0),s("p",{directives:[{name:"show",rawName:"v-show",value:t.text,expression:"text"}],staticClass:"loading-text"},[t._v(t._s(t.text))])])}),Rt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"loading-spinner"},[s("div",{staticClass:"spinner"})])}],Ft={name:"loading-view",props:{show:Boolean,text:String}},Lt=Ft,Nt=(0,d.A)(Lt,Mt,Rt,!1,null,"082b6ce6",null),It=Nt.exports,Ut={name:"dir-select-view",components:{Loading:It},data(){return{showLoading:!1,currentPath:[],root:null,files:[{name:"aaaaa",mimeType:"vnd.android.document/directory",isDirectory:!0},{name:"bbb",mimeType:"vnd.android.document/directory"},{name:"ccc",mimeType:"vnd.android.document/directory"},{name:"dddd",mimeType:"vnd.android.document/directory"}],selectedDir:[],timer:null}},created(){window.vue.receiveFileList=this.receiveFileList,window.vue.receiveRoot=this.receiveRoot},mounted(){this.$bus.$on("rightIconCallBack",this.selectDone),this.$bus.$on("onAppBackPressed",this.onAppBackPressed),this.$bus.$on("iconCallBack",this.intoParent),this.selectedDir=this.$store.state.selectedDir,window.Android.initRootFile()},watch:{currentPath(){let t="/";this.currentPath&&this.currentPath.length>0&&(t=this.currentPath[this.currentPath.length-1].relativePath),t.startsWith("/")||(t="/"+t),this.$store.commit("SET_HEADER_TITLE",t)}},computed:{},methods:{...(0,_.PY)(["SET_SELECTED_DIR"]),selectDone(){this.$router.back()},isSelected(t,s){s.forEach(s=>{s.checked=t.some(t=>t.relativePath===s.relativePath)})},getGoogleIconNameFromMimeType(t){const s={"vnd.android.document/directory":"folder","text/plain":"description","text/html":"code","text/css":"code","text/javascript":"code","application/json":"code","application/pdf":"picture_as_pdf","image/*":"image","video/*":"video_file","audio/*":"audio_file","application/msword":"article","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"article","application/vnd.ms-excel":"table_chart","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"table_chart","application/zip":"archive","application/x-rar-compressed":"archive","application/x-7z-compressed":"archive","application/x-tar":"archive","application/gzip":"archive","application/octet-stream":"insert_drive_file","application/x-executable":"dangerous","application/vnd.android.package-archive":"android"};if(s[t])return s[t];const e=Object.keys(s).find(s=>s.endsWith("/*")&&t.startsWith(s.split("/*")[0]));return e?s[e]:"insert_drive_file"},receiveRoot(t){this.root=t,this.currentPath.push(this.root)},receiveFileList(t){this.handleData(t)},scrollTop(){window.scrollTo(0,0)},handleData(t){t.forEach(t=>{t.checked=!1}),this.files=t,this.isSelected(this.selectedDir,this.files)},select(t){if(t.checked=!t.checked,t.checked){if(this.selectedDir.some(s=>s.relativePath===t.relativePath))return;this.selectedDir.push(t)}else this.selectedDir=this.selectedDir.filter(s=>s.relativePath!==t.relativePath);this.SET_SELECTED_DIR(this.selectedDir)},toChild(t){null==this.timer?t.isDirectory&&(this.showLoading=!0,this.timer=setTimeout(()=>{this.currentPath.push(t);let s=JSON.parse(window.Android.intoChild(JSON.stringify(t)));this.handleData(s),this.scrollTop(),s.length<20?this.showLoading=!1:this.$nextTick(function(){this.showLoading=!1}),this.timer=null},50)):window.Android.toast("点太快了")},intoParent(){null==this.timer?1!==this.currentPath.length?(this.showLoading=!0,this.timer=setTimeout(()=>{this.currentPath.pop();let t=JSON.parse(window.Android.intoParent(JSON.stringify(this.currentPath[this.currentPath.length-1])));this.handleData(t),this.scrollTop(),t.length<20?this.showLoading=!1:this.$nextTick(function(){this.showLoading=!1}),this.timer=null},50)):this.$router.back():window.Android.toast("点太快了")},onAppBackPressed(){this.intoParent()}},beforeDestroy(){this.$bus.$off(["iconCallBack","rightIconCallBack","onAppBackPressed"])}},Ot=Ut,jt=(0,d.A)(Ot,$t,Et,!1,null,"50c0f262",null),zt=jt.exports,Ht=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"settings-card"},[s("div",{staticClass:"card-header"},[t._v("服务器连接设置(或右上角扫码)")]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("服务器地址")]),s("div",{staticClass:"input-container"},[s("span",{staticClass:"input-icon material-icons"},[t._v("dns")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.addr,expression:"addr"}],staticClass:"form-input",class:{"input-error":t.validationErrors.addr},attrs:{type:"text",placeholder:"192.168.1.25"},domProps:{value:t.addr},on:{input:function(s){s.target.composing||(t.addr=s.target.value)}}})]),s("div",{staticClass:"form-hint"},[t._v(" 请输入完整的服务器ip（192.168.1.1） ")])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"form-label"},[t._v("访问令牌")]),s("div",{staticClass:"input-container"},[s("span",{staticClass:"input-icon material-icons"},[t._v("vpn_key")]),"checkbox"===(t.showPassword?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.secret,expression:"secret"}],staticClass:"form-input",class:{"input-error":t.validationErrors.accessToken},attrs:{placeholder:"输入您的访问令牌",type:"checkbox"},domProps:{checked:Array.isArray(t.secret)?t._i(t.secret,null)>-1:t.secret},on:{change:function(s){var e=t.secret,i=s.target,a=!!i.checked;if(Array.isArray(e)){var r=null,c=t._i(e,r);i.checked?c<0&&(t.secret=e.concat([r])):c>-1&&(t.secret=e.slice(0,c).concat(e.slice(c+1)))}else t.secret=a}}}):"radio"===(t.showPassword?"text":"password")?s("input",{directives:[{name:"model",rawName:"v-model",value:t.secret,expression:"secret"}],staticClass:"form-input",class:{"input-error":t.validationErrors.accessToken},attrs:{placeholder:"输入您的访问令牌",type:"radio"},domProps:{checked:t._q(t.secret,null)},on:{change:function(s){t.secret=null}}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.secret,expression:"secret"}],staticClass:"form-input",class:{"input-error":t.validationErrors.accessToken},attrs:{placeholder:"输入您的访问令牌",type:t.showPassword?"text":"password"},domProps:{value:t.secret},on:{input:function(s){s.target.composing||(t.secret=s.target.value)}}}),s("span",{staticClass:"password-toggle material-icons",on:{click:t.togglePasswordVisibility}},[t._v(" "+t._s(t.showPassword?"visibility_off":"visibility")+" ")])]),t._m(0)]),s("div",{staticClass:"button-group"},[s("button",{staticClass:"button test-button",on:{click:t.checkConnection}},[s("i",{staticClass:"material-icons",staticStyle:{"vertical-align":"middle","margin-right":"5px"}},[t._v("wifi_tethering")]),t._v(" 测试连接 ")]),s("button",{staticClass:"button save-button",on:{click:t.saveConfig}},[s("i",{staticClass:"material-icons",staticStyle:{"vertical-align":"middle","margin-right":"5px"}},[t._v("save")]),t._v(" 保存设置 ")])]),t.showTestResult?s("div",{staticClass:"connection-status",class:{"status-error":!t.checkSuccess,"status-success":t.checkSuccess}},[s("div",{staticClass:"status-icon material-icons"},[t._v(t._s(t.checkSuccess?"check_circle":"close"))]),s("div",{staticClass:"status-text"},[t._v(" "+t._s(t.testMsg)+" ")])]):t._e()])]),s("Loading",{attrs:{show:t.showLoading,text:"连接中..."}})],1)},Gt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"form-hint"},[t._v(" 在服务端配置的密码，"),s("a",{attrs:{href:"#"}},[t._v("如何获取密码？")])])}],Wt={name:"server-config-view",components:{Loading:It},data(){return{showPassword:!1,secret:"",addr:"",showTestResult:!1,testMsg:"",validationErrors:{addr:!1,accessToken:!1},checkSuccess:!1,showLoading:!1,timer:null}},mounted(){this.addr=this.$store.state.serverConfig.addr,this.secret=this.$store.state.serverConfig.secret,this.$bus.$on("rightIconCallBack",this.scanQrCode),window.vue.receiveServerConfig=this.receiveServerConfig,window.vue.receiveConnection=this.receiveConnection},methods:{...(0,_.i0)(["setServerConfig"]),...(0,_.PY)(["SET_SERVER_CONFIG"]),togglePasswordVisibility(){this.showPassword=!this.showPassword},checkConnection(){null!=this.timer&&(clearTimeout(this.timer),this.timer=null),window.Android.checkConnection(this.addr,this.secret),this.showLoading=!0,this.timer=setTimeout(()=>{this.showLoading&&(this.testMsg="服务端无响应...",this.showTestResult=!0,this.checkSuccess=!1,this.showLoading=!1),this.timer=null},5e3)},receiveConnection(t,s){null!=this.timer&&(clearTimeout(this.timer),this.timer=null),this.testMsg=s,this.showTestResult=!0,this.checkSuccess=t,this.showLoading=!1},saveConfig(){this.validationErrors.addr=!1,this.validationErrors.accessToken=!1;let t=!1;if(this.addr||(this.validationErrors.addr=!0,t=!0),this.secret||(this.validationErrors.accessToken=!0,t=!0),t)return this.testMsg=" 请填写完整的设置！",this.showTestResult=!0,void(this.checkSuccess=!1);this.setServerConfig({addr:this.addr,secret:this.secret}),this.testMsg=" 保存设置成功！",this.checkSuccess=!0,this.showTestResult=!0},scanQrCode(){window.Android.startScan()},receiveServerConfig(t){this.SET_SERVER_CONFIG(t),this.addr=t.addr,this.secret=t.secret}},beforeDestroy(){this.$bus.$off(["rightIconCallBack"])}},qt=Wt,Jt=(0,d.A)(qt,Ht,Gt,!1,null,"5e2f4a2d",null),Vt=Jt.exports,Kt=function(){var t=this,s=t._self._c;return s("div",{staticClass:"content"},[s("div",{staticClass:"video-container"},[s("iframe",{attrs:{src:`//player.bilibili.com/player.html?bvid=${t.bvid}&cid=339262048&page=1&high_quality=1&danmaku=0`,allowfullscreen:"allowfullscreen",width:"100%",height:"500",scrolling:"no",frameborder:"0",sandbox:"allow-top-navigation allow-same-origin allow-forms allow-scripts"}}),s("div",{staticClass:"video-overlay",on:{click:t.toBlibili}},[s("div",{staticClass:"video-title"},[t._v("云备份应用使用指南")]),t._m(0)])]),t._m(1),t._m(2),s("div",{staticClass:"tutorial-card"},[t._m(3),s("div",{staticClass:"card-body"},[s("div",{staticClass:"step-item-i",on:{click:function(s){return t.toBrowser(t.githubUserProfileUrl)}}},[t._m(4),t._m(5)]),s("div",{staticClass:"step-item-i",on:{click:function(s){return t.toBilibiliUserProfile(t.authUid)}}},[t._m(6),t._m(7)]),s("div",{staticClass:"step-item-i",on:{click:function(s){return t.toBrowser(t.githubSourceUrl)}}},[t._m(8),s("div",{staticClass:"step-content-i"},[s("div",{staticClass:"step-title"},[t._v("源代码")]),s("div",{staticClass:"step-desc"},[t._v(" 本应用完全开源免费，点击这里访问源代码："+t._s(t.githubSourceUrl)+" ")])])])])])])},Yt=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"video-title"},[s("a",[t._v("跳转b站观看")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"tutorial-card"},[s("div",{staticClass:"card-header"},[s("i",{staticClass:"material-icons"},[t._v("list_alt")]),t._v(" 快速入门指南 ")]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"tutorial-steps"},[s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("1")]),s("div",[s("div",{staticClass:"step-title"},[t._v("启动服务器")]),s("div",{staticClass:"step-desc"},[t._v(" 在pc端，双击下载好的可执行文件 simple-backup.exe, 然后目录下会产生一个 “扫我.png”,打开图片，用于后续扫码 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/服务器启动.png",alt:""}})])]),s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("2")]),s("div",[s("div",{staticClass:"step-title"},[t._v("观察首页提示")]),s("div",{staticClass:"step-desc"},[t._v(" 查看需要配置的两个项目 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/首页截图.jpg",alt:""}})])]),s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("3")]),s("div",[s("div",{staticClass:"step-title"},[t._v("配置服务器连接")]),s("div",{staticClass:"step-desc"},[t._v(" 点击第一个黄色图标，跳转到服务器设置页面， 在设置中配置您的服务器地址和访问令牌，你可以点击右上角，打开相机扫描服务器的二维码， 扫码完成后，点击测试链接，显示如下则表示链接成功 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/首页第一个黄色按钮.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504392.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504378.jpg",alt:""}})])]),s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("4")]),s("div",[s("div",{staticClass:"step-title"},[t._v("选择备份源")]),s("div",{staticClass:"step-desc"},[t._v(" 点击首页第二个黄色按钮, 跳转到备份源管理页面， 首先点击绿色“授权”按钮，选择根目录。 授权成功后，在展示出的文件夹列表中，勾选需要备份的文件夹，并点击右上角的√进行确认，完成配置 支持多选和排除特定文件夹。 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/1754402504360.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504341.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504326.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504308.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504291.jpg",alt:""}})])]),s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("5")]),s("div",[s("div",{staticClass:"step-title"},[t._v("开始第一次备份")]),s("div",{staticClass:"step-desc"},[t._v(" 点击左下角“首页”按钮，回到首页，点击开始首次备份，进入备份界面。等待备份完成。 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/1754402504277.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504260.jpg",alt:""}}),s("img",{attrs:{src:"/img/tutorial/1754402504240.jpg",alt:""}})])]),s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("6")]),s("div",[s("div",{staticClass:"step-title"},[t._v("查看备份历史")]),s("div",{staticClass:"step-desc"},[t._v(" 点击底部“历史”按钮，可查看历史备份数据信息 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/1754402504222.jpg",alt:""}})])]),s("div",{staticClass:"step-item"},[s("div",{staticClass:"step-content"},[s("div",{staticClass:"step-number"},[t._v("7")]),s("div",[s("div",{staticClass:"step-title"},[t._v("再次查看教程")]),s("div",{staticClass:"step-desc"},[t._v(" 你可以从首页右上角的按钮进入教程界面再次查看教程 ")])])]),s("div",{staticClass:"step-image"},[s("img",{attrs:{src:"/img/tutorial/首页再次查看教程.jpg",alt:""}})])])])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"tutorial-card"},[s("div",{staticClass:"card-header"},[s("i",{staticClass:"material-icons"},[t._v("help")]),t._v(" 常见问题解答 ")]),s("div",{staticClass:"card-body"},[s("div",{staticClass:"faq-item"},[s("div",{staticClass:"faq-question"},[s("i",{staticClass:"material-icons"},[t._v("live_help")]),t._v(" 备份过程中断会怎样？ ")]),s("div",{staticClass:"faq-answer"},[t._v(" 应用支持任意情况的中断、暂停。未完成的备份在下次将会继续进行 ")])]),s("div",{staticClass:"faq-item"},[s("div",{staticClass:"faq-question"},[s("i",{staticClass:"material-icons"},[t._v("live_help")]),t._v(" 应用在后台会中断备份吗？ ")]),s("div",{staticClass:"faq-answer"},[t._v(" 不会，只要应用没有被杀死，备份会正常进行。进度可以查看通知栏。为了防止系统杀死进程，可以将应用加入白名单 ")])]),s("div",{staticClass:"faq-item"},[s("div",{staticClass:"faq-question"},[s("i",{staticClass:"material-icons"},[t._v("live_help")]),t._v(" 不会用了怎么办？ ")]),s("div",{staticClass:"faq-answer"},[t._v(" 查看页面顶部的视频教程，或点击进入b站视频下方评论，作者会进行回复 ")])])])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"card-header"},[s("i",{staticClass:"material-icons"},[t._v("support_agent")]),t._v(" 获取更多帮助 ")])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"step-number-i"},[s("i",{staticClass:"material-icons"},[t._v("forum")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"step-content-i"},[s("div",{staticClass:"step-title"},[t._v("作者github主页")]),s("div",{staticClass:"step-desc"},[t._v(" 查看更多好玩的应用 ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"step-number-i"},[s("i",{staticClass:"material-icons"},[t._v("mail")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"step-content-i"},[s("div",{staticClass:"step-title"},[t._v("作者bilibili")]),s("div",{staticClass:"step-desc"},[t._v(" 看看有什么新东西 ")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"step-number-i"},[s("i",{staticClass:"material-icons"},[t._v("menu_book")])])}],Qt={name:"help-view",data(){return{bvid:"BV1L2tAzdEMk",githubSourceUrl:"https://github.com/cctyl/simple-backup",githubUserProfileUrl:"https://github.com/cctyl",bilibiliUserProfileUrl:"https://space.bilibili.com/8427106",authUid:"8427106"}},created(){this.$bus.$on("onAppBackPressed",this.onAppBackPressed)},methods:{toBlibili(){window.Android.toBilibili(this.bvid)},toBrowser(t){window.Android.openInBrowser(t)},toBilibiliUserProfile(t){window.Android.toBilibiliUserProfile(t)},onAppBackPressed(){this.$router.back()}},beforeDestroy(){this.$bus.$off(["onAppBackPressed"])}},Zt=Qt,Xt=(0,d.A)(Zt,Kt,Yt,!1,null,"7f22a6d6",null),ts=Xt.exports;i.Ay.use(S.Ay);const ss=new S.Ay({mode:"hash",routes:[{path:"/",redirect:"/home",meta:{headerTitle:"首页",rightIcon:"help_outline"}},{path:"/home",component:vt,meta:{headerTitle:"首页",rightIcon:"help_outline"}},{path:"/settings",component:Ct,meta:{headerTitle:"设置"}},{path:"/settings/server-config",component:Vt,meta:{headerTitle:"服务器设置",rightIcon:"qr_code_scanner"}},{path:"/settings/source",component:At,meta:{headerTitle:"备份源管理"}},{path:"/settings/source/select",component:zt,meta:{headerTitle:"文件夹选择",icon:"keyboard_return",callBack:function(){this.$router.back()},rightIcon:"done",hideFooter:!0}},{path:"/history",component:St,meta:{headerTitle:"备份历史"}},{path:"/help",component:ts,meta:{headerTitle:"使用帮助"}}]});ss.beforeEach((t,s,e)=>{e()});var es=ss,is={selectedDir:[],headerTitle:null,serverConfig:{addr:null,secret:null,checkMd5:null,forceBackup:null},backupStatus:0},as={setSelectedDir(t,s){window.Android.setSelectDir(JSON.stringify(s)),t.commit("SET_SELECTED_DIR",s)},setServerConfig(t,s){window.Android.setServerConfig(JSON.stringify(s)),t.commit("SET_SERVER_CONFIG",s)}},rs={SET_SELECTED_DIR(t,s){t.selectedDir=s},SET_HEADER_TITLE(t,s){t.headerTitle=s},SET_SERVER_CONFIG(t,s){t.serverConfig=s},SET_BACKUP_STATUS(t,s){t.backupStatus=s}},cs={};i.Ay.use(_.Ay);var os=new _.Ay.Store({state:is,mutations:rs,actions:as,getters:cs});i.Ay.config.productionTip=!1,i.Ay.component("loading-view",It),window.vue={},new i.Ay({render:t=>t(y),router:es,store:os,beforeCreate(){i.Ay.prototype.$bus=this}}).$mount("#app")}},s={};function e(i){var a=s[i];if(void 0!==a)return a.exports;var r=s[i]={exports:{}};return t[i].call(r.exports,r,r.exports,e),r.exports}e.m=t,function(){var t=[];e.O=function(s,i,a,r){if(!i){var c=1/0;for(d=0;d<t.length;d++){i=t[d][0],a=t[d][1],r=t[d][2];for(var o=!0,n=0;n<i.length;n++)(!1&r||c>=r)&&Object.keys(e.O).every(function(t){return e.O[t](i[n])})?i.splice(n--,1):(o=!1,r<c&&(c=r));if(o){t.splice(d--,1);var l=a();void 0!==l&&(s=l)}}return s}r=r||0;for(var d=t.length;d>0&&t[d-1][2]>r;d--)t[d]=t[d-1];t[d]=[i,a,r]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={524:0};e.O.j=function(s){return 0===t[s]};var s=function(s,i){var a,r,c=i[0],o=i[1],n=i[2],l=0;if(c.some(function(s){return 0!==t[s]})){for(a in o)e.o(o,a)&&(e.m[a]=o[a]);if(n)var d=n(e)}for(s&&s(i);l<c.length;l++)r=c[l],e.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return e.O(d)},i=self["webpackChunkweb"]=self["webpackChunkweb"]||[];i.forEach(s.bind(null,0)),i.push=s.bind(null,i.push.bind(i))}();var i=e.O(void 0,[504],function(){return e(27)});i=e.O(i)})();
//# sourceMappingURL=app.a7d31063.js.map