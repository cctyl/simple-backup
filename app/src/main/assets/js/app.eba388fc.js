(function(){"use strict";var t={5369:function(t,e,s){s.d(e,{A:function(){return Re}});s(4114);var a=s(6848),i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex h-screen"},[e("Header"),e("router-view")],1)},o=[],r=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"w-64 bg-gray-800 p-4 flex flex-col"},[t._m(0),e("ul",{staticClass:"space-y-2 flex-grow"},[e("li",[e("router-link",{staticClass:"flex items-center p-3 text-white rounded-md",attrs:{to:"/home","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-chart-line w-6"}),e("span",{staticClass:"ml-3"},[t._v("总览")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/tasks","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-tasks w-6"}),e("span",{staticClass:"ml-3"},[t._v("任务管理")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/review","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-eye w-6"}),e("span",{staticClass:"ml-3"},[t._v("视频审核")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/history-video","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-eye w-6"}),e("span",{staticClass:"ml-3"},[t._v("历史处理视频")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/other-setting","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-wrench w-6"}),e("span",{staticClass:"ml-3"},[t._v("其他配置")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/whitelist","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-check-circle w-6"}),e("span",{staticClass:"ml-3"},[t._v("白名单管理")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/blacklist","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-ban w-6"}),e("span",{staticClass:"ml-3"},[t._v("黑名单管理")])])],1),e("li",[e("router-link",{staticClass:"flex items-center p-3 text-gray-300 hover:bg-gray-700 rounded-md",attrs:{to:"/settings","active-class":"bg-primary"}},[e("i",{staticClass:"fas fa-cog w-6"}),e("span",{staticClass:"ml-3"},[t._v("系统配置")])])],1)])])},l=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-8"},[e("h1",{staticClass:"text-2xl font-['Pacifico'] text-primary"},[t._v("logo")])])}],n={name:"header-view"},c=n,d=s(1656),u=(0,d.A)(c,r,l,!1,null,"17c91d13",null),h=u.exports,p=(s(4603),s(7566),s(8721),s(4373));const g="";function f(t,e={},s="GET"){return new Promise((function(a,i){(0,p.A)({method:s,url:t,baseURL:g,data:e,withCredentials:!0}).then((t=>{t=t.data,t.success||Re.$message(t.message,"error"),a(t)})).catch((t=>{i(t),Re.$message(t,"error")}))}))}var m={checkAccessKey(){return f("/config/check-accesskey")},checkScanResult(){return f("/config/web-scan-result")},getWebQrCode(){return f("/config/web-qr-code")},getTvQrCode(){return f("/config/tv-qr-code")},checkTvScanResult(){return f("/config/tv-scan-result")},getCookieList(t,e){return f(`/cookie-header-data/list/${t}/${e}`)},addCookie(t){return f("/cookie-header-data",t,"POST")},updateCookie(t){return f("/cookie-header-data",t,"PUT")},deleteCookie(t){return f("/cookie-header-data",t,"DELETE")},getConfigList(){return f("/config/standard")},addOrUpdateConfig(t){return f("/config/standard",t,"POST")},getDictList(t,e){return f(`/dict/list?dictType=${e}&accessType=${t}`)},getCacheTrainResult(t){return f("/black-rule/cache-train-result/"+t)},submitSelectTrainResult(t,e){return f("/black-rule/cache-train-result/"+t,e,"PUT")},getBlackKeyWordList(){return f("/black-rule/keyword")},getBlackTidList(){return f("/black-rule/tid")},getBlackUserIdList(){return f("/black-rule/user-id")},getBlackTagList(){return f("/black-rule/tag")},getIgnoreKeyWordList(){return f("/black-rule/ignore")},getIgnoreTagList(){return f("/black-rule/ignoreTag")},getUserNameByMid(t){return f(`/dict/getUserNameByMid/${t}`)},getRegionList(){return f("/region/list")},addDict(t){return f("/dict",t,"POST")},delDictById(t){return f(`/dict/${t}`,null,"DELETE")},getWhiteRuleList(t,e){return f(`/white-rule/list/${t}/${e}`)},addOrUpdateWhiteRule(t){return f("/white-rule",t,"POST")},delWhiteRuleById(t){return f(`/white-rule/${t}`,null,"DELETE")},batchRemoveAndUpdate(t,e,s){return f(`/dict/batchRemoveAndUpdate?accessType=${t}&dictType=${e}`,s,"POST")},getTaskList(){return f("/task/task-list")},updateTaskEnabled(t){return f("/task",t,"PUT")},triggerTask(t,e=[]){const s=e.join(",");return f(`/task/common-trigger-task?classAndMethodName=${t}&paramArr=${s}`)},saveVideoComment(t){return f(`/reply/save-reply?bvid=${t}`,null,"POST")},disklikeByTid(t){return f("/black-rule/disklike-by-tid",t,"POST")},isBlack(t){return f(`/black-rule/check-video?bvid=${t}`)},isWhite(t){return f(`/white-rule/check-video?bvid=${t}`)},thumbUpUserVideo(t){return f(`/white-rule/thumb-up-all/${t}`,null,"POST")},dislikeUserVideo(t,e){return f(`/black-rule/disklike-by-uid?train=${e}`,[t],"POST")},trainWhiteRule(t){return f(`/white-rule/train?id=${t.id?t.id:""}&mid=${t.mid?t.mid:""}`,t.trainedBvidList,"POST")},getOverviewData(t){return f(`/overview?year=${t}`)},getReady2HandleVideo(t){return f(`/task/ready2handle?page=${t.page}&size=${t.size}&sort=${t.sort||""}&handleType=${t.handleType}`)},getAlreadyHandleVideo(t){return f(`/task/already-handle?page=${t.page}&size=${t.size}&sort=${t.sort||""}&handleType=${t.handleType}&search=${t.search}`)},processVideo(t,e,s,a=!1){const i=new URLSearchParams;return i.append("id",t),i.append("handleType",e),i.append("reHandle",a),s&&i.append("reason",s),f(`/task/process?${i.toString()}`,null,"PUT")},watchVideo(t){return f(`/video-detail/watch/${t}`,null,"POST")}},v={name:"App",components:{Header:h},mounted(){this.checkLogin()},methods:{async checkLogin(){try{const t=await m.checkAccessKey();-1!==t.message.indexOf("未登录/登录失效")&&this.$message(t.message,"error")}catch(t){console.error("获取用户数据失败:",t)}}}},y=v,b=(0,d.A)(y,i,o,!1,null,null,null),w=b.exports,C=s(6178),x=(s(1454),function(){var t=this,e=t._self._c;return e("main",{staticClass:"flex-1 p-6 overflow-auto custom-scrollbar"},[e("header",{staticClass:"flex justify-between items-center mb-6"},[t._m(0),e("div",{staticClass:"flex items-center"},[e("button",{staticClass:"bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-md mr-2 !rounded-button whitespace-nowrap",on:{click:t.fetchOverviewData}},[e("i",{staticClass:"fas fa-sync-alt mr-2"}),t._v("刷新数据 ")])])]),e("div",{staticClass:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},[e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(1),e("p",{staticClass:"text-3xl font-bold text-primary mb-1"},[t._v(t._s(t.overview.runningTaskCount))]),e("p",{staticClass:"text-sm text-gray-400"},[t._v("活跃任务总数")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(2),e("p",{staticClass:"text-3xl font-bold text-red-400 mb-1"},[t._v(t._s(t.overview.blackRuleCount))]),e("p",{staticClass:"text-sm text-gray-400"},[t._v("已设置的判断规则字典数（总计）")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(3),e("p",{staticClass:"text-3xl font-bold text-orange-300 mb-1"},[t._v(t._s(t.overview.blackCacheCount))]),e("p",{staticClass:"text-sm text-gray-400"},[t._v("需要用户在黑名单管理页面底部去筛选的关键词")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(4),e("p",{staticClass:"text-3xl font-bold text-green-400"},[t._v(t._s(t.overview.whiteRuleCount))]),e("p",{staticClass:"text-sm text-gray-400"},[t._v("已设置的判断规则字典数（总计）")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(5),e("p",{staticClass:"text-3xl font-bold text-pink-400"},[t._v(t._s(t.overview.searchKeywordCount))]),e("p",{staticClass:"text-sm text-gray-400 mt-2"},[t._v("用于搜索的关键词")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(6),e("p",{staticClass:"text-3xl font-bold text-yellow-400"},[t._v(t._s(t.overview.runDays))]),e("p",{staticClass:"text-sm text-gray-400 mt-2"},[t._v("稳定运行中")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(7),e("p",{staticClass:"text-3xl font-bold text-blue-400"},[t._v(t._s(t.overview.likeVideoCount))]),e("p",{staticClass:"text-sm text-gray-400 mt-2"},[t._v("历史点赞的视频总数")])]),e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[t._m(8),e("p",{staticClass:"text-3xl font-bold text-purple-400"},[t._v(t._s(t.overview.hateVideoCount))]),e("p",{staticClass:"text-sm text-gray-400 mt-2"},[t._v("历史点踩的视频总数")])])]),e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"},[e("div",{staticClass:"bg-gray-700 rounded-lg p-6"},[e("div",{staticClass:"flex items-center justify-between"},[e("h3",{staticClass:"text-lg font-medium"},[t._v("待二次处理(审核)")]),e("svg",{staticClass:"h-6 w-6 text-blue-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}})])]),e("div",{staticClass:"mt-4"},[e("div",{staticClass:"flex items-baseline"},[e("span",{staticClass:"text-3xl font-bold"},[t._v(t._s(t.overview.secondHandleCount))]),e("span",{staticClass:"ml-2 text-sm text-gray-400"},[t._v("条")])]),e("p",{staticClass:"mt-2 text-sm text-gray-400"},[t._v("等待二次处理的数据，即左侧的视频审核菜单")])])]),e("div",{staticClass:"bg-gray-700 rounded-lg p-6"},[e("div",{staticClass:"flex items-center justify-between"},[e("h3",{staticClass:"text-lg font-medium"},[t._v("待三次处理")]),e("svg",{staticClass:"h-6 w-6 text-purple-400",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}})])]),e("div",{staticClass:"mt-4"},[e("div",{staticClass:"flex items-baseline"},[e("span",{staticClass:"text-3xl font-bold"},[t._v(t._s(t.overview.thirdHandleCount))]),e("span",{staticClass:"ml-2 text-sm text-gray-400"},[t._v("条")])]),e("p",{staticClass:"mt-2 text-sm text-gray-400"},[t._v("等待三次处理的数据")])])])]),e("div",{staticClass:"grid grid-cols-1 gap-6 mb-6"},[e("div",{staticClass:"bg-gray-800 p-4 rounded-lg shadow-lg"},[e("h3",{staticClass:"text-lg mb-4"},[t._v("历史处理数据统计")]),e("div",{staticClass:"relative"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedYear,expression:"selectedYear"}],staticClass:"bg-gray-700 text-white px-4 py-2 rounded-md appearance-none cursor-pointer pr-8",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedYear=e.target.multiple?s:s[0]},t.handleYearChange]}},t._l(t.range(2020,2050),(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(s)+"年 ")])})),0)]),e("div",{ref:"chartContainer",staticStyle:{height:"400px"}})])]),e("div",{staticClass:"bg-gray-800 p-6 rounded-lg shadow-lg"},[e("h2",{staticClass:"text-xl font-bold mb-4"},[t._v("任务信息")]),t.overview.taskList&&0!==t.overview.taskList.length?e("div",{staticClass:"space-y-4"},t._l(t.overview.taskList,(function(s,a){return e("div",{key:s.id,staticClass:"bg-gray-700 p-4 rounded-lg",class:{"border-l-4 border-green-500 bg-gray-600":"RUNNING"===s.currentRunStatus,"border-l-4 border-yellow-400":"WAITING"===s.currentRunStatus}},[e("div",{staticClass:"flex items-center justify-between mb-2"},[e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"font-semibold"},[t._v(t._s(s.taskName))]),"RUNNING"===s.currentRunStatus?e("span",{staticClass:"ml-2 px-2 py-1 text-xs bg-green-500 text-white rounded"},[t._v("运行中")]):t._e(),1===a?e("span",{staticClass:"ml-2 px-2 py-1 text-xs bg-yellow-400 text-black rounded"},[t._v("下一个")]):t._e()]),e("span",{staticClass:"text-sm text-gray-400"},[t._v("上次运行: "+t._s(s.lastRunTime))])]),e("p",{staticClass:"text-sm text-gray-400 mb-2"},[t._v(t._s(s.description))]),e("div",{staticClass:"flex flex-wrap gap-4 text-sm text-gray-300"},[e("span",[t._v("状态: "+t._s(t.getStatus(s.currentRunStatus)))])])])})),0):e("div",{staticClass:"flex flex-col items-center justify-center py-8"},[e("svg",{staticClass:"h-12 w-12 text-gray-500 mb-4",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"}})]),e("p",{staticClass:"text-gray-400 text-lg"},[t._v("暂无任务信息")]),e("p",{staticClass:"text-gray-500 text-sm mt-2"},[t._v("当前没有正在运行或等待的任务")])])])])}),k=[function(){var t=this,e=t._self._c;return e("div",[e("h1",{staticClass:"text-2xl font-bold"},[t._v("总览")]),e("p",{staticClass:"text-gray-400 mt-1"},[t._v("欢迎回来，管理员。这里是您的系统概览。")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-2"},[e("h3",{staticClass:"text-lg"},[t._v("当前运行任务数")]),e("i",{staticClass:"fas fa-tasks text-2xl text-primary"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-2"},[e("h3",{staticClass:"text-lg"},[t._v("黑名单规则数")]),e("i",{staticClass:"fas fa-ban text-2xl text-red-400"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-2"},[e("h3",{staticClass:"text-lg"},[t._v("待筛选的黑名单关键词数")]),e("i",{staticClass:"fas fa-ban text-2xl text-orange-300"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-4"},[e("h3",{staticClass:"text-lg"},[t._v("白名单规则数")]),e("i",{staticClass:"fas fa-check-circle text-2xl text-green-400"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-4"},[e("h3",{staticClass:"text-lg"},[t._v("搜索关键词数")]),e("i",{staticClass:"fas fa-search text-2xl text-pink-400"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-4"},[e("h3",{staticClass:"text-lg"},[t._v("已运行天数")]),e("i",{staticClass:"fas fa-calendar text-2xl text-yellow-400"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-4"},[e("h3",{staticClass:"text-lg"},[t._v("历史点赞数")]),e("i",{staticClass:"fas fa-thumbs-up text-2xl text-blue-400"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-4"},[e("h3",{staticClass:"text-lg"},[t._v("历史点踩数")]),e("i",{staticClass:"fas fa-thumbs-down text-2xl text-purple-400"})])}],_=(s(7642),s(8004),s(3853),s(5876),s(2475),s(5024),s(1698),s(8992),s(8872),s(9671)),T={name:"home-page",data(){return{chart:null,overview:{runningTaskCount:0,blackRuleCount:0,whiteRuleCount:0,runDays:0,whiteHistory:[],blackHistory:[],otherHistory:[],secondHandleCount:0,thirdHandleCount:0,taskList:[]},selectedYear:(new Date).getFullYear()}},methods:{range(t,e){return Array.from({length:e-t+1},((e,s)=>t+s))},handleYearChange(){this.fetchOverviewData()},initChart(){this.chart=_.Ts(this.$refs.chartContainer);const t=t=>t.reduce(((t,e)=>{const[[s,a]]=Object.entries(e);return t.dates.push(s),t.values.push(a),t}),{dates:[],values:[]}),e=t(this.overview.whiteHistory),s=t(this.overview.blackHistory),a=t(this.overview.otherHistory),i={backgroundColor:"transparent",tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{data:["点赞","点踩","其他"],textStyle:{color:"#9CA3AF"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:[...new Set([...e.dates,...s.dates,...a.dates])].sort(),axisLine:{lineStyle:{color:"#4B5563"}},axisLabel:{color:"#9CA3AF",interval:0,rotate:45},splitLine:{show:!1}},yAxis:{type:"value",axisLine:{lineStyle:{color:"#4B5563"}},axisLabel:{color:"#9CA3AF"},splitLine:{lineStyle:{color:"#374151",type:"dashed"}}},series:[{name:"点赞",type:"bar",barWidth:"20%",data:e.values,itemStyle:{color:"#10B981",borderRadius:[4,4,0,0]}},{name:"点踩",type:"bar",barWidth:"20%",data:s.values,itemStyle:{color:"#EF4444",borderRadius:[4,4,0,0]}},{name:"其他",type:"bar",barWidth:"20%",data:a.values,itemStyle:{color:"#F59E0B",borderRadius:[4,4,0,0]}}]};this.chart.setOption(i)},async fetchOverviewData(){try{const t=await m.getOverviewData(this.selectedYear);this.overview=t.data,this.initChart()}catch(t){console.error("获取历史数据失败:",t)}},handleResize(){this.chart&&this.chart.resize()},getStatus(t){switch(t){case"RUNNING":return"运行中";case"STOPPED":return"未启动";case"WAITING":return"排队中";default:return t}}},mounted(){this.fetchOverviewData(),window.addEventListener("resize",this.handleResize)},beforeDestroy(){window.removeEventListener("resize",this.handleResize),this.chart&&this.chart.dispose()}},R=T,L=(0,d.A)(R,x,k,!1,null,"4c02c85f",null),P=L.exports,K=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-8 overflow-y-auto"},[t._m(0),e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6 items-start"},t._l(t.filterTaskList,(function(s){return e("div",{key:s.id,staticClass:"break-inside-avoid mb-6 rounded-lg p-6 bg-gray-800 shadow-md hover:shadow-lg transform hover:-translate-y-1 active:shadow-inner transition-all duration-200"},[e("div",{staticClass:"w-full cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"},[e("div",{staticClass:"flex items-center justify-center mb-4"},[e("i",{staticClass:"w-16 h-16 rounded-full text-4xl",class:s.img})]),e("h3",{staticClass:"text-lg font-semibold text-center mb-2"},[t._v(t._s(s.taskName))]),e("p",{staticClass:"text-sm text-gray-400 text-center mb-4"},[t._v(t._s(s.description))])]),e("div",{staticClass:"task-details"},[e("div",{staticClass:"flex justify-center mb-2"},[e("span",{staticClass:"px-2 py-1 text-xs font-semibold rounded-full",class:t.statusClass(s.currentRunStatus)},[t._v(" "+t._s(t.getStatus(s.currentRunStatus))+" ")])]),e("div",{staticClass:"task-info-grid"},[e("div",{staticClass:"task-info-item"},[t._m(1,!0),e("div",{staticClass:"task-info-value"},[t._v(t._s(s.totalRunCount))])]),e("div",{staticClass:"task-info-item"},[t._m(2,!0),e("div",{staticClass:"task-info-value"},[t._v(t._s(s.lastRunDuration)+"秒")])]),e("div",{staticClass:"task-info-item"},[t._m(3,!0),e("div",{staticClass:"task-info-value"},[t._v(t._s(s.lastRunTime))])]),e("div",{staticClass:"task-info-item"},[t._m(4,!0),e("div",{staticClass:"task-info-value"},[e("div",{staticClass:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.isEnabled,expression:"task.isEnabled"}],staticClass:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",attrs:{type:"checkbox",id:"task-status-toggle"+s.id},domProps:{checked:Array.isArray(s.isEnabled)?t._i(s.isEnabled,null)>-1:s.isEnabled},on:{click:function(e){return t.handleTaskStatusChange(s)},change:function(e){var a=s.isEnabled,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=null,l=t._i(a,r);i.checked?l<0&&t.$set(s,"isEnabled",a.concat([r])):l>-1&&t.$set(s,"isEnabled",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(s,"isEnabled",o)}}}),e("label",{staticClass:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer",attrs:{for:"task-status-toggle"+s.id}})])])]),s.isEnabled?e("div",{staticClass:"task-info-item"},[t._m(5,!0),s.editScheduledHour?[e("select",{directives:[{name:"model",rawName:"v-model",value:s.scheduledHour,expression:"task.scheduledHour"}],staticClass:"bg-gray-700 text-white rounded px-2 py-1 text-sm",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"scheduledHour",e.target.multiple?a:a[0])},function(e){return t.changeScheduledTime(s)}],blur:function(t){s.editScheduledHour=!1}}},t._l(24,(function(s){return e("option",{key:s-1,domProps:{value:s-1}},[t._v(t._s(s-1)+":00")])})),0),e("button",{staticClass:"ml-2 text-gray-400 hover:text-white",on:{click:function(t){s.editScheduledHour=!1}}},[e("i",{staticClass:"fas fa-times"})])]:[e("span",{staticClass:"cursor-pointer hover:text-blue-400",on:{click:function(t){s.editScheduledHour=!0}}},[t._v(" "+t._s(s.scheduledHour)+":00 ")])]],2):t._e(),s.isEnabled?e("div",{staticClass:"task-info-item"},[t._m(6,!0),e("div",{staticClass:"task-info-value"},[t._v(t._s(t.getNextRunTime(s.scheduledHour))+"小时后")])]):t._e()]),e("div",{staticClass:"mt-4 flex justify-center"},[e("button",{staticClass:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",attrs:{disabled:!("STOPPED"===s.currentRunStatus)},on:{click:function(e){return e.stopPropagation(),t.triggerTask(s)}}},[e("i",{staticClass:"fas fa-play mr-2"}),e("span",[t._v(t._s("STOPPED"===s.currentRunStatus?"手动触发":"执行中..."))])])])])])})),0),t._m(7),e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6 items-start"},[e("SimpleCard",{attrs:{status:t.getTaskStatus("io.github.cctyl.controller.ReplyController.saveVideoReplay"),title:"保存某个视频下的所有评论",trigger:t.saveVideoComment,img:"fas fa-comments",desc:"保存某个视频下的所有评论，方便后续cha shui biao"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.saveVideoCommentUrl,expression:"saveVideoCommentUrl"}],staticClass:"flex-grow mr-4 bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"https://www.bilibili.com/video/BV1HcfsYxEFA/"},domProps:{value:t.saveVideoCommentUrl},on:{input:function(e){e.target.composing||(t.saveVideoCommentUrl=e.target.value)}}})])],1),t._m(8),e("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-6 items-start"},[e("SimpleCard",{attrs:{status:t.getTaskStatus("io.github.cctyl.controller.BlackRuleController.dislikeByTid"),title:"对指定分区的 排行榜、热门视频进行点踩",trigger:t.thumbDown,img:"fas fa-ban",desc:"选择一个分区，对该分区的 排行榜、热门视频进行点踩"}},[e("RegionComponent",{attrs:{partitions:t.partitions,"handle-partition":t.handlePartitionCheck}})],1),e("SimpleCard",{attrs:{status:t.getTaskStatus("RUNNING"),title:"判断指定视频是否符合黑名单",trigger:t.isBlack,img:"fas fa-exclamation-triangle",desc:"输入视频链接，判断指定视频是否符合黑名单"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isBlackUrl,expression:"isBlackUrl"}],staticClass:"flex-grow mr-4 bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"https://www.bilibili.com/video/BV1HcfsYxEFA/"},domProps:{value:t.isBlackUrl},on:{input:function(e){e.target.composing||(t.isBlackUrl=e.target.value)}}}),t.blackRes?e("div",{attrs:{slot:"other"},slot:"other"},[e("div",{staticClass:"task-info-item"},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("视频：")])]),e("div",{},[t._v(t._s(t.blackRes.videoDetail.title))])]),e("div",{staticClass:"task-info-item",style:t.blackRes.total?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("结论")])]),e("div",{staticClass:"task-info-value"},[t._v(t._s(!0===t.blackRes.total?"黑名单":"不属于黑名单"))])]),!0===t.blackRes.total?e("div",{staticClass:"task-info-item",style:t.blackRes.total?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("黑名单原因")])]),e("div",{domProps:{innerHTML:t._s(t.blackRes.blackReason)}})]):t._e(),e("div",{staticClass:"task-info-item",style:t.blackRes.midMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("用户id是否匹配")])])]),e("div",{staticClass:"task-info-item",style:t.blackRes.tidMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("分区是否匹配")])])]),e("div",{staticClass:"task-info-item",style:t.blackRes.coverMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("封面是否匹配")])])]),e("div",{staticClass:"task-info-item",style:t.blackRes.tagMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("标签是否匹配")])])]),e("div",{staticClass:"task-info-item",style:t.blackRes.titleMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("标题是否匹配")])])]),e("div",{staticClass:"task-info-item",style:t.blackRes.descMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("描述是否匹配")])])])]):t._e()]),e("SimpleCard",{attrs:{status:t.getTaskStatus("io.github.cctyl.controller.BlackRuleController.dislikeByUserId"),title:"对指定用户的视频进行点踩",trigger:t.dislikeUserVideo,img:"fas fa-thumbs-down",desc:"输入对方的主页地址，对指定用户的视频进行点踩"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.blackSpaceUrl,expression:"blackSpaceUrl"}],staticClass:"flex-grow mr-4 bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"https://space.bilibili.com/123456"},domProps:{value:t.blackSpaceUrl},on:{input:function(e){e.target.composing||(t.blackSpaceUrl=e.target.value)}}}),e("div",{staticClass:"task-info-item",staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-between"},attrs:{slot:"other"},slot:"other"},[e("div",{staticClass:"task-info-label"},[e("span",[t._v("将这些视频加入黑名单规则训练")])]),e("div",{staticClass:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.blackSpaceTrain,expression:"blackSpaceTrain"}],staticClass:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",attrs:{type:"checkbox",id:"task-status-toggleblackSpaceUrl"},domProps:{checked:Array.isArray(t.blackSpaceTrain)?t._i(t.blackSpaceTrain,null)>-1:t.blackSpaceTrain},on:{change:function(e){var s=t.blackSpaceTrain,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);a.checked?r<0&&(t.blackSpaceTrain=s.concat([o])):r>-1&&(t.blackSpaceTrain=s.slice(0,r).concat(s.slice(r+1)))}else t.blackSpaceTrain=i}}}),e("label",{staticClass:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer",attrs:{for:"task-status-toggleblackSpaceUrl"}})])])])],1),t._m(9),e("div",{staticClass:"flex flex-wrap gap-6"},[e("SimpleCard",{staticClass:"flex-grow basis-[300px]",attrs:{status:t.getTaskStatus("RUNNING"),title:"判断指定视频是否符合白名单",trigger:t.isWhite,img:"fas fa-exclamation-triangle",desc:"输入视频链接，判断指定视频是否符合白名单"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isWhiteUrl,expression:"isWhiteUrl"}],staticClass:"flex-grow mr-4 bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"https://www.bilibili.com/video/BV1HcfsYxEFA/"},domProps:{value:t.isWhiteUrl},on:{input:function(e){e.target.composing||(t.isWhiteUrl=e.target.value)}}}),t.whiteRes?e("div",{attrs:{slot:"other"},slot:"other"},[e("div",{staticClass:"task-info-item"},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("视频：")])]),e("div",{},[t._v(t._s(t.whiteRes.videoDetail.title))])]),e("div",{staticClass:"task-info-item",style:t.whiteRes.total?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("结论")])]),e("div",{staticClass:"task-info-value"},[t._v(t._s(!0===t.whiteRes.total?"白名单":"不属于白名单"))])]),!0===t.whiteRes.total?e("div",{staticClass:"task-info-item",style:t.whiteRes.total?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("白名单原因")])]),e("div",{domProps:{innerHTML:t._s(t.whiteRes.thumbUpReason)}})]):t._e(),e("div",{staticClass:"task-info-item",style:t.whiteRes.midMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("用户id是否匹配")])])]),e("div",{staticClass:"task-info-item",style:t.whiteRes.tidMatch?"background-color: #3864ed;":""},[e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("分区是否匹配")])])])]):t._e()]),e("SimpleCard",{staticClass:"flex-grow basis-[300px]",attrs:{status:t.getTaskStatus("io.github.cctyl.controller.WhiteRuleController.thumbUpUserAllVideo"),title:"对指定用户的视频进行点赞",trigger:t.thumbUpUserVideo,img:"fas fa-thumbs-up",desc:"输入对方的主页地址，对该用户的所有视频均进行点赞"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.whiteSpaceUrl,expression:"whiteSpaceUrl"}],staticClass:"flex-grow mr-4 bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"https://space.bilibili.com/123456"},domProps:{value:t.whiteSpaceUrl},on:{input:function(e){e.target.composing||(t.whiteSpaceUrl=e.target.value)}}})]),e("SimpleCard",{staticClass:"flex-grow basis-[600px]",attrs:{status:t.getTaskStatus("io.github.cctyl.controller.WhiteRuleController.addTrain"),title:"根据用户视频/视频列表训练白名单规则",trigger:t.trainWhiteRule,img:"fas fa-list-check",desc:"输入用户主页地址，或者一批视频列表，根据这些视频提供的信息，补充白名单规则。<br>注意,只有出现了三次以上的关键词才会被采纳，如果没有关键词被采纳，规则将不会被生成。<br>\n              为了避免这种尴尬的事情发生，，请保证提供较多的相同类型的视频"}},[e("div",{staticClass:"block w-full"},[e("div",{staticClass:"flex items-center justify-between mb-4"},[e("span",{staticClass:"mr-2 text-sm px-2 py-1 bg-gray-700 rounded",staticStyle:{color:"#9CA3AF"}},[t._v(t._s(t.useTagInput?"根据指定的视频进行训练":"根据指定用户投稿的视频进行训练"))]),e("div",{staticClass:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.useTagInput,expression:"useTagInput"}],staticClass:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",attrs:{type:"checkbox",id:"mode-toggle"},domProps:{checked:Array.isArray(t.useTagInput)?t._i(t.useTagInput,null)>-1:t.useTagInput},on:{change:function(e){var s=t.useTagInput,a=e.target,i=!!a.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);a.checked?r<0&&(t.useTagInput=s.concat([o])):r>-1&&(t.useTagInput=s.slice(0,r).concat(s.slice(r+1)))}else t.useTagInput=i}}}),e("label",{staticClass:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer",attrs:{for:"mode-toggle"}})])]),t.useTagInput?e("TagInput",{attrs:{label:"BV号",tags:t.tagObj,type:"bvTag","on-add":t.addTag,"on-remove":t.removeTag}}):[e("div",{staticClass:"mb-2"},[t._v("up主个人主页链接")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.whiteSpaceTrainUrl,expression:"whiteSpaceTrainUrl"}],staticClass:"w-full bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"https://space.bilibili.com/123456"},domProps:{value:t.whiteSpaceTrainUrl},on:{input:function(e){e.target.composing||(t.whiteSpaceTrainUrl=e.target.value)}}})]],2),e("div",{staticClass:"bg-gray-800 rounded-lg overflow-hidden mb-6 mt-6 pr-4",attrs:{slot:"other"},slot:"other"},[e("div",{staticClass:"flex justify-between items-center mb-8"},[e("h5",{staticClass:"text-2xl font-bold"},[t._v("选择一个规则用于训练")]),e("div",{staticClass:"flex items-center space-x-4"},[e("div",{staticClass:"relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"bg-gray-700 text-white px-4 py-2 rounded-full !rounded-button focus:outline-none focus:ring-2 text-sm",attrs:{type:"text",placeholder:"搜索白名单..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("i",{staticClass:"fas fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})])]),e("button",{staticClass:"bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-full text-sm flex items-center",on:{click:function(e){t.selectRuleId=null}}},[e("i",{staticClass:"fas fa-times mr-2"}),t._v(" 清除选择 ")])]),e("table",{staticClass:"w-full whitelist-management__table"},[e("thead",[e("tr",{staticClass:"bg-gray-700"},[e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("#")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("规则名称")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("标签关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("标题关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("封面关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("描述关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("操作")])])]),e("tbody",{staticClass:"divide-y divide-gray-700"},t._l(t.filteredWhitelist,(function(s){return e("tr",{key:s.id,staticClass:"hover:bg-gray-750"},[e("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.selectRuleId,expression:"selectRuleId"}],attrs:{type:"radio",name:"rid"},domProps:{value:s.id,checked:t._q(t.selectRuleId,s.id)},on:{change:function(e){t.selectRuleId=s.id}}})]),e("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[t._v(t._s(s.info))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.tagNameList.join(", ")))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.titleKeyWordList.join(", ")))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.coverKeyword.join(", ")))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.descKeyWordList.join(", ")))])])})),0)])])])],1)])},S=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-8"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v("定时任务管理")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-tasks"}),e("span",[t._v("总运行次数")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-stopwatch"}),e("span",[t._v("上次运行耗时")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-clock"}),e("span",[t._v("上次运行时间")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-toggle-on"}),e("span",[t._v("定时任务状态")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-clock"}),e("span",[t._v("定时运行时间")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"task-info-label"},[e("i",{staticClass:"fas fa-hourglass-half"}),e("span",[t._v("预计下次运行")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-8 mt-8"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v("其他可触发操作")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-8 mt-8"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v("黑名单操作")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex justify-between items-center mb-8 mt-8"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v("白名单操作")])])}],I=(s(4520),s(3949),s(7550),function(){var t=this,e=t._self._c;return e("div",{staticClass:"break-inside-avoid mb-6 rounded-lg p-6 bg-gray-800 shadow-md hover:shadow-lg transform hover:-translate-y-1 active:shadow-inner transition-all duration-200"},[e("div",{staticClass:"w-full cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500"},[e("div",{staticClass:"flex items-center justify-center mb-4"},[e("i",{staticClass:"w-16 h-16 rounded-full text-4xl",class:t.img})]),e("h3",{staticClass:"text-lg font-semibold text-center mb-2"},[t._v(t._s(t.title))]),e("p",{staticClass:"text-sm text-gray-400 text-center mb-4",domProps:{innerHTML:t._s(t.desc)}})]),e("div",{staticClass:"task-details"},[e("div",{staticClass:"flex justify-center mb-2"},["无状态"!=t.status?e("span",{staticClass:"px-2 py-1 text-xs font-semibold rounded-full",class:t.statusClass()},[t._v(" "+t._s(t.getStatus())+" ")]):t._e()])]),e("div",{staticClass:"mt-4 flex justify-center"},[e("button",{staticClass:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",on:{click:t.trigger}},[e("i",{staticClass:"fas fa-play mr-2"}),e("span",[t._v("执行")])])]),e("div",{staticClass:"mt-4 flex justify-center"},[t._t("default")],2),e("div",{staticClass:"mt-4 pr-1",staticStyle:{"max-height":"350px",overflow:"auto"}},[t._t("other")],2)])}),A=[],D={name:"simple-card-component",data(){return{}},props:{img:String,title:String,desc:String,trigger:Function,status:String},mounted(){},methods:{statusClass(){switch(this.status){case"RUNNING":return"bg-green-500 text-white";case"STOPPED":return"bg-blue-500 text-white";case"WAITING":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},getStatus(){switch(this.status){case"RUNNING":return"运行中";case"STOPPED":return"未启动";case"WAITING":return"排队中";default:return this.status}}}},U=D,M=(0,d.A)(U,I,A,!1,null,"2c2fbd98",null),$=M.exports,E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"partition-dialog"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"search-box bg-gray-700 text-white px-3 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:"搜索分区"},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("div",{staticClass:"partition-list"},[e("ul",t._l(t.filteredPartitions,(function(s){return e("li",{key:s.id,staticClass:"partition-item"},[e("label",[e("input",{directives:[{name:"model",rawName:"v-model",value:s.checked,expression:"item.checked"}],staticClass:"custom-checkbox",attrs:{type:"checkbox"},domProps:{value:s.tid,checked:Array.isArray(s.checked)?t._i(s.checked,s.tid)>-1:s.checked},on:{click:function(e){return t.handlePartition(s)},change:function(e){var a=s.checked,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=s.tid,l=t._i(a,r);i.checked?l<0&&t.$set(s,"checked",a.concat([r])):l>-1&&t.$set(s,"checked",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(s,"checked",o)}}}),t._v(" "+t._s(s.name)+" ")])])})),0)])])},N=[],O={name:"region-component",data(){return{searchQuery:"",selectedPartitions:[]}},computed:{filteredPartitions(){return this.partitions.filter((t=>t.name.includes(this.searchQuery)))}},props:{partitions:Array,handlePartition:Function},watch:{},mounted(){},methods:{}},W=O,B=(0,d.A)(W,E,N,!1,null,"7169f3a4",null),H=B.exports,j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:t.type}},[t._v(t._s(t.label))]),e("div",{staticClass:"tag-input-container w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500"},[e("div",{staticClass:"tags"},t._l(t.tags[t.type],(function(s,a){return e("span",{key:a,staticClass:"bg-gray-600 text-white px-3 py-1 rounded-full !rounded-button mr-2 mb-2 flex items-center"},[t._v(" "+t._s(s)+" "),e("span",{staticClass:"close ml-2 text-red-400 hover:text-red-300 focus:outline-none",on:{click:function(e){return t.removeTag(a)}}},[t._v("x")])])})),0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tagInput,expression:"tagInput"}],staticClass:"tag-input bg-gray-700 text-white",attrs:{type:"text",id:t.type,placeholder:"按下回车添加"},domProps:{value:t.tagInput},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.addTag.apply(null,arguments))},input:function(e){e.target.composing||(t.tagInput=e.target.value)}}})])])},V=[],F={name:"TagInput",props:{label:String,tags:Object,type:String,onAdd:Function,onRemove:Function},mounted(){},data(){return{tagInput:""}},methods:{addTag(){console.log(this.tagInput),""!==this.tagInput.trim()&&(this.onAdd(this.type,this.tagInput.trim()),this.tagInput="")},removeTag(t){this.onRemove(this.type,t)}}},G=F,z=(0,d.A)(G,j,V,!1,null,"0667465c",null),Q=z.exports,Y={name:"home-view",components:{TagInput:Q,RegionComponent:H,SimpleCard:$},data(){return{showNewTaskModal:!1,newTask:{name:"",description:""},tasks:[],saveVideoCommentUrl:"",showTidModal:!0,partitions:[{tid:1,code:"douga",name:"动画(主分区)",desc:"",router:"/v/douga",pid:null}],isBlackUrl:"",isWhiteUrl:"",blackRes:null,whiteRes:null,whiteSpaceUrl:"",blackSpaceUrl:"",blackSpaceTrain:!1,tagObj:{bvTag:[]},whiteSpaceTrainUrl:"",useTagInput:!1,whitelist:[],pageNo:1,pageSize:999,searchQuery:"",selectRuleId:null}},mounted(){this.fetchWhitelist(),this.fetchTaskData(),this.fetchRegionList()},computed:{filteredWhitelist(){const t=this.searchQuery.toLowerCase();return console.log(this.whitelist),this.whitelist.filter((e=>{try{return e.info&&e.info.toLowerCase().includes(t)||e.tagNameList&&e.tagNameList.some((e=>e.toLowerCase().includes(t)))||e.titleKeyWordList&&e.titleKeyWordList.some((e=>e.toLowerCase().includes(t)))||e.coverKeyword&&e.coverKeyword.some((e=>e.toLowerCase().includes(t)))||e.descKeyWordList&&e.descKeyWordList.some((e=>e.toLowerCase().includes(t)))}catch(s){console.log(s)}}))},filterTaskList(){return this.tasks.filter((t=>t.taskName))}},methods:{async trainWhiteRule(){let t=!1;if(this.selectRuleId){const e=this.whitelist.filter((t=>t.id==this.selectRuleId));t=confirm(`你选择的规则是：${e[0].info} ，接下来将根据你输入的视频对该规则进行训练`)}else t=confirm("你没有选择规则哦，将创建一个全新的规则");if(t)try{const t={};if(this.selectRuleId&&(t.id=this.selectRuleId),t.trainedBvidList=[],this.useTagInput)t.trainedBvidList=this.tagObj.bvTag;else{const e=this.$getMid(this.whiteSpaceTrainUrl);if(console.log("mid="+e),!e)return void this.$message("无法解析UP主ID","error");t.mid=e}console.log(t);const e=await m.trainWhiteRule(t);e.success?this.$message("训练任务已提交","success"):this.$message(e.message||"训练失败","error")}catch(e){console.error("Failed to train white rule:",e)}},async fetchWhitelist(){console.log("fetchWhitelist");try{const t=await m.getWhiteRuleList(this.pageNo,this.pageSize);this.whitelist=t.data.list}catch(t){console.error("Failed to fetch keywords:",t)}},addTag(t,e){this.tagObj[t].push(e)},removeTag(t,e){this.tagObj[t].splice(e,1)},async dislikeUserVideo(){const t=this.$getMid(this.blackSpaceUrl);if(t)try{const e=await m.dislikeUserVideo(t,this.blackSpaceTrain);e.success&&this.$message(e.message,"success")}catch(e){console.error("Failed to  saveVideoComment",e)}else console.log(t),this.$message("mid 提取失败","error")},async thumbUpUserVideo(){const t=this.$getMid(this.whiteSpaceUrl);if(t)try{const e=await m.thumbUpUserVideo(t);e.success&&this.$message(e.message,"success")}catch(e){console.error("Failed to  saveVideoComment",e)}else console.log(t),this.$message("mid 提取失败","error")},async isWhite(){try{const t=this.$getBvid(this.isWhiteUrl);if(t){const e=await m.isWhite(t);this.whiteRes=e.data}else console.log(t),this.$message("bvid 提取失败","error")}catch(t){console.error("Failed to  fetchRegionList:",t)}},async isBlack(){try{const t=this.$getBvid(this.isBlackUrl);if(t){const e=await m.isBlack(t);this.blackRes=e.data}else this.$message("bvid 提取失败","error")}catch(t){console.error("Failed to  fetchRegionList:",t)}},async fetchRegionList(){try{const t=await m.getRegionList();this.partitions=t.data}catch(t){console.error("Failed to  fetchRegionList:",t)}},handlePartitionCheck(){},async thumbDown(){const t=this.partitions.filter((t=>t.checked));if(t.length<1)return void this.$message("请先选择分区","warning");const e=t.map((t=>t.name)).join(",");if(confirm("确定对 "+e+" 等分区进行点踩吗")){const e=t.map((t=>t.tid));try{const t=await m.disklikeByTid(e);t.success&&this.$message(t.message,"任务已开始"),this.fetchRegionList()}catch(s){console.error("Failed to  thumbDown",s)}}},async saveVideoComment(){const t=this.$getBvid(this.saveVideoCommentUrl);if(t)try{const e=await m.saveVideoComment(t);e.success&&this.$message(e.message,"任务已开始")}catch(e){console.error("Failed to  saveVideoComment",e)}else this.$message("格式错误，未提取到BV号","error"),this.saveVideoCommentUrl=""},changeScheduledTime(t){m.updateTaskEnabled(t),t.editScheduledHour=!1},getNextRunTime(t){const e=(new Date).getHours();return e<t?t-e:24+t-e},handleTaskStatusChange(t){t.isEnabled=!t.isEnabled,m.updateTaskEnabled(t)},statusClass(t){switch(t){case"RUNNING":return"bg-green-500 text-white";case"STOPPED":return"bg-blue-500 text-white";case"WAITING":return"bg-gray-500 text-white";default:return"bg-gray-500 text-white"}},async triggerTask(t){try{t.currentRunStatus="WAITING";const e=await m.triggerTask(t.classMethodName);e.success?this.$message(e.message,"success"):this.$message(e.message,"error"),await this.fetchTaskData()}catch(e){console.error("Failed to  triggerTask",e)}},createNewTask(){console.log("创建新任务",this.newTask),this.showNewTaskModal=!1,this.newTask={name:"",description:""}},async fetchTaskData(){try{const t=await m.getTaskList();t.data.forEach((t=>{t.editScheduledHour=!1})),this.tasks=t.data}catch(t){console.error("Failed to  fetchTaskData:",t)}},getStatus(t){switch(t){case"RUNNING":return"运行中";case"STOPPED":return"未启动";case"WAITING":return"排队中";default:return t}},getTaskStatus(t){const e=this.tasks.filter((e=>e.classMethodName===t));return e.length>0?e[0].currentRunStatus:"无状态"}}},q=Y,Z=(0,d.A)(q,K,S,!1,null,"54455efe",null),J=Z.exports,X=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-8 overflow-y-auto"},[e("div",{staticClass:"flex justify-between items-center mb-8"},[e("h2",{staticClass:"text-2xl font-bold"},[t._v("白名单管理")]),e("div",{staticClass:"flex items-center space-x-4"},[e("div",{staticClass:"relative"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchQuery,expression:"searchQuery"}],staticClass:"bg-gray-700 text-white px-4 py-2 rounded-full !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",attrs:{type:"text",placeholder:"搜索白名单..."},domProps:{value:t.searchQuery},on:{input:function(e){e.target.composing||(t.searchQuery=e.target.value)}}}),e("i",{staticClass:"fas fa-search absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]),e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-full !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm whitespace-nowrap",on:{click:function(e){t.showAddModal=!0}}},[e("i",{staticClass:"fas fa-plus mr-2"}),t._v("添加白名单 ")])])]),t._m(0),e("div",{staticClass:"bg-gray-800 rounded-lg overflow-hidden mb-6"},[e("table",{staticClass:"w-full whitelist-management__table"},[t._m(1),e("tbody",{staticClass:"divide-y divide-gray-700"},t._l(t.filteredWhitelist,(function(s){return e("tr",{key:s.id,staticClass:"hover:bg-gray-750"},[e("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[t._v(t._s(s.info))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.tagNameList.join(", ")))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.titleKeyWordList.join(", ")))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.coverKeyword.join(", ")))]),e("td",{staticClass:"px-6 py-4"},[t._v(t._s(s.descKeyWordList.join(", ")))]),e("td",{staticClass:"px-6 py-4 whitespace-nowrap"},[e("button",{staticClass:"text-blue-400 hover:text-blue-300 mr-3 !rounded-button whitespace-nowrap",on:{click:function(e){return t.editWhitelistItem(s)}}},[e("i",{staticClass:"fas fa-edit mr-1"}),t._v("编辑 ")]),e("button",{staticClass:"text-red-400 hover:text-red-300 !rounded-button whitespace-nowrap",on:{click:function(e){return t.deleteWhitelistItem(s)}}},[e("i",{staticClass:"fas fa-trash-alt mr-1"}),t._v("删除 ")])])])})),0)])]),e("KeywordListComponent",{ref:"WhiteMIDKeywordListComponent",attrs:{hint:"添加新关键词",title:"白名单用户id","keyword-list-prop":t.arrData,type:"WHITE,MID",desc:"当 视频 UP 主 ID 为以下 ID 时，将自动点赞",add:t.addKeyword,remove:t.removeKeyword}},[e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap mr-4",on:{click:t.urlAddMid}},[e("i",{staticClass:"fas fa-link mr-2"}),t._v("使用对方个人主页url添加 ")])]),e("KeywordListComponent",{attrs:{hint:"添加新分区 ID",title:"白名单分区 ID","keyword-list-prop":t.arrData,type:"WHITE,TID",desc:"当 视频分区 ID 为以下 ID 时，将自动点赞",add:t.addKeyword,remove:t.removeKeyword}},[e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap mr-4",on:{click:function(e){t.showTidModal=!0}}},[e("i",{staticClass:"fas fa-plus mr-2"}),t._v("从记录的分区中选择 ")])]),e("KeywordListComponent",{attrs:{hint:"添加新关键词",title:"忽略的关键词","keyword-list-prop":t.arrData,type:"WHITE,IGNORE_KEYWORD",desc:"忽略的关键词不会在训练中进入白名单规则",add:t.addKeyword,remove:t.removeKeyword}}),e("PartitionDialog",{attrs:{showTidModalProp:t.showTidModal,"dict-arr":t.arrData["WHITE,TID"],confirm:t.handleRegionConfirm},on:{"update:showTidModalProp":function(e){t.showTidModal=e},"update:show-tid-modal-prop":function(e){t.showTidModal=e}}}),t.showAddModal||t.showEditModal?e("div",{staticClass:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[e("div",{staticClass:"bg-gray-800 p-8 rounded-lg w-2/3 max-h-[90vh] overflow-y-auto"},[e("h3",{staticClass:"text-xl font-bold mb-4"},[t._v(t._s(t.showAddModal?"添加白名单":"编辑白名单"))]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:"ruleName"}},[t._v("规则名称")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.currentItem.info,expression:"currentItem.info"}],staticClass:"w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{type:"text",id:"ruleName"},domProps:{value:t.currentItem.info},on:{input:function(e){e.target.composing||t.$set(t.currentItem,"info",e.target.value)}}})]),e("TagInput",{attrs:{label:"标签关键词",tags:t.currentItem,type:"tagNameList","on-add":t.addTag,"on-remove":t.removeTag}}),e("TagInput",{attrs:{label:"标题关键词",tags:t.currentItem,type:"titleKeyWordList","on-add":t.addTag,"on-remove":t.removeTag}}),e("TagInput",{attrs:{label:"视频描述关键词",tags:t.currentItem,type:"descKeyWordList","on-add":t.addTag,"on-remove":t.removeTag}}),e("TagInput",{attrs:{label:"封面关键词(开发中)",tags:t.currentItem,type:"coverKeyword","on-add":t.addTag,"on-remove":t.removeTag}}),e("div",{staticClass:"flex justify-end space-x-4"},[e("button",{staticClass:"px-4 py-2 bg-gray-600 text-white rounded-md !rounded-button hover:bg-gray-500 whitespace-nowrap",on:{click:t.closeModal}},[t._v(" 取消 ")]),e("button",{staticClass:"px-4 py-2 bg-blue-500 text-white rounded-md !rounded-button hover:bg-blue-600 whitespace-nowrap",on:{click:t.saveWhitelistItem}},[t._v(" "+t._s(t.showAddModal?"添加":"保存")+" ")])])],1)]):t._e()],1)},tt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-blue-600 text-white p-4 rounded-lg mb-6"},[e("i",{staticClass:"fas fa-info-circle mr-2"}),t._v(" 白名单规则用于自动通过符合条件的内容。请谨慎设置以确保内容质量。 ")])},function(){var t=this,e=t._self._c;return e("thead",[e("tr",{staticClass:"bg-gray-700"},[e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("规则名称")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("标签关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("标题关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("封面关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("描述关键词")]),e("th",{staticClass:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider"},[t._v("操作")])])])}],et=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-8"},[e("div",{staticClass:"flex justify-between items-center mb-4"},[e("h3",{staticClass:"text-xl font-bold"},[t._v(t._s(t.title))])]),t.desc?e("div",{staticClass:"flex justify-between items-center mb-4"},[e("p",{staticClass:"text-gray-400"},[t._v(" "+t._s(t.desc)+" ")])]):t._e(),e("div",{staticClass:"bg-gray-800 rounded-lg p-4"},[e("div",{staticClass:"flex mb-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.newKeyword,expression:"newKeyword"}],staticClass:"flex-grow mr-4 bg-gray-700 text-white px-4 py-2 rounded-l-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{placeholder:t.hint+",   输入后可以搜索哦"},domProps:{value:t.newKeyword},on:{input:function(e){e.target.composing||(t.newKeyword=e.target.value)}}}),t._t("default"),e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap",on:{click:t.addKeyword}},[e("i",{staticClass:"fas fa-plus mr-2"}),t._v("添加 ")])],2),e("div",{staticClass:"flex flex-wrap",staticStyle:{"max-height":"200px",overflow:"auto"}},t._l(t.keywordListFilter,(function(s){return e("div",{key:s.id,staticClass:"bg-gray-700 text-white px-3 py-1 rounded-full !rounded-button mr-2 mb-2 flex items-center"},[e("div",{staticClass:"flex flex-col"},[e("span",[t._v(t._s(s.value))]),e("span",{staticClass:"text-gray-400 text-sm"},[t._v(t._s(s.desc))])]),e("button",{staticClass:"ml-2 text-red-400 hover:text-red-300 focus:outline-none",on:{click:function(e){return t.removeKeyword(s)}}},[e("i",{staticClass:"fas fa-times"})])])})),0)])])},st=[],at=(s(2577),{name:"keyword-list-component",data(){return{newKeyword:"",newDesc:"",keywordList:[],accessType:"",dictType:""}},computed:{keywordListFilter(){return this.newKeyword?this.keywordList.filter((t=>t.value.includes(this.newKeyword)||null!=t.desc&&t.desc.includes(this.newKeyword))):this.keywordList}},mounted(){this.splitType(),this.keywordList=this.keywordListProp[this.type]||[]},props:{keywordListProp:Object,title:String,hint:String,onSubmit:Function,type:String,desc:String,add:Function,remove:Function},methods:{getNewKeyWord(){return this.newKeyword},setNewKeyWord(t){this.newKeyword=t},setNewDesc(t){this.newDesc=t},addKeyword(){if(this.newKeyword&&!this.keywordList.find((t=>t.value===this.newKeyword))){let t={value:this.newKeyword,desc:this.newDesc,dictType:this.dictType,accessType:this.accessType};this.keywordList.push(t),this.newKeyword="",this.newDesc="",this.$message("添加成功","success"),this.add(this.accessType,this.dictType,t)}else this.$message("关键词已存在","warning")},removeKeyword(t){this.keywordList=this.keywordList.filter((e=>e!==t)),this.remove(this.accessType,this.dictType,t)},submit(){this.onSubmit(this.type,this.keywordList)},splitType(){let[t,e]=this.type.split(",");this.accessType=t,this.dictType=e}},watch:{keywordListProp:{deep:!0,handler(){this.keywordList=this.keywordListProp[this.type]||[]}},type(){this.splitType()}}}),it=at,ot=(0,d.A)(it,et,st,!1,null,"1aa6962d",null),rt=ot.exports,lt=function(){var t=this,e=t._self._c;return e("Dialog",{attrs:{visible:t.showTidModal,title:"分区选择","on-close":t.handleRegionConfirm},on:{"update:visible":function(e){t.showTidModal=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",on:{click:t.handleRegionConfirm}},[t._v(" 确认 ")])]},proxy:!0}])},[e("RegionComponent",{attrs:{partitions:t.partitions,"handle-partition":t.handlePartition}})],1)},nt=[],ct=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"dialog-fade"}},[t.visible?e("div",{staticClass:"dialog-overlay",on:{click:function(e){return e.target!==e.currentTarget?null:t.close.apply(null,arguments)}}},[e("div",{staticClass:"dialog"},[e("div",{staticClass:"dialog-header"},[e("span",{staticClass:"dialog-title"},[t._v(t._s(t.title))]),e("button",{staticClass:"dialog-close",on:{click:t.close}},[t._v("×")])]),e("div",{staticClass:"dialog-body"},[t._t("default")],2),e("div",{staticClass:"dialog-footer"},[t._t("footer"),e("button",{staticClass:"ml-4",on:{click:t.close}},[t._v("关闭")])],2)])]):t._e()])},dt=[],ut={name:"dialog-component",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},onClose:Function},mounted(){console.log("Dialog",this.visible)},watch:{visible(t){console.log("DIALOG","visible change",t)}},methods:{close(){this.$emit("update:visible",!1),this.onClose&&this.onClose()}}},ht=ut,pt=(0,d.A)(ht,ct,dt,!1,null,null,null),gt=pt.exports,ft={name:"partition-dialog",data(){return{partitions:[{tid:1,code:"douga",name:"动画(主分区)",desc:"",router:"/v/douga",pid:null}],searchQuery:"",selectedPartitions:[],showTidModal:!1,change:!1}},computed:{filteredPartitions(){return this.partitions.filter((t=>t.name.includes(this.searchQuery)))}},components:{RegionComponent:H,Dialog:gt},props:{showTidModalProp:Boolean,dictArr:Array,confirm:Function},watch:{showTidModalProp(t){console.log("showTidModalProp change",t),this.showTidModal=t,!0===this.showTidModal&&this.handleRegionSelect()},showTidModal(t){console.log("showTidModal change",t),this.$emit("update:showTidModalProp",t)}},mounted(){this.showTidModal=this.showTidModalProp,console.log("showTidModalProp",this.showTidModalProp),!0===this.showTidModal&&this.handleRegionSelect()},methods:{handlePartition(){this.change=!0},handleRegionConfirm(){if(this.showTidModal=!1,this.searchQuery="",this.change){const t=this.partitions.filter((t=>t.checked)).map((t=>({value:t.tid,desc:t.name})));console.log("最终选择的分区列表",t),this.confirm(t)}else console.log("未发生改变")},async handleRegionSelect(){await this.fetchRegionList();const t=this.partitions.map((t=>t.tid+"")),e=this.dictArr.filter((e=>!t.includes(e.value)));e.length>0&&e.forEach((t=>{this.partitions.push({tid:t.value+"",name:t.desc})}));let s=this.dictArr.map((t=>t.value));this.partitions=this.partitions.map((t=>(t.checked=s.includes(t.tid+""),t)))},async fetchRegionList(){try{const t=await m.getRegionList();this.partitions=t.data}catch(t){console.error("Failed to  fetchRegionList:",t)}}}},mt=ft,vt=(0,d.A)(mt,lt,nt,!1,null,"8dfbd58e",null),yt=vt.exports,bt={name:"white-list-view",components:{PartitionDialog:yt,KeywordListComponent:rt,TagInput:Q},data(){return{searchQuery:"",showAddModal:!1,showEditModal:!1,pageNo:1,pageSize:999,currentItem:{info:"",tagNameList:[],titleKeyWordList:[],coverKeyword:[],descKeyWordList:[]},arrData:{"WHITE,IGNORE_KEYWORD":[],"WHITE,MID":[],"WHITE,TID":[]},whitelist:[],showTidModal:!1}},computed:{filteredWhitelist(){const t=this.searchQuery.toLowerCase();return console.log(this.whitelist),this.whitelist.filter((e=>{try{return e.info&&e.info.toLowerCase().includes(t)||e.tagNameList&&e.tagNameList.some((e=>e.toLowerCase().includes(t)))||e.titleKeyWordList&&e.titleKeyWordList.some((e=>e.toLowerCase().includes(t)))||e.coverKeyword&&e.coverKeyword.some((e=>e.toLowerCase().includes(t)))||e.descKeyWordList&&e.descKeyWordList.some((e=>e.toLowerCase().includes(t)))}catch(s){console.log(s)}}))}},mounted(){this.fetchWhitelist();for(let t in this.arrData)this.fetchData(t)},methods:{urlAddMid(){let t=this.$refs.WhiteMIDKeywordListComponent.getNewKeyWord(),e=this.$getMid(t);e?(this.$refs.WhiteMIDKeywordListComponent.setNewKeyWord(e),m.getUserNameByMid(e).then((t=>{this.$refs.WhiteMIDKeywordListComponent.setNewDesc(t.data),this.$refs.WhiteMIDKeywordListComponent.addKeyword()})).catch((t=>{console.error("Failed to fetch user name:",t)}))):alert("请输入正确的url,如:https://space.bilibili.com/123456")},async handleRegionConfirm(t){this.showTidModal=!1;try{const e=await m.batchRemoveAndUpdate("WHITE","TID",t);e.success?(this.$message(e.message,"success"),this.fetchData("WHITE,TID")):this.$message(e.message,"error")}catch(e){console.error("Failed to  addKeyword",e)}},async fetchWhitelist(){try{const t=await m.getWhiteRuleList(this.pageNo,this.pageSize);this.whitelist=t.data.list}catch(t){console.error("Failed to fetch keywords:",t)}},async fetchData(t){try{const[e,s]=t.split(","),a=await m.getDictList(e,s);this.arrData[t]=a.data.list}catch(e){console.error("Failed to fetch keywords:",e)}},async addKeyword(t,e,s){try{const t=await m.addDict(s);t.success||this.$message(t.message,"error")}catch(a){console.error("Failed to  addKeyword",a)}},async removeKeyword(t,e,s){try{const t=await m.delDictById(s.id);t.success||this.$message(t.message,"error")}catch(a){console.error("Failed to  addKeyword",a)}},editWhitelistItem(t){this.currentItem={...t},this.showEditModal=!0},async deleteWhitelistItem(t){if(confirm(`确定要删除名为"${t.info}"的白名单规则吗？`)){const e=await m.delWhiteRuleById(t.id);e.success?(this.$message("删除成功","success"),this.whitelist=this.whitelist.filter((e=>e.id!==t.id))):this.$message("删除失败","error")}},addTag(t,e){this.currentItem[t].push(e)},removeTag(t,e){this.currentItem[t].splice(e,1)},closeModal(){this.showAddModal=!1,this.showEditModal=!1},resetForm(){this.currentItem={info:"",tagNameList:[],titleKeyWordList:[],coverKeyword:[],descKeyWordList:[]}},async saveWhitelistItem(){const t={...this.currentItem};for(const[s,a]of Object.entries(t))Array.isArray(a)&&(t[s]=a.filter((t=>""!==t)));const e=await m.addOrUpdateWhiteRule(t);if(e.success){if(this.$message("保存成功","success"),this.showAddModal)t.id=this.whitelist.length+1,this.whitelist.push(t);else{const e=this.whitelist.findIndex((t=>t.id===this.currentItem.id));-1!==e&&(this.whitelist[e]=t,this.$set(this.whitelist,e,t))}this.closeModal(),this.fetchWhitelist()}else this.$message("保存失败","error")}}},wt=bt,Ct=(0,d.A)(wt,X,tt,!1,null,"2721c5ce",null),xt=Ct.exports,kt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-8 overflow-y-auto"},[e("h2",{staticClass:"text-2xl font-bold mb-8"},[t._v("黑名单管理")]),t._m(0),e("KeywordListComponent",{attrs:{hint:"添加新关键词",title:"黑名单关键词","keyword-list-prop":t.arrData,"on-submit":t.submitKeyword,type:"BLACK,KEYWORD",desc:"当 视频标题 或 视频简介 中包含以下关键词时，将自动点踩",add:t.addKeyword,remove:t.removeKeyword}}),e("KeywordListComponent",{attrs:{hint:"添加新分区 ID",title:"黑名单分区 ID","keyword-list-prop":t.arrData,"on-submit":t.submitKeyword,type:"BLACK,TID",desc:"当 视频分区 ID 为以下 ID 时，将自动点踩",add:t.addKeyword,remove:t.removeKeyword}},[e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap mr-4",on:{click:function(e){t.showTidModal=!0}}},[e("i",{staticClass:"fas fa-plus mr-2"}),t._v("从记录的分区中选择 ")])]),e("KeywordListComponent",{ref:"BLACKMIDKeywordListComponent",attrs:{hint:"添加新 UP 主 ID",title:"黑名单 UP 主 ID","keyword-list-prop":t.arrData,"on-submit":t.submitKeyword,type:"BLACK,MID",desc:"当 视频 UP 主 ID 为以下 ID 时，将自动点踩",add:t.addKeyword,remove:t.removeKeyword}},[e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-r-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap mr-4",on:{click:t.urlAddMid}},[e("i",{staticClass:"fas fa-link mr-2"}),t._v("使用对方个人主页url添加 ")])]),e("KeywordListComponent",{attrs:{hint:"添加新标签 ",title:"黑名单标签","keyword-list-prop":t.arrData,"on-submit":t.submitKeyword,type:"BLACK,TAG",desc:"当 视频标签 中包含以下任意标签时，将自动点踩",add:t.addKeyword,remove:t.removeKeyword}}),e("KeywordListComponent",{attrs:{hint:"添加关键词 ",title:"忽略的黑名单关键词","keyword-list-prop":t.arrData,"on-submit":t.submitKeyword,type:"BLACK,IGNORE_KEYWORD",desc:"即你认为这些关键词是通用的,不应当作为黑名单判断的依据,以下关键词不会进入关键词筛选(不会自动加入黑名单)",add:t.addKeyword,remove:t.removeKeyword}}),e("KeywordListComponent",{attrs:{hint:"添加新标签 ",title:"忽略的黑名单标签","keyword-list-prop":t.arrData,"on-submit":t.submitKeyword,type:"BLACK,IGNORE_TAG",desc:"即你认为这些标签是通用的,不应当作为黑名单判断的依据,以下标签不会进入标签筛选(不会自动加入黑名单)",add:t.addKeyword,remove:t.removeKeyword}}),e("Select",{attrs:{"available-keywords-prop":t.arrData,type:"BLACK_CACHE,KEYWORD","submit-keyword-selection":t.submitKeywordSelection,title:"关键词筛选",desc:"\n          以下是根据你之前点踩的视频生成的黑名单关键词，请选择保留或抛弃.\n          如果你选择采纳,它会出现在上方的[黑名单关键词]中,\n          如果你选择抛弃,它会出现在上方的[忽略的关键词]中\n          选择的结果会在下次任务中生效.\n          "}}),e("Select",{attrs:{"available-keywords-prop":t.arrData,type:"BLACK_CACHE,TAG","submit-keyword-selection":t.submitKeywordSelection,title:"标签筛选",desc:"以下是根据你之前点踩的视频生成的黑名单标签，请选择保留或抛弃;\n          如果你选择采纳,它会出现在上方的[黑名单标签]中,\n          如果你选择抛弃,它会出现在上方的[忽略的黑名单标签]中\n          选择的结果会在下次任务中生效"}}),e("PartitionDialog",{attrs:{showTidModalProp:t.showTidModal,"dict-arr":t.arrData["BLACK,TID"],confirm:t.handleRegionConfirm},on:{"update:showTidModalProp":function(e){t.showTidModal=e},"update:show-tid-modal-prop":function(e){t.showTidModal=e}}})],1)},_t=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg-red-600 text-white p-4 rounded-lg mb-6"},[e("i",{staticClass:"fas fa-exclamation-triangle mr-2"}),t._v(" 黑名单规则用于自动点踩符合条件的内容。请谨慎设置以避免误判。 ")])}],Tt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mb-8"},[e("h3",{staticClass:"text-xl font-bold mb-4"},[t._v(t._s(t.title))]),e("div",{staticClass:"flex justify-between items-center mb-4"},[e("p",{staticClass:"text-gray-400"},[t._v(" "+t._s(t.desc)+" ")]),e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",on:{click:t.submit}},[t._v(" 提交选择 ")])]),e("div",{staticClass:"keyword-lists keyword-selection bg-gray-800 rounded-lg p-4"},[e("div",{staticClass:"keyword-list selected-keywords"},[e("h3",[t._v("采纳")]),e("ul",t._l(t.selectedKeywords,(function(s){return e("li",{key:s.id},[t._v(" "+t._s(s.value)+" "),e("div",{staticClass:"buttons"},[e("button",{on:{click:function(e){return t.moveToAvailable(s)}}},[e("i",{staticClass:"fas fa-arrow-right"})])])])})),0)]),e("div",{staticClass:"keyword-list available-keywords"},[e("div",{staticStyle:{display:"flex","flex-direction":"row","justify-content":"space-around","align-items":"center","align-content":"center","text-align":"center"}},[e("button",{on:{click:t.selectAll}},[e("i",{staticClass:"fas fa-arrow-left"}),t._v(" 全部采纳 ")]),e("h3",{staticClass:"pt-3"},[t._v("可选的关键词")]),e("button",{on:{click:t.discardAll}},[t._v(" 全不采纳 "),e("i",{staticClass:"fas fa-arrow-right"})])]),t.availableKeywords.length>0?e("ul",{staticClass:"mt-4"},t._l(t.availableKeywords,(function(s){return e("li",{key:s.id},[e("div",{staticClass:"buttons"},[e("button",{on:{click:function(e){return t.moveToSelected(s)}}},[e("i",{staticClass:"fas fa-arrow-left"})])]),e("span",[t._v(t._s(s.value))]),e("div",{staticClass:"buttons"},[e("button",{on:{click:function(e){return t.moveToDiscarded(s)}}},[e("i",{staticClass:"fas fa-arrow-right"})])])])})),0):e("div",{staticClass:"text-center mt-4"},[t._v(" 看起来暂时没有需要你确认的关键词~ ")])]),e("div",{staticClass:"keyword-list discarded-keywords"},[e("h3",[t._v("不采纳")]),e("ul",t._l(t.discardedKeywords,(function(s){return e("li",{key:s.id},[t._v(" "+t._s(s.value)+" "),e("div",{staticClass:"buttons"},[e("button",{on:{click:function(e){return t.moveToAvailable(s)}}},[e("i",{staticClass:"fas fa-arrow-left"})])])])})),0)])])])},Rt=[],Lt={name:"select-component",props:{availableKeywordsProp:Object,title:String,desc:String,submitKeywordSelection:Function,type:String},data(){return{selectedKeywords:[],availableKeywords:[],discardedKeywords:[]}},mounted(){this.availableKeywords=this.availableKeywordsProp[this.type]},watch:{availableKeywordsProp:{deep:!0,handler(){this.availableKeywords=this.availableKeywordsProp[this.type]}}},computed:{},methods:{moveToSelected(t){this.availableKeywords=this.availableKeywords.filter((e=>e!==t)),this.discardedKeywords=this.discardedKeywords.filter((e=>e!==t)),this.selectedKeywords.push(t)},moveToAvailable(t){this.selectedKeywords=this.selectedKeywords.filter((e=>e!==t)),this.discardedKeywords=this.discardedKeywords.filter((e=>e!==t)),this.availableKeywords.push(t)},moveToDiscarded(t){this.selectedKeywords=this.selectedKeywords.filter((e=>e!==t)),this.availableKeywords=this.availableKeywords.filter((e=>e!==t)),this.discardedKeywords.push(t)},submit(){this.submitKeywordSelection(this.type,this.selectedKeywords,this.discardedKeywords),this.selectedKeywords=[],this.discardedKeywords=[]},selectAll(){this.selectedKeywords=this.selectedKeywords.concat(this.availableKeywords),this.availableKeywords=[]},discardAll(){this.discardedKeywords=this.discardedKeywords.concat(this.availableKeywords),this.availableKeywords=[]}}},Pt=Lt,Kt=(0,d.A)(Pt,Tt,Rt,!1,null,"3cad70ac",null),St=Kt.exports,It={name:"black-list-view",components:{PartitionDialog:yt,KeywordListComponent:rt,Select:St},data(){return{newKeyword:"",newSectionId:"",newUploaderId:"",arrData:{"BLACK,KEYWORD":[],"BLACK,TAG":[],"BLACK,TID":[],"BLACK,MID":[],"BLACK,IGNORE_TAG":[],"BLACK,IGNORE_KEYWORD":[],"BLACK_CACHE,KEYWORD":[],"BLACK_CACHE,TAG":[]},showTidModal:!1}},mounted(){for(let t in this.arrData)this.fetchData(t)},computed:{},methods:{async handleRegionConfirm(t){this.showTidModal=!1;try{const e=await m.batchRemoveAndUpdate("BLACK","TID",t);e.success?(this.$message(e.message,"success"),this.fetchData("BLACK,TID")):this.$message(e.message,"error")}catch(e){console.error("Failed to  addKeyword",e)}},urlAddMid(){let t=this.$refs.BLACKMIDKeywordListComponent.getNewKeyWord(),e=this.$getMid(t);e?(this.$refs.BLACKMIDKeywordListComponent.setNewKeyWord(e),m.getUserNameByMid(e).then((t=>{this.$refs.BLACKMIDKeywordListComponent.setNewDesc(t.data),this.$refs.BLACKMIDKeywordListComponent.addKeyword()})).catch((t=>{console.error("Failed to fetch user name:",t)}))):alert("请输入正确的url,如:https://space.bilibili.com/123456")},submitKeyword(t,e){console.log(t,e)},async fetchData(t){try{const[e,s]=t.split(","),a=await m.getDictList(e,s);this.arrData[t]=a.data.list}catch(e){console.error("Failed to fetch keywords:",e)}},async submitKeywordSelection(t,e,s){try{const a=t.split(",")[1];await m.submitSelectTrainResult(a,{selectedId:e.map((t=>t.id)),discardedId:s.map((t=>t.id))})}catch(a){console.error("Failed to fetch keywords:",a)}},async addKeyword(t,e,s){s.accessType=t,s.dictType=e;try{const t=await m.addDict(s);t.success||this.$message(t.message,"error")}catch(a){console.error("Failed to  addKeyword",a)}},async removeKeyword(t,e,s){try{const t=await m.delDictById(s.id);t.success||this.$message(t.message,"error")}catch(a){console.error("Failed to  addKeyword",a)}}}},At=It,Dt=(0,d.A)(At,kt,_t,!1,null,"024a06d9",null),Ut=Dt.exports,Mt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-8 overflow-y-auto"},[e("div",{staticClass:"relative flex flex-col items-center mb-8"},[e("img",{staticClass:"w-20 h-20 rounded-full mb-4",attrs:{src:t.userAvatar,alt:"User Avatar"}}),e("h2",{staticClass:"text-2xl font-bold mb-2"},[t._v(t._s(t.userName))]),e("div",{staticClass:"flex items-center mb-2"},[e("span",{staticClass:"text-red-500 font-bold"},[t._v("lv"+t._s(t.userLevel))])]),e("div",{staticClass:"flex items-center"},[e("span",{staticClass:"mr-4"},[t._v("硬币数: "+t._s(t.userCoins))])]),e("button",{staticClass:"absolute top-0 right-0 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap",on:{click:t.relogin}},[t._v(" 重新登录 ")]),e("button",{staticClass:"absolute top-0 left-0 bg-gray-300 hover:bg-gray-400 text-black p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-gray-500",class:{"animate-spin":t.isFetching},on:{click:t.fetchUserData}},[e("svg",{staticClass:"h-6 w-6",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"}},[e("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v6h6M20 20v-6h-6M4 20l16-16"}})])])]),e("div",{staticClass:"config-module flex justify-between items-center mb-8 p-4"},[e("span",{staticClass:"text-2xl font-bold"},[t._v("配置模块")]),e("button",{staticClass:"text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-green-500",class:{"bg-green-500 hover:bg-green-600":t.sysConfigUpdate,"bg-gray-400 cursor-not-allowed":!t.sysConfigUpdate},attrs:{disabled:!t.sysConfigUpdate},on:{click:t.updateConfigData}},[t._v(" 提交配置修改 ")])]),e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},t._l(t.systemConfigs,(function(s,a){return e("div",{key:a,staticClass:"bg-gray-800 p-4 rounded-lg"},[e("h3",{staticClass:"text-lg font-semibold mb-2"},[t._v(t._s(s.name))]),e("div",{staticClass:"flex items-center justify-between"},["switch"===s.type?e("div",{staticClass:"relative inline-block w-10 mr-2 align-middle select-none transition duration-200 ease-in"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"config.value"}],staticClass:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer",attrs:{type:"checkbox",id:"toggle-"+a},domProps:{checked:Array.isArray(s.value)?t._i(s.value,null)>-1:s.value},on:{click:function(e){t.sysConfigUpdate=!0},change:function(e){var a=s.value,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=null,l=t._i(a,r);i.checked?l<0&&t.$set(s,"value",a.concat([r])):l>-1&&t.$set(s,"value",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(s,"value",o)}}}),e("label",{staticClass:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer",attrs:{for:"toggle-"+a}})]):"text"===s.type?e("div",{staticClass:"flex items-center"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"config.value"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2",attrs:{id:"input-"+a,disabled:!s.editable},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap",on:{click:function(e){return t.toggleEdit(a)}}},[t._v(" "+t._s(s.editable?"保存":"编辑")+" ")])]):"textpassword"===s.type?e("div",{staticClass:"flex items-center"},["checkbox"===(s.editable?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"config.value"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2",attrs:{id:"input-"+a,disabled:!s.editable,type:"checkbox"},domProps:{checked:Array.isArray(s.value)?t._i(s.value,null)>-1:s.value},on:{change:function(e){var a=s.value,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=null,l=t._i(a,r);i.checked?l<0&&t.$set(s,"value",a.concat([r])):l>-1&&t.$set(s,"value",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(s,"value",o)}}}):"radio"===(s.editable?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"config.value"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2",attrs:{id:"input-"+a,disabled:!s.editable,type:"radio"},domProps:{checked:t._q(s.value,null)},on:{change:function(e){return t.$set(s,"value",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"config.value"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 mr-2",attrs:{id:"input-"+a,disabled:!s.editable,type:s.editable?"text":"password"},domProps:{value:s.value},on:{input:function(e){e.target.composing||t.$set(s,"value",e.target.value)}}}),e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-nowrap",on:{click:function(e){return t.toggleEdit(a)}}},[t._v(" "+t._s(s.editable?"保存":"编辑")+" ")])]):"select"===s.type?e("select",{directives:[{name:"model",rawName:"v-model",value:s.value,expression:"config.value"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"value",e.target.multiple?a:a[0])},function(e){t.sysConfigUpdate=!0}]}},t._l(s.options,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0):t._e()])])})),0),e("div",{staticClass:"flex justify-between mb-4"},[e("span",{staticClass:"text-2xl font-bold"},[t._v("Cookie 和 请求头 列表")]),e("button",{staticClass:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",on:{click:function(e){t.showAddCookieModal=!0}}},[t._v(" 新增Cookie ")])]),e("table",{staticClass:"min-w-full bg-gray-800 rounded-lg"},[t._m(0),e("tbody",t._l(t.cookieList,(function(s,a){return e("tr",{key:s.id,staticClass:"border-t border-gray-700"},[e("td",{staticClass:"px-2 py-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.url,expression:"cookie.url"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable},domProps:{value:s.url},on:{input:function(e){e.target.composing||t.$set(s,"url",e.target.value)}}})]),e("td",{staticClass:"px-4 py-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.ckey,expression:"cookie.ckey"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable},domProps:{value:s.ckey},on:{input:function(e){e.target.composing||t.$set(s,"ckey",e.target.value)}}})]),e("td",{staticClass:"px-4 py-2"},["checkbox"===(s.editable?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.cvalue,expression:"cookie.cvalue"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable,type:"checkbox"},domProps:{checked:Array.isArray(s.cvalue)?t._i(s.cvalue,null)>-1:s.cvalue},on:{change:function(e){var a=s.cvalue,i=e.target,o=!!i.checked;if(Array.isArray(a)){var r=null,l=t._i(a,r);i.checked?l<0&&t.$set(s,"cvalue",a.concat([r])):l>-1&&t.$set(s,"cvalue",a.slice(0,l).concat(a.slice(l+1)))}else t.$set(s,"cvalue",o)}}}):"radio"===(s.editable?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:s.cvalue,expression:"cookie.cvalue"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable,type:"radio"},domProps:{checked:t._q(s.cvalue,null)},on:{change:function(e){return t.$set(s,"cvalue",null)}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:s.cvalue,expression:"cookie.cvalue"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable,type:s.editable?"text":"password"},domProps:{value:s.cvalue},on:{input:function(e){e.target.composing||t.$set(s,"cvalue",e.target.value)}}})]),e("td",{staticClass:"px-4 py-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:s.classify,expression:"cookie.classify"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"classify",e.target.multiple?a:a[0])}}},t._l(t.classifyOptions,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)]),e("td",{staticClass:"px-4 py-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:s.mediaType,expression:"cookie.mediaType"}],staticClass:"bg-gray-700 text-white px-2 py-1 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500 w-full",attrs:{disabled:!s.editable},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(s,"mediaType",e.target.multiple?a:a[0])}}},t._l(t.mediaTypeOptions,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)]),e("td",{staticClass:"px-4 py-2 flex space-x-2"},[e("button",{staticClass:"text-xs bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",on:{click:function(e){return t.toggleCookieEdit(a)}}},[t._v(" "+t._s(s.editable?"保存":"编辑")+" ")]),e("button",{staticClass:"text-xs bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-red-500",on:{click:function(e){return t.deleteCookie(a)}}},[t._v(" 删除 ")])])])})),0)]),e("div",{staticClass:"flex justify-between items-center mt-4"},[e("button",{staticClass:"bg-gray-700 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{disabled:1===t.currentPage},on:{click:t.prevPage}},[t._v(" 上一页 ")]),e("span",[t._v("第 "+t._s(t.currentPage)+" 页，共 "+t._s(t.totalPages)+" 页")]),e("button",{staticClass:"bg-gray-700 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{disabled:t.currentPage===t.totalPages},on:{click:t.nextPage}},[t._v(" 下一页 ")])]),t.showAddCookieModal?e("div",{staticClass:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},[e("div",{staticClass:"bg-gray-800 p-8 rounded-lg w-1/2"},[e("h3",{staticClass:"text-xl font-bold mb-4"},[t._v("新增Cookie")]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:"newCookieUrl"}},[t._v("URL")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newCookie.url,expression:"newCookie.url"}],staticClass:"w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{type:"text",id:"newCookieUrl"},domProps:{value:t.newCookie.url},on:{input:function(e){e.target.composing||t.$set(t.newCookie,"url",e.target.value)}}})]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:"newCookieKey"}},[t._v("Key")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newCookie.ckey,expression:"newCookie.ckey"}],staticClass:"w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{type:"text",id:"newCookieKey"},domProps:{value:t.newCookie.ckey},on:{input:function(e){e.target.composing||t.$set(t.newCookie,"ckey",e.target.value)}}})]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:"newCookieValue"}},[t._v("Value")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.newCookie.cvalue,expression:"newCookie.cvalue"}],staticClass:"w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{type:"text",id:"newCookieValue"},domProps:{value:t.newCookie.cvalue},on:{input:function(e){e.target.composing||t.$set(t.newCookie,"cvalue",e.target.value)}}})]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:"newCookieClassify"}},[t._v("分类")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newCookie.classify,expression:"newCookie.classify"}],staticClass:"w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{id:"newCookieClassify"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newCookie,"classify",e.target.multiple?s:s[0])}}},t._l(t.classifyOptions,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)]),e("div",{staticClass:"mb-4"},[e("label",{staticClass:"block text-sm font-medium mb-2",attrs:{for:"newCookieMediaType"}},[t._v("用途")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.newCookie.mediaType,expression:"newCookie.mediaType"}],staticClass:"w-full bg-gray-700 text-white px-3 py-2 rounded-md !rounded-button focus:outline-none focus:ring-2 focus:ring-blue-500",attrs:{id:"newCookieMediaType"},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newCookie,"mediaType",e.target.multiple?s:s[0])}}},t._l(t.mediaTypeOptions,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)]),e("div",{staticClass:"flex justify-end space-x-4"},[e("button",{staticClass:"px-4 py-2 bg-gray-600 text-white rounded-md !rounded-button hover:bg-gray-500 whitespace-nowrap",on:{click:function(e){t.showAddCookieModal=!1}}},[t._v(" 取消 ")]),e("button",{staticClass:"px-4 py-2 bg-blue-500 text-white rounded-md !rounded-button hover:bg-blue-600 whitespace-nowrap",on:{click:t.addCookie}},[t._v(" 添加 ")])])])]):t._e(),t.showModal?e("div",{staticClass:"fixed inset-0 flex items-center justify-center z-50"},[e("div",{staticClass:"fixed inset-0 bg-black opacity-50"}),e("div",{staticClass:"bg-white p-8 rounded-lg shadow-lg z-10",staticStyle:{display:"flex","flex-direction":"column","align-items":"center"}},[e("h2",{staticClass:"text-xl font-bold mb-4 text-center",staticStyle:{color:"#000"}},[t._v("请使用哔哩哔哩客户端扫码登陆")]),e("img",{staticClass:"w-64 h-64 mb-4",attrs:{src:t.qrCodeDataUrl,alt:"QR Code"}}),e("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"row","align-items":"stretch"}},[e("button",{staticClass:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-green-500",staticStyle:{flex:"1"},on:{click:t.checkScanResult}},[t._v(" 我已扫码 ")]),e("button",{staticClass:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded !rounded-button focus:outline-none focus:ring-2 focus:ring-red-500",staticStyle:{flex:"1","margin-left":"10px"},on:{click:function(e){t.showModal=!1}}},[t._v(" 关闭 ")])])])]):t._e()])},$t=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{staticClass:"px-2 py-2 w-1/6"},[t._v("URL(空表示通用)")]),e("th",{staticClass:"px-4 py-2"},[t._v("Key")]),e("th",{staticClass:"px-4 py-2"},[t._v("Value")]),e("th",{staticClass:"px-4 py-2"},[t._v("分类")]),e("th",{staticClass:"px-4 py-2"},[t._v("用途")]),e("th",{staticClass:"px-4 py-2"},[t._v("操作")])])])}],Et=s(8420),Nt={name:"setting-view",data(){return{userAvatar:"",userName:"",userLevel:0,userCoins:0,showModal:!1,qrCodeUrl:"https://account.bilibili.com/h5/account-h5/auth/scan-web?navhide=1&callback=close&qrcode_key=c60e9ca645691ccd0e974d55d43092ac&from=",qrCodeDataUrl:"",isFetching:!1,systemConfigs:[{id:null,name:"最短播放时长",key:"minPlaySecond",value:"50",type:"text",description:"对视频点赞时模拟播放的最短时长",editable:!1},{id:null,name:"百度ack",key:"baidu_accesskey",value:"",type:"textpassword",description:"百度图像识别的密钥",editable:!1},{id:null,name:"百度client_id",key:"baidu_client_id",value:"",type:"textpassword",description:"百度图像识别的client_id",editable:!1},{id:null,name:"百度client_secret",key:"baidu_client_secret",value:"",type:"textpassword",description:"百度图像识别的client_secret",editable:!1},{id:null,name:"哔哩哔哩ack",key:"bili:access_key",value:"",type:"textpassword",description:"哔哩哔哩登陆后的认证，登陆成功后存在",editable:!1}],showAddCookieModal:!1,newCookie:{url:null,ckey:"",cvalue:"",classify:"",mediaType:""},cookieList:[{id:"1",url:"https://example.com",ckey:"session_id",cvalue:"abc123",classify:"COOKIE",mediaType:"GENERAL",editable:!1},{id:"2",url:"https://example.com",ckey:"auth_token",cvalue:"xyz789",classify:"REQUEST_HEADER",mediaType:"URL_MATCHING",editable:!1},{id:"3",url:"https://example.com",ckey:"user_pref",cvalue:"dark_mode",classify:"RESPONSE_HEADER",mediaType:"TIMELY_UPDATE",editable:!1}],classifyOptions:["COOKIE","REQUEST_HEADER","RESPONSE_HEADER"],mediaTypeOptions:["GENERAL","URL_MATCHING","TIMELY_UPDATE"],currentPage:1,totalPages:1,pageSize:5,sysConfigUpdate:!1}},methods:{async relogin(){console.log("重新登录");const t=await m.getTvQrCode();t.success&&2e4===t.code&&(this.qrCodeUrl=t.data,console.log(this.qrCodeUrl)),await this.generateQRCode(),this.showModal=!0},toggleEdit(t){this.sysConfigUpdate=!0;const e=this.systemConfigs[t];e.editable?(console.log("保存配置:",e.name,e.value),e.editable=!1):e.editable=!0},async addCookie(){try{const t=await m.addCookie(this.newCookie);t.success&&2e4===t.code?(this.newCookie.id=t.data.id,this.cookieList.push({...this.newCookie,editable:!1}),this.showAddCookieModal=!1,this.newCookie={url:null,ckey:"",cvalue:"",classify:"",mediaType:""}):alert("新增Cookie失败，请重试")}catch(t){console.error("新增Cookie失败:",t),alert("新增Cookie失败，请重试")}},async updateCookie(t){const e=this.cookieList[t];try{const t=await m.updateCookie(e);t.success&&2e4===t.code?e.editable=!1:alert("修改Cookie失败，请重试")}catch(s){console.error("修改Cookie失败:",s),alert("修改Cookie失败，请重试")}},async deleteCookie(t){const e=this.cookieList[t];try{const s=await m.deleteCookie({id:e.id});s.success&&2e4===s.code?this.cookieList.splice(t,1):alert("删除Cookie失败，请重试")}catch(s){console.error("删除Cookie失败:",s),alert("删除Cookie失败，请重试")}},toggleCookieEdit(t){const e=this.cookieList[t];e.editable?this.updateCookie(t):e.editable=!0},async fetchUserData(){if(!this.isFetching){this.isFetching=!0;try{const t=await m.checkAccessKey();if(t.success&&2e4===t.code){const e=t.data.data;this.userName=e.name,this.userLevel=e.level,this.userCoins=e.coins,this.userAvatar="/config/getPic?url="+e.face,this.$message("刷新用户信息成功","success")}else-1!==t.message.indexOf("未登录/登录失效")&&(console.log("登陆失效，请重新登陆"),this.relogin())}catch(t){console.error("获取用户数据失败:",t)}finally{setTimeout((()=>{this.isFetching=!1}),300)}}},async generateQRCode(){try{this.qrCodeDataUrl=await Et.toDataURL(this.qrCodeUrl)}catch(t){console.error("生成二维码失败:",t)}},async checkScanResult(){try{const t=await m.checkTvScanResult();console.log(t),t.success&&2e4===t.code&&-1!==t.data.indexOf("登陆成功")?(alert("登录成功"),this.showModal=!1,this.fetchUserData()):alert(t.data)}catch(t){console.error("检查扫码结果失败:",t),alert("检查扫码结果失败，请重试")}},async fetchCookieList(t,e){try{const s=await m.getCookieList(t,e);if(s.success&&2e4===s.code){const t=s.data.page;this.cookieList=t.records.map((t=>({...t,editable:!1}))),this.totalPages=t.pages,this.currentPage=t.current}}catch(s){console.error("获取Cookie列表失败:",s)}},async fetchConfigData(){try{const t=await m.getConfigList();if(t.success&&2e4===t.code){const e=t.data;this.systemConfigs.forEach((t=>{const s=t.key,a=e.find((t=>t.name===s));a&&(t.value=a.value,t.id=a.id),"switch"===t.type&&(t.value="true"===t.value)}))}}catch(t){console.error("获取配置列表失败:",t)}},async updateConfigData(){try{const t=this.systemConfigs.map((t=>({id:t.id,name:t.key,value:t.value}))),e=await m.addOrUpdateConfig(t);e.success&&2e4===e.code?this.sysConfigUpdate=!1:alert("修改Cookie失败，请重试")}catch(t){console.error("修改Cookie失败:",t),alert("修改Cookie失败，请重试")}},prevPage(){this.currentPage>1&&(this.currentPage--,this.fetchCookieList(this.currentPage,this.pageSize))},nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.fetchCookieList(this.currentPage,this.pageSize))}},mounted(){this.fetchUserData(),this.fetchCookieList(this.currentPage,this.pageSize),this.fetchConfigData()}},Ot=Nt,Wt=(0,d.A)(Ot,Mt,$t,!1,null,"90bbeecc",null),Bt=Wt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex-1 p-8 overflow-y-auto"},[e("KeywordListComponent",{attrs:{hint:"添加新关键词",title:"搜索关键词","keyword-list-prop":t.arrData,type:"OTHER,SEARCH_KEYWORD",desc:"搜索任务的数据源,  下列关键词将会被搜索任务使用.  也就是说这部分关键词会被拿去搜索视频,  被搜索的视频会根据规则决定点踩或点赞",add:t.addKeyword,remove:t.removeKeyword}})],1)},jt=[],Vt={name:"other-setting-view",components:{KeywordListComponent:rt},data(){return{arrData:{"OTHER,SEARCH_KEYWORD":[]}}},mounted(){for(let t in this.arrData)this.fetchData(t)},computed:{},methods:{async addKeyword(t,e,s){try{const t=await m.addDict(s);t.success||this.$message(t.message,"error")}catch(a){console.error("Failed to  addKeyword",a)}},async removeKeyword(t,e,s){try{const t=await m.delDictById(s.id);t.success||this.$message(t.message,"error")}catch(a){console.error("Failed to  addKeyword",a)}},async fetchData(t){try{const[e,s]=t.split(","),a=await m.getDictList(e,s);this.arrData[t]=a.data.list}catch(e){console.error("Failed to fetch keywords:",e)}}}},Ft=Vt,Gt=(0,d.A)(Ft,Ht,jt,!1,null,"dafac8fa",null),zt=Gt.exports,Qt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"min-h-screen overflow-y-auto bg-gray-900",staticStyle:{width:"100%"}},[e("main",{staticClass:"max-w-7xl mx-auto px-4 py-8 flex flex-col min-h-[calc(100vh-2rem)]"},[e("div",{staticClass:"mb-8 flex justify-between items-center"},[e("div",{staticClass:"flex items-center space-x-4"},[e("h1",{staticClass:"text-2xl font-bold text-white"},[t._v("待审核视频")]),e("div",{staticClass:"flex space-x-2"},t._l(t.handleTypes,(function(s){return e("span",{key:s.value,class:["px-3 py-1 text-sm !rounded-button cursor-pointer",t.currentType===s.value?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-200"],on:{click:function(e){return t.handleTypeChange(s.value)}}},[t._v(t._s(s.label))])})),0)]),e("div",{staticClass:"flex items-center space-x-6"},[e("div",{staticClass:"flex items-center"},[t._m(0),e("span",{staticClass:"ml-2 text-xl font-bold text-yellow-400"},[t._v(t._s(t.pendingCount))])]),e("div",{staticClass:"flex items-center"},[t._m(1),e("span",{staticClass:"ml-2 text-xl font-bold text-green-400"},[t._v(t._s(t.confirmedCount))])])])]),e("div",{staticClass:"flex-1 w-full flex flex-col"},[t.videoList.length>0?e("div",{staticClass:"grid grid-cols-2 gap-6"},t._l(t.videoList,(function(s){return e("div",{key:s.bvid,class:["bg-gray-800 p-4 rounded-lg shadow-sm transition-all duration-500 video-card cursor-pointer",s.processed?"opacity-50 processed-card":""]},[e("div",{staticClass:"relative",on:{click:function(e){return t.goToBilibili(s)}}},[e("img",{class:["w-full h-48 object-cover rounded-lg","DISLIKE"===s.handleType?"blur-cover":""],attrs:{src:t.$getPic(s.coverUrl),alt:s.title}}),e("span",{class:["absolute top-2 right-2 px-2 py-1 text-xs !rounded-button",`tag-${s.handleType.toLowerCase()}`]},[t._v(t._s(t.getHandleTypeLabel(s.handleType)))])]),e("div",{staticClass:"mt-4"},[e("h3",{staticClass:"text-lg font-medium text-white line-clamp-2"},[t._v(t._s(s.title))]),e("div",{staticClass:"mt-2 flex items-center text-sm text-gray-400"},[e("img",{staticClass:"w-6 h-6 rounded-full",attrs:{src:t.$getPic(s.owner?.face),alt:s.owner?.name}}),e("span",{staticClass:"ml-2"},[t._v(t._s(s.owner?.name))])]),e("p",{staticClass:"mt-2 text-sm text-gray-400 line-clamp-2"},[t._v(t._s(s.desc))]),t.shouldShowReason(s)?e("div",{staticClass:"mt-2 text-sm"},[e("span",{staticClass:"text-gray-400"},[t._v("原因：")]),e("span",{class:{"text-green-400":"THUMB_UP"===s.handleType,"text-red-400":"DISLIKE"===s.handleType},domProps:{innerHTML:t._s(t.getReasonText(s))}})]):t._e(),e("div",{staticClass:"mt-4 flex items-center justify-between"},[e("div",{staticClass:"flex space-x-2"},[e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap","THUMB_UP"===s.handleType?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-600 text-gray-300 hover:bg-gray-700"],attrs:{disabled:s.processed},on:{click:function(e){return e.stopPropagation(),t.handleVideo(s,"THUMB_UP")}}},[e("i",{staticClass:"fas fa-thumbs-up mr-2"}),t._v(" "+t._s("THUMB_UP"===s.handleType?"确认点赞":"点赞")+" ")]),e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap","DISLIKE"===s.handleType?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-600 text-gray-300 hover:bg-gray-700"],attrs:{disabled:s.processed},on:{click:function(e){return e.stopPropagation(),t.handleVideo(s,"DISLIKE")}}},[e("i",{staticClass:"fas fa-thumbs-down mr-2"}),t._v(" "+t._s("DISLIKE"===s.handleType?"确认点踩":"点踩")+" ")]),e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap","OTHER"===s.handleType?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-600 text-gray-300 hover:bg-gray-700"],attrs:{disabled:s.processed},on:{click:function(e){return e.stopPropagation(),t.handleVideo(s,"OTHER")}}},[e("i",{staticClass:"fas fa-question-circle mr-2"}),t._v(" "+t._s("OTHER"===s.handleType?"确认其他":"其他")+" ")]),e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap relative","bg-purple-500 text-white hover:bg-purple-600"],on:{click:function(e){return e.stopPropagation(),t.recheck(s)}}},[e("i",{staticClass:"fas fa-sync-alt mr-2"}),t._v(" "),t._v(" 重新核验 "),s.recheckResult?e("div",{staticClass:"tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80"},[e("div",{staticClass:"bg-gray-800 text-white p-4 rounded-lg shadow-lg text-sm"},[e("div",{staticClass:"mb-3 pb-3 border-b border-gray-700"},[t._m(2,!0),s.whiteResult.total?e("div",{staticClass:"text-green-400 mb-2"},[e("i",{staticClass:"fas fa-check-circle mr-2"}),t._v("匹配白名单规则 ")]):e("div",{staticClass:"text-gray-400 mb-2"},[e("i",{staticClass:"fas fa-times-circle mr-2"}),t._v("未匹配白名单规则 ")]),e("div",{staticClass:"space-y-1"},[s.whiteResult.midMatch?e("div",{staticClass:"text-blue-400"},[e("i",{staticClass:"fas fa-user mr-2"}),t._v("UP主匹配 ")]):t._e(),s.whiteResult.tidMatch?e("div",{staticClass:"text-yellow-400"},[e("i",{staticClass:"fas fa-folder mr-2"}),t._v("分区匹配 ")]):t._e(),s.whiteResult.whitelistRuleMatch?e("div",{staticClass:"text-purple-400"},[e("i",{staticClass:"fas fa-list mr-2"}),t._v("规则匹配 ")]):t._e(),s.whiteResult.thumbUpReason?e("div",{staticClass:"mt-2 text-gray-300",domProps:{innerHTML:t._s(s.whiteResult.thumbUpReason)}}):t._e()])]),e("div",[t._m(3,!0),s.blackResult.total?e("div",{staticClass:"text-red-400 mb-2"},[e("i",{staticClass:"fas fa-exclamation-circle mr-2"}),t._v("匹配黑名单规则 ")]):e("div",{staticClass:"text-gray-400 mb-2"},[e("i",{staticClass:"fas fa-check-circle mr-2"}),t._v("未匹配黑名单规则 ")]),e("div",{staticClass:"space-y-1"},[s.blackResult.midMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-user mr-2"}),t._v("UP主匹配 ")]):t._e(),s.blackResult.tidMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-folder mr-2"}),t._v("分区匹配 ")]):t._e(),s.blackResult.tagMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-tags mr-2"}),t._v("标签匹配 ")]):t._e(),s.blackResult.titleMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-heading mr-2"}),t._v("标题匹配 ")]):t._e(),s.blackResult.descMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-align-left mr-2"}),t._v("描述匹配 ")]):t._e(),s.blackResult.coverMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-image mr-2"}),t._v("封面匹配 ")]):t._e(),s.blackResult.blackReason?e("div",{staticClass:"mt-2 text-gray-300",domProps:{innerHTML:t._s(s.blackResult.blackReason)}}):t._e()])])]),e("div",{staticClass:"tooltip-arrow"})]):t._e()])]),s.processed?e("span",{staticClass:"text-green-500"},[e("i",{staticClass:"fas fa-check-circle mr-1"}),t._v("已处理 ")]):t._e()])])])})),0):e("div",{staticClass:"flex-1 w-full flex flex-col items-center justify-center"},[e("i",{staticClass:"fas fa-inbox text-6xl text-gray-600 mb-4"}),e("p",{staticClass:"text-gray-400 text-lg"},[t._v("暂无待处理的视频")]),e("p",{staticClass:"text-gray-500 mt-2"},[t._v("请稍后再来查看或切换其他分类")])]),e("div",{staticClass:"w-full mt-8"},[e("nav",{staticClass:"flex justify-center items-center space-x-2"},[e("button",{staticClass:"px-3 py-2 border border-gray-600 text-gray-300 !rounded-button hover:bg-gray-700",attrs:{disabled:1===t.currentPage},on:{click:function(e){return t.changePage(t.currentPage-1)}}},[e("i",{staticClass:"fas fa-chevron-left"})]),t._l(t.displayedPages,(function(s,a){return["..."===s?e("span",{key:"ellipsis"+a,staticClass:"px-3 py-2 text-gray-500"},[t._v("...")]):e("button",{key:s,class:["px-3 py-2 !rounded-button",t.currentPage===s?"bg-blue-600 text-white":"border border-gray-600 text-gray-300 hover:bg-gray-700"],on:{click:function(e){return t.changePage(s)}}},[t._v(t._s(s)+" ")])]})),e("button",{staticClass:"px-3 py-2 border border-gray-600 text-gray-300 !rounded-button hover:bg-gray-700",attrs:{disabled:t.currentPage===t.totalPages},on:{click:function(e){return t.changePage(t.currentPage+1)}}},[e("i",{staticClass:"fas fa-chevron-right"})])],2)])])]),e("button",{staticClass:"fixed-process-btn",attrs:{disabled:!t.videoList.length||t.isProcessing},on:{click:t.handleAllVideos}},[e("i",{staticClass:"fas fa-magic mr-2"}),e("span",[t._v("一键处理")]),t.isProcessing?e("span",{staticClass:"ml-2"},[e("i",{staticClass:"fas fa-circle-notch fa-spin"})]):t._e()])])},Yt=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"text-yellow-500"},[e("i",{staticClass:"fas fa-clock mr-2"}),t._v(" 待处理: ")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"text-green-500"},[e("i",{staticClass:"fas fa-check-circle mr-2"}),t._v(" 已确认: ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center mb-2"},[e("i",{staticClass:"fas fa-shield-alt mr-2 text-blue-400"}),e("span",{staticClass:"font-medium"},[t._v("白名单检查")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center mb-2"},[e("i",{staticClass:"fas fa-ban mr-2 text-red-400"}),e("span",{staticClass:"font-medium"},[t._v("黑名单检查")])])}],qt={name:"review-page",data(){return{handleTypes:[{value:"ALL",label:"全部"},{value:"THUMB_UP",label:"待点赞"},{value:"DISLIKE",label:"待点踩"},{value:"OTHER",label:"其他"}],currentType:"ALL",videoList:[],currentPage:1,pageSize:10,total:0,processedVideos:new Set,pendingCount:0,confirmedCount:0,isProcessing:!1,timer:null}},computed:{totalPages(){return Math.ceil(this.total/this.pageSize)},displayedPages(){const t=[],e=this.currentPage,s=this.totalPages;if(s<=7){for(let e=1;e<=s;e++)t.push(e);return t}if(t.push(1),e<=3){for(let e=2;e<=5;e++)t.push(e);t.push("..."),t.push(s)}else if(e>=s-2){t.push("...");for(let e=s-4;e<=s;e++)t.push(e)}else{t.push("...");for(let s=e-1;s<=e+1;s++)t.push(s);t.push("..."),t.push(s)}return t}},created(){this.fetchVideoList()},methods:{async fetchVideoList(){try{const t={page:this.currentPage,size:this.pageSize,handleType:"ALL"===this.currentType?"":this.currentType},e=await m.getReady2HandleVideo(t);e.data&&(this.videoList=e.data.records,this.total=e.data.total,this.pendingCount=e.data.total)}catch(t){console.error("获取视频列表失败:",t)}},handleTypeChange(t){this.currentType=t,this.currentPage=1,this.fetchVideoList()},changePage(t){this.currentPage=t,this.fetchVideoList()},getHandleTypeLabel(t){const e={THUMB_UP:"待点赞",DISLIKE:"待点踩",OTHER:"待处理"};return e[t]||"待处理"},async recheck(t){try{const[e,s]=await Promise.all([m.isWhite(t.bvid),m.isBlack(t.bvid)]);e.success&&2e4===e.code&&s.success&&2e4===s.code&&(this.$set(t,"recheckResult",!0),this.$set(t,"whiteResult",e.data),this.$set(t,"blackResult",s.data),setTimeout((()=>{this.$set(t,"recheckResult",null),this.$set(t,"whiteResult",null),this.$set(t,"blackResult",null)}),3e3))}catch(e){this.$message("核验失败："+e.message,"error")}},async handleVideo(t,e){try{const s=t.handleType!==e?"用户修改为"+e:void 0;await m.processVideo(t.id,e,s,!1),this.$set(t,"processed",!0),this.processedVideos.add(t.id),this.pendingCount=Math.max(0,this.pendingCount-1),this.confirmedCount++;const a=this.videoList.filter((t=>!0===t.processed)).length;a===this.videoList.length?(this.$message("即将刷新页面","success"),setTimeout((()=>{this.fetchVideoList()}),500)):this.$message("处理成功","success")}catch(s){this.$message("处理失败："+s.message,"error")}},async handleAllVideos(){if(!this.isProcessing)try{this.isProcessing=!0;const t=this.videoList.filter((t=>!t.processed));for(const e of t)await this.handleVideo(e,e.handleType);this.$message("批量处理完成","success")}catch(t){this.$message("批量处理失败："+t.message,"error")}finally{this.isProcessing=!1}},shouldShowReason(t){return"THUMB_UP"===t.handleType&&t.thumbUpReason||"DISLIKE"===t.handleType&&t.blackReason},getReasonText(t){return"THUMB_UP"===t.handleType?t.thumbUpReason:"DISLIKE"===t.handleType?t.blackReason:""},goToBilibili(t){const e="https://www.bilibili.com/video/"+t.bvid;window.open(e,"_blank"),m.watchVideo(t.aid)}}},Zt=qt,Jt=(0,d.A)(Zt,Qt,Yt,!1,null,"5932c001",null),Xt=Jt.exports,te=function(){var t=this,e=t._self._c;return e("div",{staticClass:"min-h-screen overflow-y-auto bg-gray-900",staticStyle:{width:"100%"}},[e("main",{staticClass:"max-w-7xl mx-auto px-4 py-8 flex flex-col min-h-[calc(100vh-2rem)]"},[e("div",{staticClass:"mb-8 flex justify-between items-center"},[e("div",{staticClass:"flex items-center space-x-4"},[e("h1",{staticClass:"text-2xl font-bold text-white"},[t._v("历史处理过的视频")]),e("div",{staticClass:"flex space-x-2"},t._l(t.handleTypes,(function(s){return e("span",{key:s.value,class:["px-3 py-1 text-sm !rounded-button cursor-pointer",t.currentType===s.value?"bg-blue-600 text-white":"bg-gray-700 hover:bg-gray-600 text-gray-200"],on:{click:function(e){return t.handleTypeChange(s.value)}}},[t._v(t._s(s.label))])})),0)]),e("div",{staticClass:"flex items-center space-x-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"px-4 py-2 bg-gray-800 text-white border border-gray-700 rounded-button focus:outline-none focus:border-blue-500",attrs:{type:"text",placeholder:"搜索视频..."},domProps:{value:t.search},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSearch.apply(null,arguments)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("button",{staticClass:"px-4 py-2 bg-blue-600 text-white rounded-button hover:bg-blue-700 focus:outline-none",on:{click:t.handleSearch}},[e("i",{staticClass:"fas fa-search"})])])]),e("div",{staticClass:"flex-1 w-full flex flex-col"},[t.videoList.length>0?e("div",{staticClass:"grid grid-cols-2 gap-6"},t._l(t.videoList,(function(s){return e("div",{key:s.bvid,class:["bg-gray-800 p-4 rounded-lg shadow-sm transition-all duration-500 video-card cursor-pointer",s.processed?"opacity-50 processed-card":""]},[e("div",{staticClass:"relative",on:{click:function(e){return t.goToBilibili(s)}}},[e("img",{class:["w-full h-48 object-cover rounded-lg","DISLIKE"===s.handleType?"blur-cover":""],attrs:{src:t.$getPic(s.coverUrl),alt:s.title}})]),e("div",{staticClass:"mt-4"},[e("h3",{staticClass:"text-lg font-medium text-white line-clamp-2"},[t._v(t._s(s.title))]),e("div",{staticClass:"mt-2 flex items-center text-sm text-gray-400"},[e("img",{staticClass:"w-6 h-6 rounded-full",attrs:{src:t.$getPic(s.owner?.face),alt:s.owner?.name}}),e("span",{staticClass:"ml-2"},[t._v(t._s(s.owner?.name))])]),e("p",{staticClass:"mt-2 text-sm text-gray-400 line-clamp-2"},[t._v(t._s(s.desc))]),t.shouldShowReason(s)?e("div",{staticClass:"mt-2 text-sm"},[e("span",{staticClass:"text-gray-400"},[t._v("原因：")]),e("span",{class:{"text-green-400":"THUMB_UP"===s.handleType,"text-red-400":"DISLIKE"===s.handleType},domProps:{innerHTML:t._s(t.getReasonText(s))}})]):t._e(),e("div",{staticClass:"mt-4 flex items-center justify-between"},[e("div",{staticClass:"flex space-x-2"},[e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap","THUMB_UP"===s.handleType?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-600 text-gray-800    bg-orange-200"],attrs:{disabled:s.processed},on:{click:function(e){return e.stopPropagation(),t.handleVideo(s,"THUMB_UP")}}},[e("i",{staticClass:"fas fa-thumbs-up mr-2"}),t._v(" "+t._s("THUMB_UP"===s.handleType?"历史点赞":"纠正为：点赞")+" ")]),e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap","DISLIKE"===s.handleType?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-600 text-gray-800    bg-orange-200"],attrs:{disabled:s.processed},on:{click:function(e){return e.stopPropagation(),t.handleVideo(s,"DISLIKE")}}},[e("i",{staticClass:"fas fa-thumbs-down mr-2"}),t._v(" "+t._s("DISLIKE"===s.handleType?"历史点踩":"纠正为：点踩")+" ")]),e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap","OTHER"===s.handleType?"bg-blue-600 text-white hover:bg-blue-700":"border border-gray-600 text-gray-800    bg-orange-200"],attrs:{disabled:s.processed},on:{click:function(e){return e.stopPropagation(),t.handleVideo(s,"OTHER")}}},[e("i",{staticClass:"fas fa-question-circle mr-2"}),t._v(" "+t._s("OTHER"===s.handleType?"历史其他":"纠正为：其他")+" ")]),e("button",{class:["px-4 py-2 !rounded-button whitespace-nowrap relative","bg-purple-500 text-white hover:bg-purple-600"],on:{click:function(e){return e.stopPropagation(),t.recheck(s)}}},[e("i",{staticClass:"fas fa-sync-alt mr-2"}),t._v(" "),t._v(" 重新核验 "),s.recheckResult?e("div",{staticClass:"tooltip absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 w-80"},[e("div",{staticClass:"bg-gray-800 text-white p-4 rounded-lg shadow-lg text-sm"},[e("div",{staticClass:"mb-3 pb-3 border-b border-gray-700"},[t._m(0,!0),s.whiteResult.total?e("div",{staticClass:"text-green-400 mb-2"},[e("i",{staticClass:"fas fa-check-circle mr-2"}),t._v("匹配白名单规则 ")]):e("div",{staticClass:"text-gray-400 mb-2"},[e("i",{staticClass:"fas fa-times-circle mr-2"}),t._v("未匹配白名单规则 ")]),e("div",{staticClass:"space-y-1"},[s.whiteResult.midMatch?e("div",{staticClass:"text-blue-400"},[e("i",{staticClass:"fas fa-user mr-2"}),t._v("UP主匹配 ")]):t._e(),s.whiteResult.tidMatch?e("div",{staticClass:"text-yellow-400"},[e("i",{staticClass:"fas fa-folder mr-2"}),t._v("分区匹配 ")]):t._e(),s.whiteResult.whitelistRuleMatch?e("div",{staticClass:"text-purple-400"},[e("i",{staticClass:"fas fa-list mr-2"}),t._v("规则匹配 ")]):t._e(),s.whiteResult.thumbUpReason?e("div",{staticClass:"mt-2 text-gray-300",domProps:{innerHTML:t._s(s.whiteResult.thumbUpReason)}}):t._e()])]),e("div",[t._m(1,!0),s.blackResult.total?e("div",{staticClass:"text-red-400 mb-2"},[e("i",{staticClass:"fas fa-exclamation-circle mr-2"}),t._v("匹配黑名单规则 ")]):e("div",{staticClass:"text-gray-400 mb-2"},[e("i",{staticClass:"fas fa-check-circle mr-2"}),t._v("未匹配黑名单规则 ")]),e("div",{staticClass:"space-y-1"},[s.blackResult.midMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-user mr-2"}),t._v("UP主匹配 ")]):t._e(),s.blackResult.tidMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-folder mr-2"}),t._v("分区匹配 ")]):t._e(),s.blackResult.tagMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-tags mr-2"}),t._v("标签匹配 ")]):t._e(),s.blackResult.titleMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-heading mr-2"}),t._v("标题匹配 ")]):t._e(),s.blackResult.descMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-align-left mr-2"}),t._v("描述匹配 ")]):t._e(),s.blackResult.coverMatch?e("div",{staticClass:"text-red-400"},[e("i",{staticClass:"fas fa-image mr-2"}),t._v("封面匹配 ")]):t._e(),s.blackResult.blackReason?e("div",{staticClass:"mt-2 text-gray-300",domProps:{innerHTML:t._s(s.blackResult.blackReason)}}):t._e()])])]),e("div",{staticClass:"tooltip-arrow"})]):t._e()])]),s.processed?e("span",{staticClass:"text-green-500"},[e("i",{staticClass:"fas fa-check-circle mr-1"}),t._v("已处理 ")]):t._e()])])])})),0):e("div",{staticClass:"flex-1 w-full flex flex-col items-center justify-center"},[e("i",{staticClass:"fas fa-inbox text-6xl text-gray-600 mb-4"}),e("p",{staticClass:"text-gray-400 text-lg"},[t._v("暂无视频")]),e("p",{staticClass:"text-gray-500 mt-2"},[t._v("请稍后再来查看或切换其他分类")])]),e("div",{staticClass:"w-full mt-8"},[e("nav",{staticClass:"flex justify-center items-center space-x-2"},[e("button",{staticClass:"px-3 py-2 border border-gray-600 text-gray-300 !rounded-button hover:bg-gray-700",attrs:{disabled:1===t.currentPage},on:{click:function(e){return t.changePage(t.currentPage-1)}}},[e("i",{staticClass:"fas fa-chevron-left"})]),t._l(t.displayedPages,(function(s,a){return["..."===s?e("span",{key:"ellipsis"+a,staticClass:"px-3 py-2 text-gray-500"},[t._v("...")]):e("button",{key:s,class:["px-3 py-2 !rounded-button",t.currentPage===s?"bg-blue-600 text-white":"border border-gray-600 text-gray-300 hover:bg-gray-700"],on:{click:function(e){return t.changePage(s)}}},[t._v(t._s(s)+" ")])]})),e("button",{staticClass:"px-3 py-2 border border-gray-600 text-gray-300 !rounded-button hover:bg-gray-700",attrs:{disabled:t.currentPage===t.totalPages},on:{click:function(e){return t.changePage(t.currentPage+1)}}},[e("i",{staticClass:"fas fa-chevron-right"})])],2)])])])])},ee=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center mb-2"},[e("i",{staticClass:"fas fa-shield-alt mr-2 text-blue-400"}),e("span",{staticClass:"font-medium"},[t._v("白名单检查")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex items-center mb-2"},[e("i",{staticClass:"fas fa-ban mr-2 text-red-400"}),e("span",{staticClass:"font-medium"},[t._v("黑名单检查")])])}],se={name:"review-page",data(){return{handleTypes:[{value:"THUMB_UP",label:"已点赞"},{value:"DISLIKE",label:"已点踩"},{value:"ALL",label:"全部"},{value:"OTHER",label:"其他"}],currentType:"THUMB_UP",videoList:[],currentPage:1,pageSize:10,total:0,processedVideos:new Set,pendingCount:0,confirmedCount:0,isProcessing:!1,search:""}},computed:{totalPages(){return Math.ceil(this.total/this.pageSize)},displayedPages(){const t=[],e=this.currentPage,s=this.totalPages;if(s<=7){for(let e=1;e<=s;e++)t.push(e);return t}if(t.push(1),e<=3){for(let e=2;e<=5;e++)t.push(e);t.push("..."),t.push(s)}else if(e>=s-2){t.push("...");for(let e=s-4;e<=s;e++)t.push(e)}else{t.push("...");for(let s=e-1;s<=e+1;s++)t.push(s);t.push("..."),t.push(s)}return t}},created(){this.fetchVideoList()},methods:{async recheck(t){try{const[e,s]=await Promise.all([m.isWhite(t.bvid),m.isBlack(t.bvid)]);e.success&&2e4===e.code&&s.success&&2e4===s.code&&(this.$set(t,"recheckResult",!0),this.$set(t,"whiteResult",e.data),this.$set(t,"blackResult",s.data),setTimeout((()=>{this.$set(t,"recheckResult",null),this.$set(t,"whiteResult",null),this.$set(t,"blackResult",null)}),3e3))}catch(e){this.$message("核验失败："+e.message,"error")}},async fetchVideoList(){try{const t={page:this.currentPage,size:this.pageSize,handleType:"ALL"===this.currentType?"":this.currentType,search:this.search},e=await m.getAlreadyHandleVideo(t);e.data&&(this.videoList=e.data.records,this.total=e.data.total,this.pendingCount=e.data.total)}catch(t){console.error("获取视频列表失败:",t)}},handleTypeChange(t){this.currentType=t,this.currentPage=1,this.fetchVideoList()},changePage(t){this.currentPage=t,this.fetchVideoList()},getHandleTypeLabel(t){const e={THUMB_UP:"待点赞",DISLIKE:"待点踩",OTHER:"待处理"};return e[t]||"待处理"},async handleVideo(t,e){try{if(t.handleType==e)return;const s=confirm("确定要纠正之前的处理结果吗？");if(!s)return;const a=t.handleType!==e?"用户修改为"+e:void 0;await m.processVideo(t.id,e,a,!0),this.$set(t,"processed",!0),this.processedVideos.add(t.id),this.pendingCount=Math.max(0,this.pendingCount-1),this.confirmedCount++,this.$message("处理成功","success")}catch(s){this.$message("处理失败："+s.message,"error")}},async handleAllVideos(){if(!this.isProcessing)try{this.isProcessing=!0;const t=this.videoList.filter((t=>!t.processed));for(const e of t)await this.handleVideo(e,e.handleType);this.$message("批量处理完成","success")}catch(t){this.$message("批量处理失败："+t.message,"error")}finally{this.isProcessing=!1}},shouldShowReason(t){return"THUMB_UP"===t.handleType&&t.thumbUpReason||"DISLIKE"===t.handleType&&t.blackReason},getReasonText(t){return"THUMB_UP"===t.handleType?t.thumbUpReason:"DISLIKE"===t.handleType?t.blackReason:""},goToBilibili(t){const e="https://www.bilibili.com/video/"+t.bvid;window.open(e,"_blank"),m.watchVideo(t.aid)},handleSearch(){this.currentPage=1,this.fetchVideoList()}}},ae=se,ie=(0,d.A)(ae,te,ee,!1,null,"5f7618bc",null),oe=ie.exports;a.Ay.use(C.Ay);const re=new C.Ay({mode:"hash",routes:[{path:"/",redirect:"/home"},{path:"/home",component:P},{path:"/tasks",component:J},{path:"/whitelist",component:xt},{path:"/blacklist",component:Ut},{path:"/settings",component:Bt},{path:"/other-setting",component:zt},{path:"/review",component:Xt},{path:"/history-video",component:oe}]});re.beforeEach(((t,e,s)=>{s()}));var le=re,ne=s(3518),ce={userInfo:""},de={async setUserInfo(t,e){let s=await m.checkToken();if(s.success){let e=s.data;t.commit("SET_USER_INFO",e)}else e.$notify.warn("登录信息已过期，请重新登录"),t.commit("SET_USER_INFO",null)},removeUserInfo(t){t.commit("SET_USER_INFO",null)}},ue={SET_USER_INFO(t,e){t.userInfo=e}},he={};a.Ay.use(ne.Ay);var pe=new ne.Ay.Store({state:ce,mutations:ue,actions:de,getters:he}),ge=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"fade"}},[t.visible?e("div",{staticClass:"message",class:t.type},[t._v(" "+t._s(t.message)+" ")]):t._e()])},fe=[],me={name:"Message-component",data(){return{visible:!1,message:"",type:""}},methods:{show(t,e="info",s=2e3){this.message=t,this.type=e,this.visible=!0,setTimeout((()=>{this.visible=!1}),s)}}},ve=me,ye=(0,d.A)(ve,ge,fe,!1,null,null,null),be=ye.exports;const we=a.Ay.extend(be);function Ce(t,e){const s=new we;s.$mount(document.createElement("div")),document.body.appendChild(s.$el),s.show(t,e)}const xe={install(t){t.prototype.$message=Ce}};var ke=xe,_e={install(t){t.prototype.$getBvid=function(t){const e=/BV[a-zA-Z0-9]{10}/,s=t.match(e);if(s){const t=s[0];return t}return null},t.prototype.$getMid=function(t){const e="https://space.bilibili.com/";if(t.startsWith(e)){let e=new URL(t).pathname.split("/").pop();return e}return null},t.prototype.$getPic=function(t){return"/config/getPic?url="+t}}};a.Ay.use(ke),a.Ay.use(_e),a.Ay.config.productionTip=!1,function(){const t=console.log;console.log=function(...e){const s=(new Error).stack.split("\n"),a=s[2],i=a.match(/at\s+(?:.*\s+)?\((.*):(\d+):(\d+)\)/);if(i){const[,t,s,a]=i;let o=t.substring(t.indexOf("src"));e.push(`(File: ${o}, Line: ${s}, Column: ${a})`)}t.apply(console,e)}}();const Te=new a.Ay({render:t=>t(w),router:le,store:pe}).$mount("#app");var Re=Te}},e={};function s(a){var i=e[a];if(void 0!==i)return i.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,a,i,o){if(!a){var r=1/0;for(d=0;d<t.length;d++){a=t[d][0],i=t[d][1],o=t[d][2];for(var l=!0,n=0;n<a.length;n++)(!1&o||r>=o)&&Object.keys(s.O).every((function(t){return s.O[t](a[n])}))?a.splice(n--,1):(l=!1,o<r&&(r=o));if(l){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,i,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var i,o,r=a[0],l=a[1],n=a[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(i in l)s.o(l,i)&&(s.m[i]=l[i]);if(n)var d=n(s)}for(e&&e(a);c<r.length;c++)o=r[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},a=self["webpackChunkbilirec_web"]=self["webpackChunkbilirec_web"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[504],(function(){return s(5369)}));a=s.O(a)})();
//# sourceMappingURL=app.eba388fc.js.map