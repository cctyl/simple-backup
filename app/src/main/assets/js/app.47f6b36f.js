(function(t){function e(e){for(var n,o,r=e[0],c=e[1],l=e[2],m=0,d=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(d.length)d.shift()();return i.push.apply(i,l||[]),s()}function s(){for(var t,e=0;e<i.length;e++){for(var s=i[e],n=!0,r=1;r<s.length;r++){var c=s[r];0!==a[c]&&(n=!1)}n&&(i.splice(e--,1),t=o(o.s=s[0]))}return t}var n={},a={app:0},i=[];function o(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=n,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(s,n,function(e){return t[e]}.bind(null,n));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;i.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},"0ab4":function(t,e,s){"use strict";s("bb73")},"0af6":function(t,e,s){},"162a":function(t,e,s){"use strict";s("bbc7")},"23bf":function(t,e,s){},4678:function(t,e,s){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=i(t);return s(e)}function i(t){if(!s.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="4678"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"app"},[s("Header",{directives:[{name:"show",rawName:"v-show",value:t.$route.meta.showHeader,expression:"$route.meta.showHeader"}]}),s("router-view",{nativeOn:{click:function(e){return t.closeNavMsg()}}})],1)},i=[],o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[s("div",{staticClass:"logo",on:{click:t.toHome}},[t._v(" SOB ")]),s("div",{staticClass:"side"},[s("div",{staticClass:"nav-show-btn",on:{click:function(e){return t.setNavListShow(!t.navListShow)}}},[s("span",{staticClass:"nav-title"},[t._v(t._s(t.$route.meta.navText?t.$route.meta.navText:"首页"))]),s("i",{staticClass:"iconfont",class:t.navListShow?"icon-shangzhankai":"icon-xiazhankai"})]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.navListShow,expression:"navListShow"}],staticClass:"nav-list"},[s("li",{staticClass:"nav-item",on:{click:function(e){return t.toPage("/home")}}},[s("a",{class:{"nav-active":"/home"===t.$route.path||"/"===t.$route.path}},[t._v("首页")])]),s("li",{staticClass:"nav-item",on:{click:function(e){return t.toPage("/moment")}}},[s("a",{class:{"nav-active":"/moment"===t.$route.path}},[t._v("摸鱼")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/wenda"===t.$route.path}},[t._v("问答")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("分享")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("学院")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("VIP")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("仓库")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("APIs")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("商场")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("笔记")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/xxx"===t.$route.path}},[t._v("交互")])]),s("li",{staticClass:"nav-item"},[s("a",{class:{"nav-active":"/ucenter"===t.$route.path}},[t._v(" 个人中心 ")])])])]),s("div",{staticClass:"search",on:{click:function(e){return t.closeNavMsg()}}},[s("nut-searchbar",{attrs:{hasSearchButton:!0,placeText:"有什么想搜索的？"},model:{value:t.searchStr,callback:function(e){t.searchStr=e},expression:"searchStr"}})],1),t.userInfo?s("div",{staticClass:"userinfo",on:{click:t.showMsgBox}},[s("nut-badge",{attrs:{top:"5px",right:"18px",isDot:t.hasNewMessage}},[s("nut-avatar",{staticClass:"user-avatar",attrs:{"bg-icon":"","bg-image":t.userInfo.avatar}})],1),t.msgBoxShow?s("ul",{staticClass:"message-box"},[s("nut-badge",{attrs:{value:t.msgData.articleMsgCount,top:"9px",right:"-10px"}},[s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.toMessage(2)}}},[t._v("文章回复")])]),s("nut-badge",{attrs:{value:t.msgData.thumbUpMsgCount,top:"9px",right:"-10px"}},[s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.toMessage(1)}}},[t._v("给朕点赞")])]),s("nut-badge",{attrs:{value:t.msgData.atMsgCount,top:"9px",right:"-10px"}},[s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.toMessage(0)}}},[t._v(" @朕消息")])]),s("nut-badge",{attrs:{value:t.msgData.momentCommentCount,top:"9px",right:"-10px"}},[s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.toMessage(3)}}},[t._v("动态评论")])]),s("nut-badge",{attrs:{value:t.msgData.wendaMsgCount,top:"9px",right:"-10px"}},[s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.toMessage(4)}}},[t._v("问题回答")])]),s("nut-badge",{attrs:{value:t.msgData.systemMsgCount,top:"9px",right:"-10px"}},[s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.toMessage(5)}}},[t._v("系统通知")])]),s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.readAll.apply(null,arguments)}}},[t._v("全部已读 ")]),s("li",{staticClass:"mitem",on:{click:function(e){return e.stopPropagation(),t.logout.apply(null,arguments)}}},[t._v("退出登录 ")])],1):t._e()],1):s("div",{staticClass:"loginText",on:{click:t.toLogin}},[s("span",[t._v("登录")])])])},r=[],c=s("1da1"),l=s("5530"),u=(s("96cf"),s("2f62")),m=(s("99af"),s("d3b7"),s("bc3a")),d=s.n(m),p="https://api.sunofbeaches.com";function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(n,a){d()({method:s,url:t,baseURL:p,data:e,withCredentials:!0}).then((function(t){n(t.data)})).catch((function(t){console.log("Error: "),console.log(t),a(t)}))}))}var g=s("8d81"),v=s.n(g),f={login:function(t,e,s){var n=v()(e);return h("/uc/user/login/".concat(s),{phoneNum:t,password:n},"POST")},getAvatarByPhone:function(t){return h("/uc/user/avatar/".concat(t))},logout:function(){return h("/uc/user/logout")},checkToken:function(){return h("/uc/user/checkToken")},getSmsForRegister:function(t,e){return h("/uc/ut/forget/send-sms",{phoneNumber:t,verifyCode:e},"POST")},checkSmsCode:function(t,e){return h("/uc/ut/check-sms-code/".concat(t,"/").concat(e))},register:function(t,e){var s=e.phoneNum,n=e.password,a=e.nickname;return h("/uc/user/register/".concat(t),{phoneNum:s,password:n,nickname:a},"POST")},updatePasswordBySms:function(t,e,s){return h("/uc/user/forget/".concat(t),{phoneNum:e,password:s},"PUT")},updatePassword:function(t){var e=t.oldPwd,s=t.newPwd,n=t.captcha;return h("/uc/user/modify-pwd",{oldPwd:e,newPwd:s,captcha:n},"PUT")},getMoyuList:function(t,e){return h("/ct/moyu/list/".concat(t,"/").concat(e))},getHotMoyuList:function(t){return h("/ct/moyu/hot/".concat(t))},momentThumbUp:function(t){return h("/ct/moyu/thumb-up/".concat(t),null,"PUT")},sendMoyuSubComment:function(t,e,s,n){return h("/ct/moyu/sub-comment",{content:t,momentId:e,targetUserId:s,commentId:n},"POST")},publishMoyu:function(t,e,s){return h("/ct/moyu",{content:t,topicId:e,images:s},"POST")},getMoyuDetail:function(t){return h("/ct/moyu/".concat(t))},getMoyuHotTopic:function(){return h("/ct/moyu/topic/index")},getMoyuAllTopic:function(){return h("/ct/moyu/topic")},followTopic:function(t){return h("/ct/moyu/topic/follow/".concat(t),null,"POST")},unfollwTopic:function(t){return h("/ct/moyu/topic/follow/".concat(t),null,"DELETE")},getFollwTopicList:function(){return h("/ct/moyu/topic/follow")},getCategoryList:function(){return h("/ct/category/list")},getLoopList:function(){return h("/ast/home/loop/list")},getRecommendArticleList:function(t){return h("/ct/content/home/recommend/".concat(t))},getArticleListByCategoryId:function(t,e){return h("/ct/content/home/recommend/".concat(t,"/").concat(e))},getArticleDetail:function(t){return h("/ct/article/detail/".concat(t))},getArticleComment:function(t,e){return h("/ct/article/comment/".concat(t,"/").concat(e))},getMsgCount:function(){return h("/ct/msg/count")},readAllMsg:function(){return h("/ct/msg/read")},getArticleMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h("/ct/ucenter/message/article/".concat(t))},getMomentMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h("/ct/ucenter/message/moment/".concat(t))},getWendaMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h("/ct/ucenter/message/wenda/".concat(t))},getThumbMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h("/ct/ucenter/message/thumb/".concat(t))},getSystemMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h("/ct/ucenter/message/system/".concat(t))},getAtMessage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h("/ct/ucenter/message/at/".concat(t))},articleThumbUp:function(t){return h("/ct/article/thumb-up/".concat(t),null,"PUT")},checkArticleThumbUp:function(t){return h("/ct/article/check-thumb-up/".concat(t))},checkArticleCollected:function(t){return h("/ct/favorite/checkCollected?url=".concat(t))},getCollectList:function(t){return h("/ct/collection/list/".concat(t))},collectArticle:function(t){return h("/ct/favorite",t,"POST")},cancelCollect:function(t){return h("/ct/favorite/".concat(t),null,"DELETE")},addArticleComment:function(t){return h("/ct/article/comment",t,"POST")},addArticleSubComment:function(t){return h("/ct/article/sub-comment",t,"POST")},getMoyuCommontList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return h("/ct/moyu/comment/".concat(t,"/").concat(e,"?sort=0"))},sendMoyuComment:function(t,e){return h("/ct/moyu/comment",{momentId:t,content:e},"POST")}},b={name:"Header.vue",data:function(){return{searchStr:"",msgData:{articleMsgCount:0,atMsgCount:0,momentCommentCount:0,shareMsgCount:0,systemMsgCount:0,thumbUpMsgCount:0,wendaMsgCount:0},timer:{}}},computed:Object(l["a"])(Object(l["a"])({},Object(u["c"])(["userInfo","msgBoxShow","navListShow"])),{},{hasNewMessage:function(){for(var t in this.msgData)if(this.msgData[t]>0)return!0;return!1}}),mounted:function(){var t=this;this.getMsgCount(),clearInterval(this.timer),this.timer=setInterval((function(){t.$store.state.userInfo&&t.getMsgCount()}),1e4)},watch:{userInfo:function(){this.userInfo&&this.getMsgCount()}},methods:Object(l["a"])(Object(l["a"])({},Object(u["b"])(["setMsgBoxShow","setNavListShow"])),{},{toHome:function(){this.closeNavMsg(),"/home"==this.$route.path||"/"==this.$route.path?console.log("在首页，不跳转"):this.$router.push({path:"/home"})},toLogin:function(){this.$router.push("/login")},toPage:function(t){this.setNavListShow(!1),this.$route.path!==t&&this.$router.push(t)},showMsgBox:function(){!0===this.msgBoxShow?this.setMsgBoxShow(!1):this.setMsgBoxShow(!0)},getMsgCount:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getMsgCount();case 2:s=e.sent,t.msgData=s.data;case 4:case"end":return e.stop()}}),e)})))()},readAll:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.setMsgBoxShow(!1),e.next=3,f.readAllMsg();case 3:s=e.sent,!0===s.success&&(t.$notify.success("已读成功！"),t.msgData={articleMsgCount:0,atMsgCount:0,momentCommentCount:0,shareMsgCount:0,systemMsgCount:0,thumbUpMsgCount:0,wendaMsgCount:0});case 5:case"end":return e.stop()}}),e)})))()},toMessage:function(t){this.closeNavMsg(),this.$router.push({path:"/message",query:{type:t}})},logout:function(){localStorage.setItem("sob_token",""),this.$store.dispatch("removeUserInfo"),this.$notify.success("退出登录成功！")}})},C=b,x=(s("d225"),s("2877")),w=Object(x["a"])(C,o,r,!1,null,"61f1633b",null),k=w.exports,_={name:"App",methods:{},mounted:function(){this.$store.dispatch("setUserInfo",this)},components:{Header:k}},y=_,T=(s("034f"),Object(x["a"])(y,a,i,!1,null,null,null)),j=T.exports,L=s("8c4f"),M={lastUrl:"",userInfo:"",msgBoxShow:!1,navListShow:!1},S={setLastUrl:function(t,e){t.commit("SET_LAST_URL",e)},setUserInfo:function(t,e){return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,f.checkToken();case 2:n=s.sent,n.success?(a=n.data,t.commit("SET_USER_INFO",a)):(e.$notify.warn("登录信息已过期，请重新登录"),t.commit("SET_USER_INFO",null));case 4:case"end":return s.stop()}}),s)})))()},setMsgBoxShow:function(t,e){t.commit("SET_MSG_BOX_SHOW",e)},setNavListShow:function(t,e){t.commit("SET_NAV_LIST_SHOW",e)},removeUserInfo:function(t){t.commit("SET_USER_INFO",null)}},I={SET_LAST_URL:function(t,e){t.lastUrl=e},SET_USER_INFO:function(t,e){t.userInfo=e},SET_MSG_BOX_SHOW:function(t,e){t.msgBoxShow=e},SET_NAV_LIST_SHOW:function(t,e){t.navListShow=e}},P={};n["default"].use(u["a"]);var U=new u["a"].Store({state:M,mutations:I,actions:S,getters:P}),O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nut-backtop",{class:{show:t.isShowBacktop},attrs:{"el-id":"app",bottom:20,right:20,"z-index":10,distance:200},on:{click:t.backToTop}}),t.isSkeletonLoading?s("div",{staticClass:"vue-skeleton-loading"},[s("div",{staticClass:"skeleton-bac-animation"}),s("div",[s("row",{attrs:{padding:"0 10px 0"}},[s("skeleton-square",{attrs:{width:"390px",height:"25px"}})],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("column",[s("skeleton-square",{attrs:{width:"390px",height:"168px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"10px 10px 5px"}})],1)],1)],1)]):[s("nut-scroller",{staticClass:"tagScroll"},[s("div",{staticClass:"tagItem nut-hor-list-item ",class:{tagCurrent:-1==t.currentTag},attrs:{slot:"list"},on:{click:function(e){return t.changeTag(-1,null)}},slot:"list"},[s("span",{staticClass:"tagTitle"},[t._v("推荐")])]),t._l(t.categoryList,(function(e,n){return s("div",{key:e.id,staticClass:"tagItem nut-hor-list-item ",class:{tagCurrent:t.currentTag==n},attrs:{slot:"list"},on:{click:function(s){return t.changeTag(n,e)}},slot:"list"},[s("span",{staticClass:"tagTitle"},[t._v(t._s(e.categoryName))])])}))],2),s("div",{staticClass:"line"}),s("nut-scroller",{ref:"mynutscroller",staticClass:"totalScroll",attrs:{scrollTo:t.scrollY,type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了"},on:{loadMore:t.loadMoreVert,pulldown:t.pulldown,scrollChange:t.scrollChange,scrollToCbk:t.scrollToCbk}},[s("div",{staticClass:"nut-hor-list-item",attrs:{slot:"list"},slot:"list"},[s("nut-swiper",{directives:[{name:"show",rawName:"v-show",value:-1==t.currentTag,expression:"currentTag==-1"}],ref:"demo3",staticClass:"img-swiper",attrs:{autoPlay:2e3,direction:"horizontal",loop:!0,canDragging:!1,paginationVisible:!0,swiperData:t.loopList}},t._l(t.loopList,(function(t){return s("div",{key:t.id,staticClass:"nut-swiper-slide"},[s("img",{staticClass:"swiperImg",attrs:{src:t.picUrl,alt:""}})])})),0),s("div",{attrs:{id:"totalScroll"}},[s("ul",{staticClass:"articleList"},t._l(t.recommendArticleList,(function(e){return s("li",{key:e.id,staticClass:"articleItem",on:{click:function(s){return t.toArticleDetail(e.id)}}},[s("div",{staticClass:"left"},[s("img",{staticStyle:{"object-fit":"cover"},attrs:{src:e.covers[0],alt:""}})]),s("div",{staticClass:"right"},[s("h2",{staticClass:"title"},[t._v(t._s(e.title))]),s("div",{staticClass:"articleInfo"},[s("span",{staticClass:"author articleInfoItem"},[t._v(t._s(e.nickName))]),s("span",{staticClass:"viewCount articleInfoItem"},[t._v(t._s(e.viewCount)+"阅读")]),s("span",{staticClass:"thumbUp articleInfoItem"},[t._v(t._s(e.thumbUp)+"点赞")])])])])})),0)])],1)])]],2)},$=[],R=s("e1bd"),A={name:"Home.vue",data:function(){return{isSkeletonLoading:!0,categoryList:[],currentTag:-1,currentTagId:"",loopList:[],recommendArticleList:[],currentPage:0,isUnMore:!1,isLoading:!1,isShowBacktop:!1,scrollY:0,currentScroll:0,scrollElem:{}}},methods:{getCategoryList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getCategoryList();case 2:s=e.sent,t.categoryList=s.data;case 4:case"end":return e.stop()}}),e)})))()},getLoopList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getLoopList();case 2:for(s=e.sent,n=0;n<s.data.length;n++)s.data[n].id=Object(R["a"])();t.loopList=s.data;case 5:case"end":return e.stop()}}),e)})))()},getArticleList:function(){var t=arguments,e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,a,i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(n=t.length>0&&void 0!==t[0]?t[0]:1,a=t.length>1&&void 0!==t[1]&&t[1],i=null,!e.currentTagId){s.next=9;break}return s.next=6,f.getArticleListByCategoryId(e.currentTagId,n);case 6:i=s.sent,s.next=12;break;case 9:return s.next=11,f.getRecommendArticleList(n);case 11:i=s.sent;case 12:e.recommendArticleList=a?e.mergeTargetFromSource(e.recommendArticleList,i.data.list,"id"):i.data.list,e.isLoading=!1,e.isUnMore=!1,e.$nextTick((function(){e.isSkeletonLoading=!1}));case 16:case"end":return s.stop()}}),s)})))()},loadMoreVert:function(){this.isUnMore=!0,this.getArticleList(++this.currentPage,!0)},pulldown:function(){this.isLoading=!0,this.getArticleList(0,!1)},scrollChange:function(t){this.currentScroll=t,this.isShowBacktop=-t>200},backToTop:function(){var t=this;this.scrollElem.style.transform="translate3d(0px, -1px, 0px)",setTimeout((function(){-2===t.scrollY?t.scrollY=-.02:t.scrollY=-2}),500)},scrollToCbk:function(){console.log("scrollToCbk")},changeTag:function(t,e){this.currentTag=t,this.currentTagId=e?e.id:null,this.getArticleList(1,!1)},toArticleDetail:function(t){this.$router.push({path:"/detail",query:{id:t}})}},mounted:function(){this.isSkeletonLoading=!0,this.getCategoryList(),this.getLoopList(),this.getArticleList(1);var t=this;setTimeout((function(){t.scrollElem=document.getElementsByClassName("nut-vert-list")[0]}),500)}},N=A,B=(s("6064"),Object(x["a"])(N,O,$,!1,null,"9b218d32",null)),q=B.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("div",{staticClass:"vue-skeleton-loading"},[s("div",{staticClass:"skeleton-bac-animation"}),s("div",[s("row",{attrs:{padding:"15px 10px 0"}},[s("skeleton-square",{attrs:{width:"360px",height:"10px",count:2}})],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-circle",{attrs:{diameter:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"300px",count:2,margin:"5px 10px 5px 10px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("column",[s("skeleton-square",{attrs:{width:"350px",count:15,margin:"10px 10px 10px 10px"}})],1)],1)],1)]):s("nut-scroller",{attrs:{type:"vertical"}},[s("div",{staticClass:"article",attrs:{slot:"list"},slot:"list"},[s("div",{staticClass:"title"},[s("h1",[s("span",{staticClass:"tit"},[t._v(t._s(t.articleInfo.title))]),s("span",{staticClass:"type"},[t._v(t._s(0==t.articleInfo.articleType?"原创":"转载"))])])]),s("div",{staticClass:"infobox"},[s("nut-row",[s("nut-col",{attrs:{span:12}},[s("span",{staticClass:"time"},[t._v(t._s(t.articleInfo.createTime))])]),s("nut-col",{attrs:{span:7}},[s("span",{staticClass:"viewCount "},[s("i",{staticClass:"icon-chakan iconfont"}),t._v(" "+t._s(t.articleInfo.viewCount)+"人看过 ")])]),s("nut-col",{attrs:{span:5}},[s("span",{staticClass:"thumbUp "},[s("i",{staticClass:"icon-dianzan iconfont"}),t._v(" "+t._s(t.articleInfo.thumbUp)+"点赞 ")])])],1)],1),s("div",{staticClass:"author"},[s("nut-row",[s("nut-col",{attrs:{span:3}},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:t.articleInfo.avatar,alt:""}})])]),s("nut-col",{attrs:{span:16}},[s("div",{staticClass:"authorDetail"},[s("p",{staticClass:"authorTop"},[s("span",{staticClass:"authorName"},[t._v(" "+t._s(t.articleInfo.nickname))]),s("span",{staticClass:"isVip vip iconfont icon-vip"})]),s("p",{staticClass:"authorBottom"},[s("span",[t._v(t._s(t.articleInfo.categoryName))])])])]),s("nut-col",{attrs:{span:5}},[s("div",{staticClass:"focuson"},[t._v("关注")])])],1)],1),s("div",{staticClass:"content markdown-body sob-article-content",domProps:{innerHTML:t._s(t.articleInfo.content)}}),s("div",{staticClass:"review"},[s("div",{staticClass:"reviewHeader"},[s("span",[t._v("评论("+t._s(t.commentList.length)+")")]),s("span",{staticClass:"iconfont icon-edit",on:{click:function(e){return t.openCommentPanel(!1)}}},[t._v("写评论")])]),s("div",{staticClass:"reviewList"},[t._l(t.commentList,(function(e){return s("div",{key:e._id,staticClass:"reviewItem"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:e.avatar}})]),s("div",{staticClass:"reviewRight"},[s("div",{staticClass:"top"},[s("span",{staticClass:"reviewNikename"},[t._v(t._s(e.nickname))]),s("span",[t._v(t._s(e.publishTime))])]),s("div",{staticClass:"reviewBottom"},[t._v(t._s(e.commentContent))]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(!0,e)}}},[t._v("回复")])]),1===e.subComments.length?s("div",[s("div",{staticClass:"subcomment"},[s("div",{staticClass:"subleft"},[s("img",{attrs:{src:e.subComments[0].yourAvatar}})]),s("div",{staticClass:"subreviewRight"},[s("div",{staticClass:"subtop"},[s("span",{staticClass:"subreviewNikename"},[t._v(t._s(e.subComments[0].yourNickname))]),s("span",[t._v(t._s(e.subComments[0].publishTime))])]),s("p",{staticClass:"subreviewBottom"},[t._v(" "+t._s(e.subComments[0].beNickname?"回复 "+e.subComments[0].beNickname+":":"")+" "+t._s(e.subComments[0].content)+" ")]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(!0,e.subComments[0])}}},[t._v("回复")])])])])]):t._e(),e.subComments.length>1&&!e.showMore?s("div",[s("div",{staticClass:"subcomment"},[s("div",{staticClass:"subleft"},[s("img",{attrs:{src:e.subComments[0].yourAvatar}})]),s("div",{staticClass:"subreviewRight"},[s("div",{staticClass:"subtop"},[s("span",{staticClass:"subreviewNikename"},[t._v(t._s(e.subComments[0].yourNickname))]),s("span",[t._v(t._s(e.subComments[0].publishTime))])]),s("p",{staticClass:"subreviewBottom"},[t._v(" "+t._s(e.subComments[0].beNickname?"回复 "+e.subComments[0].beNickname+":":"")+" "+t._s(e.subComments[0].content)+" ")]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(!0,e.subComments[0])}}},[t._v("回复")])])])]),s("span",{staticClass:"sub-see-more",on:{click:function(t){e.showMore=!0}}},[t._v("点击查看更多("+t._s(e.subComments.length-1)+")")])]):t._e(),e.subComments.length>1&&e.showMore?s("div",[t._l(e.subComments,(function(e){return s("div",{key:e._id,staticClass:"subcomment"},[s("div",{staticClass:"subleft"},[s("img",{attrs:{src:e.yourAvatar}})]),s("div",{staticClass:"subreviewRight"},[s("div",{staticClass:"subtop"},[s("span",{staticClass:"subreviewNikename"},[t._v(t._s(e.yourNickname))]),s("span",[t._v(t._s(e.publishTime))])]),s("p",{staticClass:"subreviewBottom"},[t._v(" "+t._s(e.beNickname?"回复 "+e.beNickname+":":"")+" "+t._s(e.content)+" ")]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(!0,e)}}},[t._v("回复")])])])])})),s("span",{staticClass:"sub-see-more",on:{click:function(t){e.showMore=!1}}},[t._v("收起")])],2):t._e()])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.commentList.length,expression:"commentList.length==0"}],staticClass:"reviewItem"},[s("div",{staticClass:"noComment "},[s("i",{staticClass:"iconfont icon-meiyoushuju"}),t._v(" 暂无评论~~ ")])])],2)])])]),s("div",{staticClass:"footerTool"},[s("div",{staticClass:"right"},[s("span",{staticClass:"dianzan btn",on:{click:t.thumbUp}},[s("i",{staticClass:"iconfont tubiao  ",class:t.isThumbUp?"icon-dianzan_kuai":"icon-dianzan",style:t.isThumbUp?"color: #007fff;":""}),s("span",{staticClass:"desc"},[t._v(t._s(t.articleInfo.thumbUp))])]),s("span",{staticClass:"collect btn",on:{click:t.openCollectList}},[s("i",{staticClass:"iconfont tubiao ",class:t.isCollect?"icon-shoucang3":"icon-shoucang2",style:t.isCollect?"color: #007fff;":""}),s("span",{staticClass:"desc"},[t._v("收藏")])]),s("span",{staticClass:"share btn"},[s("i",{staticClass:"iconfont tubiao icon-fenxiang1"}),s("span",{staticClass:"desc",on:{click:t.shareArticle}},[t._v("分享")])])])]),s("nut-popup",{style:{height:"50%"},attrs:{position:"bottom",closeable:"","close-icon":"cross","close-icon-position":"top-right"},model:{value:t.showCollectList,callback:function(e){t.showCollectList=e},expression:"showCollectList"}},[s("div",{staticClass:"nut-vert-list-panel"},t._l(t.collectList,(function(e){return s("div",{key:e._id,staticClass:"collect-item"},[s("div",{staticClass:"item-left"},[s("img",{attrs:{src:e.cover,alt:""}})]),s("div",{staticClass:"item-center"},[s("div",{staticClass:"above"},[t._v(" "+t._s(e.name)+" ")]),s("div",{staticClass:"under"},[s("span",{staticClass:"collect-perm iconfont icon-jiesuo"},[t._v(t._s("0"===e.permission?"公开":"隐藏"))]),s("span",{staticClass:"collect-length"},[t._v(t._s(e.favoriteCount)+"条内容")])])]),s("div",{staticClass:"item-right"},[t.isCollect?s("span",{staticClass:"collect-btn collected",on:{click:t.cancelCollect}},[t._v("取消收藏")]):s("span",{staticClass:"collect-btn",on:{click:function(s){return t.collectArticle(e._id)}}},[t._v("收藏")])])])})),0)]),s("nut-popup",{attrs:{position:"top"},model:{value:t.showCommentPanel,callback:function(e){t.showCommentPanel=e},expression:"showCommentPanel"}},[s("nut-textbox",{staticClass:"comment-input",attrs:{"place-text":t.commentPlaceText,"max-num":300,"txt-area-h":80},model:{value:t.commentStr,callback:function(e){t.commentStr=e},expression:"commentStr"}}),s("nut-button",{staticClass:"comment-submit-btn",attrs:{type:"light",color:"#fff",block:""},on:{click:t.submitComment}},[t._v(" 提交 ")])],1)],1)},D=[],z=(s("159b"),s("d81d"),s("e4cb"),s("8da8"),s("1487")),H=s.n(z);function Y(t){var e=document.createElement("INPUT");return e.style.opacity=0,e.style.position="absolute",e.style.left="-100000px",document.body.appendChild(e),e.value=t,e.select(),e.setSelectionRange(0,t.length),document.execCommand("copy"),document.body.removeChild(e),!0}var F=function(){var t=document.querySelectorAll("pre");t.forEach((function(t){H.a.highlightBlock(t)}))},V={name:"ArticleDetail",data:function(){return{id:"",articleInfo:{},isLoading:!0,commentPage:1,commentList:[],isThumbUp:!1,isCollect:!1,favoriteId:"",showCollectList:!1,collectList:[],currentPage:1,showCommentPanel:!1,commentStr:"",isSubComment:!1,commentPlaceText:"说说你的想法吧",subCommentInfo:{}}},mounted:function(){this.isLoading=!0,this.id=this.$route.query.id,this.getArticleDetail(),this.checkThumbUp(),this.$store.state.userInfo&&this.checkCollected(),this.getCommentList(),F()},updated:function(){F()},methods:{getArticleDetail:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getArticleDetail(t.id);case 2:s=e.sent,t.articleInfo=s.data,t.$nextTick((function(){t.isLoading=!1}));case 5:case"end":return e.stop()}}),e)})))()},getCommentList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getArticleComment(t.id,t.commentPage);case 2:s=e.sent,n=s.data.content.map((function(e){if(e.publishTime=t.calcTime(e.publishTime),e.showMore=!1,e.subComments)for(var s=0;s<e.subComments.length;s++)e.subComments[s].publishTime=t.calcTime(e.subComments[s].publishTime);return e})),t.commentList=n;case 5:case"end":return e.stop()}}),e)})))()},thumbUp:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isLogin()){e.next=2;break}return e.abrupt("return");case 2:if(!t.isThumbUp){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,f.articleThumbUp(t.id);case 6:t.checkThumbUp();case 7:case"end":return e.stop()}}),e)})))()},checkThumbUp:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.checkArticleThumbUp(t.id);case 2:s=e.sent,n=s.code,a=s.data,1e4===n&&(t.isThumbUp=!0),t.articleInfo.thumbUp=a;case 7:case"end":return e.stop()}}),e)})))()},checkCollected:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s="https://www.sunofbeach.net/a/".concat(t.id),e.next=3,f.checkArticleCollected(s);case 3:n=e.sent,a=n.data,"0"!==a&&(t.favoriteId=a,t.isCollect=!0);case 6:case"end":return e.stop()}}),e)})))()},openCollectList:function(){this.isLogin()&&(this.showCollectList=!0,this.getCollectList(this.currentPage,!1))},getCollectList:function(t,e){var s=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,i,o,r,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,f.getCollectList(t);case 2:if(a=n.sent,i=a.data.content,e){for(o={},r=0;r<s.collectList.length;r++)o[s.collectList[r]._id]=s.collectList[r];for(c=0;c<i.length;c++)o[i[c]._id]||s.collectList.push(i[c])}else s.collectList=i;case 5:case"end":return n.stop()}}),n)})))()},collectArticle:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n={collectionId:t,title:e.articleInfo.title,url:e.getArticleOnPcUrl(),type:"0"},s.next=3,f.collectArticle(n);case 3:a=s.sent,1e4===a.code?(e.$notify.success("收藏成功！"),e.showCollectList=!1,e.isCollect=!0,e.checkCollected()):e.$notify.danger("收藏失败！");case 5:case"end":return s.stop()}}),s)})))()},cancelCollect:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.cancelCollect(t.favoriteId);case 2:s=e.sent,1e4===s.code?(t.$notify.success(s.message),t.showCollectList=!1,t.isCollect=!1):t.$notify.danger(s.message);case 4:case"end":return e.stop()}}),e)})))()},shareArticle:function(){var t=this.getArticleOnPcUrl();Y(t),this.$notify.success("链接已复制到剪切板，快去分享把！")},getArticleOnPcUrl:function(){return"https://www.sunofbeach.net/a/".concat(this.id)},submitComment:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isSubComment){e.next=8;break}return s={articleId:t.id,parentId:"0"===t.subCommentInfo.parentId?t.subCommentInfo._id:t.subCommentInfo.parentId,beUid:t.subCommentInfo.yourUid||t.subCommentInfo.userId,beNickname:t.subCommentInfo.yourNickname||t.subCommentInfo.nickname,content:t.commentStr},e.next=4,f.addArticleSubComment(s);case 4:n=e.sent,1e4===n.code?(t.$notify.success(n.message),t.commentStr="",t.showCommentPanel=!1,t.getCommentList()):t.$notify.warn(n.message),e.next=13;break;case 8:return a={parentId:"0",articleId:t.id,commentContent:t.commentStr},e.next=11,f.addArticleComment(a);case 11:i=e.sent,1e4===i.code?(t.$notify.success(i.message),t.commentStr="",t.showCommentPanel=!1,t.getCommentList()):t.$notify.warn(i.message);case 13:case"end":return e.stop()}}),e)})))()},openCommentPanel:function(t,e){if(this.isLogin()){if(this.commentStr="",this.isSubComment=t,this.subCommentInfo=e,this.isSubComment){var s=e.yourNickname||e.nickname;this.commentPlaceText="回复 @".concat(s)}else this.commentPlaceText="说说你的看法吧！";this.showCommentPanel=!0}}}},W=V,G=(s("f0f2"),Object(x["a"])(W,E,D,!1,null,"b716fbac",null)),J=G.exports,X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("nut-navbar",{attrs:{leftShow:!0,"right-show":!1},on:{"on-click-back":t.back}},[t._v(" 登录 ")]),s("h1",{staticClass:"title"},[t._v("SOB")]),s("div",{staticClass:"loginform"},[s("form",{on:{submit:function(e){return e.preventDefault(),t.login.apply(null,arguments)}}},[s("nut-textinput",{attrs:{placeholder:"请输入手机号",maxlength:"11",clearBtn:!0,type:"text",name:"username",autocomplete:"username"},model:{value:t.loginFrom.phone,callback:function(e){t.$set(t.loginFrom,"phone",e)},expression:"loginFrom.phone"}}),s("nut-textinput",{attrs:{placeholder:"请输入密码",type:"password",name:"password",autocomplete:"current-password"},model:{value:t.loginFrom.password,callback:function(e){t.$set(t.loginFrom,"password",e)},expression:"loginFrom.password"}}),s("nut-row",[s("nut-col",{attrs:{span:15}},[s("nut-textinput",{staticClass:"captchaInput",attrs:{placeholder:"请输入验证码",clearBtn:!0,disabled:!1},model:{value:t.loginFrom.captcha,callback:function(e){t.$set(t.loginFrom,"captcha",e)},expression:"loginFrom.captcha"}})],1),s("nut-col",{attrs:{span:9}},[s("img",{staticClass:"captchaImg",attrs:{id:"captcha",alt:""},on:{click:t.loadCaptcha}})])],1),t._m(0)],1)]),t._m(1),t._m(2)],1)},K=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"loginbtn"},[s("button",{attrs:{type:"submit"}},[t._v("登录")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"other"},[s("span",[t._v("忘记密码？")]),s("span",{staticClass:"regText"},[t._v("注册")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"copyright"},[s("span",[t._v("Copyright © 2014-2021 阳光沙滩 code by TrillGates")]),s("span",{staticClass:"about"},[t._v("关于我们 | 加入我们 | 友情链接")])])}],Q=(s("ac1f"),s("5319"),s("3ca3"),s("ddb0"),s("2b3d"),s("9861"),{name:"Login",data:function(){return{captchaUrl:"https://api.sunofbeaches.com/uc/ut/captcha?code=",randomCode:"",loginFrom:{phone:"",password:"",captcha:""}}},computed:Object(l["a"])({},Object(u["c"])(["lastUrl"])),mounted:function(){this.loadCaptcha()},methods:{login:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.loginFrom,n=s.phone,a=s.password,i=s.captcha,/^1[3456789]\d{9}$/.test(n)){e.next=4;break}return t.$notify.warn("手机号格式错误！"),e.abrupt("return",!1);case 4:if(a){e.next=7;break}return t.$notify.warn("密码不能为空！"),e.abrupt("return",!1);case 7:if(i){e.next=10;break}return t.$notify.warn("验证码不能为空！"),e.abrupt("return",!1);case 10:return e.next=12,f.login(n,a,i);case 12:o=e.sent,o.success?(t.$notify.success(o.message),t.$store.dispatch("setUserInfo",t),t.$router.replace(t.lastUrl)):(t.$notify.danger(o.message),t.randomCode=parseInt(1e4*Math.random()+1,10),t.loginFrom.captcha="");case 14:case"end":return e.stop()}}),e)})))()},back:function(){this.$router.back()},loadCaptcha:function(){this.randomCode=parseInt(1e4*Math.random()+1,10),fetch(this.captchaUrl+this.randomCode).then((function(t){var e=t.headers.get("l_c_i");localStorage.setItem("l_c_i",e),t.blob().then((function(t){var e=window.URL||window.webkitURL;document.getElementById("captcha").src=e.createObjectURL(t)}))}))}}}),Z=Q,tt=(s("f438"),Object(x["a"])(Z,X,K,!1,null,"7af189bd",null)),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nut-tab",{attrs:{"is-scroll":!0,"position-nav":"left","wrapper-height":t.tabHeight,"def-index":t.currentTab},on:{"tab-switch":t.tabSwitch}},[s("nut-tab-panel",{attrs:{"tab-title":"回复我的"}},[s("nut-scroller",{attrs:{type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了","init-data":t.msgList},on:{pulldown:t.pulldown,loadMore:t.loadMoreVert}},[s("div",{attrs:{slot:"list"},slot:"list"},t._l(t.msgList,(function(e){return s("li",{key:e._id,staticClass:"mli"},[s("div",{staticClass:"mItem"},[s("div",{staticClass:"mleft"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"mRight"},[s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),s("div",{staticClass:"content"},[t._v(t._s(e.content))]),s("div",{staticClass:"title"},[t._v("点击查看详情")])])]),s("div",{staticClass:"mBottom"},[s("span",{staticClass:"readStatus",class:1==e.hasRead?"read":""},[t._v(t._s(1==e.hasRead?"已阅":"未读"))]),s("div",{staticClass:"mTime"},[t._v(t._s(e.publishTime))])])])})),0)])],1),s("nut-tab-panel",{attrs:{"tab-title":"给朕点赞"}},[s("nut-scroller",{attrs:{type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了","init-data":t.msgList},on:{pulldown:t.pulldown,loadMore:t.loadMoreVert}},[s("div",{attrs:{slot:"list"},slot:"list"},t._l(t.msgList,(function(e){return s("li",{key:e._id,staticClass:"mli"},[s("div",{staticClass:"mItem"},[s("div",{staticClass:"mleft"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"mRight"},[s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),s("span",{staticClass:"thumbUpInfo"},[t._v("给朕的内容点赞：")]),s("div",{staticClass:"title"},[t._v(t._s(e.title))])])]),s("div",{staticClass:"mBottom"},[s("span",{staticClass:"readStatus",class:1==e.hasRead?"read":""},[t._v(t._s(1==e.hasRead?"已阅":"未读"))]),s("div",{staticClass:"mTime"},[t._v(t._s(e.thumbTime))])])])})),0)])],1),s("nut-tab-panel",{attrs:{"tab-title":"文章评论"}},[s("nut-scroller",{attrs:{type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了","init-data":t.msgList},on:{pulldown:t.pulldown,loadMore:t.loadMoreVert}},[s("div",{attrs:{slot:"list"},slot:"list"},t._l(t.msgList,(function(e){return s("li",{key:e._id,staticClass:"mli"},[s("div",{staticClass:"mItem"},[s("div",{staticClass:"mleft"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"mRight"},[s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),s("div",{staticClass:"content"},[t._v(t._s(e.content))]),s("div",{staticClass:"title"},[t._v(t._s(e.title))])])]),s("div",{staticClass:"mBottom"},[s("span",{staticClass:"readStatus",class:1==e.hasRead?"read":""},[t._v(t._s(1==e.hasRead?"已阅":"未读"))]),s("div",{staticClass:"mTime"},[t._v(t._s(e.createTime))])])])})),0)])],1),s("nut-tab-panel",{attrs:{"tab-title":"动态评论"}},[s("nut-scroller",{attrs:{type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了","init-data":t.msgList},on:{pulldown:t.pulldown,loadMore:t.loadMoreVert}},[s("div",{attrs:{slot:"list"},slot:"list"},t._l(t.msgList,(function(e){return s("li",{key:e._id,staticClass:"mli"},[s("div",{staticClass:"mItem"},[s("div",{staticClass:"mleft"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"mRight"},[s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),s("span",{staticClass:"content"},[t._v(t._s(e.content))]),s("div",{staticClass:"title"},[s("span",{staticClass:"title-desc"},[t._v("评论了我的动态：")]),t._v(" "+t._s(e.title))])])]),s("div",{staticClass:"mBottom"},[s("span",{staticClass:"readStatus",class:1==e.hasRead?"read":""},[t._v(t._s(1==e.hasRead?"已阅":"未读"))]),s("div",{staticClass:"mTime"},[t._v(t._s(e.createTime))])])])})),0)])],1),s("nut-tab-panel",{attrs:{"tab-title":"问题回答"}},[s("nut-scroller",{attrs:{type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了","init-data":t.msgList},on:{pulldown:t.pulldown,loadMore:t.loadMoreVert}},[s("div",{attrs:{slot:"list"},slot:"list"},t._l(t.msgList,(function(e){return s("li",{key:e._id,staticClass:"mli"},[s("div",{staticClass:"mItem"},[s("div",{staticClass:"mleft"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"mRight"},[s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),s("div",{staticClass:"title"},[s("span",{staticClass:"title-desc"},[t._v("回答了朕的提问：")]),t._v(" "+t._s(e.title)+" "),s("span",{staticClass:"title-desc"},[t._v("去看看问题解决了吗？")])])])]),s("div",{staticClass:"mBottom"},[s("span",{staticClass:"readStatus",class:1==e.hasRead?"read":""},[t._v(t._s(1==e.hasRead?"已阅":"未读"))]),s("div",{staticClass:"mTime"},[t._v(t._s(e.createTime))])])])})),0)])],1),s("nut-tab-panel",{attrs:{"tab-title":"系统通知"}},[s("nut-scroller",{attrs:{type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"到底了","init-data":t.msgList},on:{pulldown:t.pulldown,loadMore:t.loadMoreVert}},[s("div",{attrs:{slot:"list"},slot:"list"},t._l(t.msgList,(function(e){return s("li",{key:e._id,staticClass:"mli"},[s("div",{staticClass:"mItem"},[s("div",{staticClass:"mRight"},[s("div",[t._v(t._s(e.title))]),s("div",{staticClass:"title",domProps:{innerHTML:t._s(e.content)},on:{click:function(t){t.preventDefault()}}})])]),s("div",{staticClass:"mBottom"},[s("div",{staticClass:"mTime"},[t._v(t._s(e.publishTime))])])])})),0)])],1)],1)},nt=[],at={name:"Message",data:function(){return{currentTab:0,tabHeight:600,msgList:[],isUnMore:!1,isLoading:!1,currentPage:1,totalPages:1}},created:function(){this.currentTab=this.$route.query.type?1*this.$route.query.type:0,this.tabHeight=.89*document.body.scrollHeight},mounted:function(){this.tabSwitch(this.currentTab)},methods:{getMsgData:function(){var t=arguments,e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,a,i,o,r,c,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:n=t.length>0&&void 0!==t[0]?t[0]:1,a=t.length>1&&void 0!==t[1]&&t[1],i={},s.t0=e.currentTab,s.next=0===s.t0?6:1===s.t0?10:2===s.t0?14:3===s.t0?18:4===s.t0?22:5===s.t0?26:30;break;case 6:return s.next=8,f.getAtMessage(n);case 8:return i=s.sent,s.abrupt("break",30);case 10:return s.next=12,f.getThumbMessage(n);case 12:return i=s.sent,s.abrupt("break",30);case 14:return s.next=16,f.getArticleMessage(n);case 16:return i=s.sent,s.abrupt("break",30);case 18:return s.next=20,f.getMomentMessage(n);case 20:return i=s.sent,s.abrupt("break",30);case 22:return s.next=24,f.getWendaMessage(n);case 24:return i=s.sent,s.abrupt("break",30);case 26:return s.next=28,f.getSystemMessage(n);case 28:return i=s.sent,s.abrupt("break",30);case 30:if(o=i.data.content,e.totalPages=i.data.totalPages,a){for(r={},c=0;c<e.msgList.length;c++)r[e.msgList[c]._id]=e.msgList[c];for(l=0;l<o.length;l++)r[o[l].id]||e.msgList.push(o[l])}else e.msgList=o;e.isUnMore=!1,e.isLoading=!1;case 35:case"end":return s.stop()}}),s)})))()},pulldown:function(){this.isLoading=!0,this.getMsgData()},loadMoreVert:function(){this.currentPage>=this.totalPages?this.isUnMore=!0:(this.isUnMore=!0,this.getMsgData(++this.currentPage,!0))},tabSwitch:function(t){this.currentTab=t,this.getMsgData()}}},it=at,ot=(s("b884e"),s("162a"),Object(x["a"])(it,st,nt,!1,null,"691c019c",null)),rt=ot.exports,ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container"},[t.isSkeletonLoading?s("div",{staticClass:"vue-skeleton-loading"},[s("div",{staticClass:"skeleton-bac-animation"}),s("div",[s("row",{attrs:{padding:"2px 20px 2px"}},[s("skeleton-square",{attrs:{width:"355px",height:"20px"}})],1),s("row",{attrs:{slot:"list",padding:"15px 20px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"100px",count:1,margin:"5px 10px 5px",height:"20px"}}),s("skeleton-square",{attrs:{width:"140px",count:1,margin:"5px 10px 5px",height:"20px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"350px",count:1,margin:"5px 10px 5px",height:"100px"}})],1),s("row",{attrs:{slot:"list",padding:"2px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"165px",count:1,margin:"5px 10px 5px",height:"20px"}}),s("skeleton-square",{attrs:{width:"160px",count:1,margin:"5px 10px 5px",height:"20px"}})],1),s("row",{attrs:{slot:"list",padding:"15px 20px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"100px",count:1,margin:"5px 10px 5px",height:"20px"}}),s("skeleton-square",{attrs:{width:"140px",count:1,margin:"5px 10px 5px",height:"20px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"350px",count:1,margin:"5px 10px 5px",height:"100px"}})],1),s("row",{attrs:{slot:"list",padding:"2px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"165px",count:1,margin:"5px 10px 5px",height:"20px"}}),s("skeleton-square",{attrs:{width:"160px",count:1,margin:"5px 10px 5px",height:"20px"}})],1),s("row",{attrs:{slot:"list",padding:"15px 20px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"50px",height:"50px"}}),s("column",[s("skeleton-square",{attrs:{width:"100px",count:1,margin:"5px 10px 5px",height:"20px"}}),s("skeleton-square",{attrs:{width:"140px",count:1,margin:"5px 10px 5px",height:"20px"}})],1)],1),s("row",{attrs:{slot:"list",padding:"15px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"350px",count:1,margin:"5px 10px 5px",height:"100px"}})],1),s("row",{attrs:{slot:"list",padding:"2px 10px 0"},slot:"list"},[s("skeleton-square",{attrs:{width:"165px",count:1,margin:"5px 10px 5px",height:"20px"}}),s("skeleton-square",{attrs:{width:"160px",count:1,margin:"5px 10px 5px",height:"20px"}})],1)],1)]):[s("nut-scroller",{staticClass:"tagScroll",attrs:{scrollTo:t.tagScrollY},on:{scrollToCbk:t.tagScrollToCbk}},[s("div",{staticClass:"tagItem nut-hor-list-item ",class:{tagCurrent:-1==t.currentTag},attrs:{slot:"list"},on:{click:function(e){return t.changeTag(-1,"recommend")}},slot:"list"},[s("span",{staticClass:"tagTitle"},[t._v("推荐")])]),t.$store.state.userInfo?s("div",{staticClass:"tagItem nut-hor-list-item ",class:{tagCurrent:-2==t.currentTag},attrs:{slot:"list"},on:{click:function(e){return t.changeTag(-2,"follow")}},slot:"list"},[s("span",{staticClass:"tagTitle"},[t._v("关注")])]):t._e(),t._l(t.categoryList,(function(e,n){return s("div",{key:e.id,ref:"tagScroll"+n,refInFor:!0,staticClass:"tagItem nut-hor-list-item ",class:{tagCurrent:t.currentTag==n},attrs:{slot:"list"},on:{click:function(s){return t.changeTag(n,e.id)}},slot:"list"},[s("span",{staticClass:"tagTitle"},[t._v(t._s(e.topicName))])])}))],2),s("div",{staticClass:"line"}),s("nut-scroller",{ref:"mynutscroller",staticClass:"totalScroll",attrs:{scrollTo:t.momentListScrollY,type:"vertical","is-un-more":t.isUnMore,"is-loading":t.isLoading,unloadMoreTxt:"加载中"},on:{loadMore:t.loadMoreVert,pulldown:t.pulldown,scrollChange:t.scrollChange,scrollToCbk:t.scrollToCbk}},[s("div",{staticClass:"moment-list",attrs:{slot:"list"},slot:"list"},t._l(t.momentList,(function(e){return s("div",{key:e.id},[s("li",{staticClass:"moment-item"},[s("div",{staticClass:"header"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:e.avatar,alt:""}})]),s("div",{staticClass:"userinfo"},[s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))]),s("div",{staticClass:"desc"},[s("div",{staticClass:"post"},[t._v(t._s(e.company?e.company:"无业")+" @"+t._s(e.position?e.position:"正在定位中")+" ")]),s("div",{staticClass:"dot"},[t._v("·")]),s("div",{staticClass:"publish-time"},[t._v(t._s(e.createTime))])])])]),s("div",{staticClass:"middle"},[s("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)}}),e.images.length>0?s("div",{staticClass:"img-list"},t._l(e.images,(function(n,a){return s("div",{key:n,staticClass:"bg-img",style:{backgroundImage:"url('"+n+"')"},on:{click:function(s){return t.showBigImg(e.images,a)}}})})),0):t._e(),e.linkUrl?s("div",{staticClass:"link-box"},[s("a",{on:{click:function(s){return t.toArticlePage(e.linkUrl)}}},[e.linkCover?s("div",{staticClass:"link-cover",style:{backgroundImage:"url('"+e.linkCover+")"}}):s("div",{staticClass:"link-cover-default"},[s("i",{staticClass:"iconfont icon-link"})]),s("div",{staticClass:"link-info"},[s("div",{staticClass:"link-title"},[t._v(t._s(e.linkTitle?e.linkTitle:"-"))]),s("div",{staticClass:"link-domain"},[t._v(t._s(e.linkHost))])])])]):t._e(),e.topicName?s("div",{staticClass:"topic",on:{click:function(s){return t.clickToTopic(e.topicId)}}},[s("i",{staticClass:"iconfont icon-topic"},[t._v(t._s(e.topicName))])]):t._e()]),s("div",{staticClass:"action"},[s("i",{staticClass:"action-btn iconfont icon-dianzan",class:{active:e.thumbUpActive},on:{click:function(s){return t.thumbUpMoment(e)}}},[s("span",{staticStyle:{padding:"0px 5px"}},[t._v(t._s(e.thumbUpCount))])]),s("i",{staticClass:"action-btn iconfont icon-pinglunxiao",on:{click:function(s){return t.openCommontList(e)}}},[s("span",{staticStyle:{padding:"0px 5px"}},[t._v(t._s(e.commentCount))])]),s("i",{staticClass:"action-btn iconfont icon-fenxiang1"})]),e.showCommont?s("div",{staticClass:"reviewList"},[s("div",{staticClass:"commentInput"},[s("nut-textbox",{staticClass:"inputBox",attrs:{"max-num":300,"txt-area-h":80},model:{value:e.commentStr,callback:function(s){t.$set(e,"commentStr",s)},expression:"item.commentStr"}}),s("button",{staticClass:"submit-btn",on:{click:function(s){return t.sendMoyuComment(e)}}},[t._v("发表评论")])],1),t._l(e.commentList,(function(n){return s("div",{key:n.id,staticClass:"reviewItem"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:n.avatar}})]),s("div",{staticClass:"reviewRight"},[s("div",{staticClass:"top"},[s("span",{staticClass:"reviewNikename"},[t._v(t._s(n.nickname))]),s("span",[t._v(t._s(n.createTime))])]),s("div",{staticClass:"reviewBottom"},[t._v(t._s(n.content))]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(n,4,n.userId,n.nickname,e)}}},[t._v("回复")])]),1===n.subComments.length?s("div",{staticClass:"subcommentBox"},[s("div",{staticClass:"subcomment"},[s("div",{staticClass:"subleft"},[s("img",{attrs:{src:n.subComments[0].avatar}})]),s("div",{staticClass:"subreviewRight"},[s("div",{staticClass:"subtop"},[s("span",{staticClass:"subreviewNikename"},[t._v(t._s(n.subComments[0].nickname))]),s("span",[t._v(t._s(n.subComments[0].createTime))])]),s("p",{staticClass:"subreviewBottom"},[t._v(" "+t._s(n.subComments[0].nickname?"回复 "+n.nickname+":":"")+" "+t._s(n.subComments[0].content)+" ")]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(n,3,n.subComments[0].userId,n.subComments[0].nickname,e)}}},[t._v("回复")])])])])]):t._e(),n.subComments.length>1&&!n.showMore?s("div",{staticClass:"subcommentBox"},[s("div",{staticClass:"subcomment"},[s("div",{staticClass:"subleft"},[s("img",{attrs:{src:n.subComments[0].avatar}})]),s("div",{staticClass:"subreviewRight"},[s("div",{staticClass:"subtop"},[s("span",{staticClass:"subreviewNikename"},[t._v(t._s(n.subComments[0].nickname))]),s("span",[t._v(t._s(n.subComments[0].createTime))])]),s("p",{staticClass:"subreviewBottom"},[t._v(" "+t._s(n.subComments[0].targetUserNickname?"回复 "+n.subComments[0].targetUserNickname+":":"")+" "+t._s(n.subComments[0].content)+" ")]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(n,2,n.subComments[0].userId,n.subComments[0].nickname,e)}}},[t._v("回复")])])])]),s("span",{staticClass:"sub-see-more",on:{click:function(t){n.showMore=!0}}},[t._v("点击查看更多("+t._s(n.subComments.length-1)+")")])]):t._e(),n.subComments.length>1&&n.showMore?s("div",{staticClass:"subcommentBox"},[t._l(n.subComments,(function(a){return s("div",{key:a.id,staticClass:"subcomment"},[s("div",{staticClass:"subleft"},[s("img",{attrs:{src:a.avatar}})]),s("div",{staticClass:"subreviewRight"},[s("div",{staticClass:"subtop"},[s("span",{staticClass:"subreviewNikename"},[t._v(t._s(a.nickname))]),s("span",[t._v(t._s(a.createTime))])]),s("p",{staticClass:"subreviewBottom"},[t._v(" "+t._s(a.targetUserNickname?"回复 "+a.targetUserNickname+":":"")+" "+t._s(a.content)+" ")]),s("div",{staticClass:"comment-btn"},[s("span",{on:{click:function(s){return t.openCommentPanel(n,1,a.userId,a.nickname,e)}}},[t._v("回复")])])])])})),s("span",{staticClass:"sub-see-more",on:{click:function(t){n.showMore=!1}}},[t._v("收起")])],2):t._e()])])})),s("div",{directives:[{name:"show",rawName:"v-show",value:e.commentList&&0==e.commentList.length,expression:"item.commentList&&item.commentList.length==0"}],staticClass:"reviewItem"},[s("div",{staticClass:"noComment "},[s("i",{staticClass:"iconfont icon-meiyoushuju"}),t._v(" 暂无评论~~ ")])])],2):t._e()]),s("div",{staticClass:"line"})])})),0)]),s("div",{staticClass:"moyu-send-btn",on:{click:t.openMoyuPanel}},[s("i",{staticClass:"action-btn iconfont icon-jiahao"})]),s("nut-popup",{attrs:{position:"bottom"},model:{value:t.showCommentPanel,callback:function(e){t.showCommentPanel=e},expression:"showCommentPanel"}},[s("nut-textbox",{staticClass:"comment-input",attrs:{"place-text":t.commentPlaceText,"max-num":300,"txt-area-h":80},model:{value:t.popCommentStr,callback:function(e){t.popCommentStr=e},expression:"popCommentStr"}}),s("nut-button",{attrs:{type:"light",block:""},on:{click:t.handlePopSubmit}},[t._v(" 提交 ")])],1)]],2)},lt=[],ut=(s("caad"),s("2532"),s("a434"),s("4de4"),s("4dc4")),mt=s("1bbd"),dt={name:"Moment",data:function(){return{isSkeletonLoading:!0,isUnMore:!1,isLoading:!1,currentTag:-1,categoryList:[],currentTagId:"recommend",currentPage:1,momentListScrollY:0,tagScrollY:0,currentScroll:0,scrollElem:{},imgList:[],momentList:[],toast:{},scrollTo:0,commentPlaceText:"说说你的想法吧",showCommentPanel:!1,popCommentStr:"",popCommentType:0,popCommentObj:{},popCommentTargetUserId:0,commentMomentItem:{}}},mounted:function(){this.isSkeletonLoading=!0,this.getMoYuList(),this.getMomentTopicList()},computed:Object(l["a"])({},Object(u["c"])(["userInfo"])),methods:{tagScrollToCbk:function(){console.log("tagScrollToCbk")},scrollToCbk:function(){console.log("scrollToCbk")},getMomentTopicList:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,n,a,i,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getMoyuAllTopic();case 2:return s=e.sent,e.next=5,f.getMoyuHotTopic();case 5:n=e.sent,a=s.data,i=n.data.map((function(t){return t.id})),o=[],r=[],a.forEach((function(t){i.includes(t.id)?o.push(t):r.push(t)})),t.categoryList=o.concat(r);case 12:case"end":return e.stop()}}),e)})))()},getMoYuList:function(){var t=arguments,e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n,a,i,o,r,c,l;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:"recommend",a=t.length>1&&void 0!==t[1]?t[1]:1,i=t.length>2&&void 0!==t[2]&&t[2],s.next=5,f.getMoyuList(n,a);case 5:o=s.sent,r=o.data.list,c=0;case 8:if(!(c<r.length)){s.next=20;break}if(l=r[c],l.thumbUpCount=l.thumbUpList.length,"1256120724666454016"!==l.userId){s.next=14;break}return r.splice(c,1),s.abrupt("continue",17);case 14:l.thumbUpActive=e.idIsContainMe(l.thumbUpList),l.createTime=e.calcTime(l.createTime),l.linkUrl&&(l.linkHost=e.getDomain(l.linkUrl));case 17:c++,s.next=8;break;case 20:e.momentList=i?e.mergeTargetFromSource(e.momentList,r,"id"):r,e.isSkeletonLoading=!1,e.isUnMore=!1,e.isLoading=!1,e.toast.hide&&e.$nextTick((function(){e.toast.hide()}));case 25:case"end":return s.stop()}}),s)})))()},loadMoreVert:function(){this.isUnMore=!0,this.getMoYuList(this.currentTagId,++this.currentPage,!0),this.toast=this.$toast.loading("加载中...",{duration:0,id:"momentLoading"})},pulldown:function(){this.isLoading=!0,this.getMoYuList(this.currentTagId,1,!1)},scrollChange:function(t){this.currentScroll=t,this.isShowBacktop=-t>200},changeTag:function(t,e){this.currentTag=t,this.currentTagId=e,this.getMoYuList(this.currentTagId,1,!1)},idIsContainMe:function(t){return!!this.$store.state.userInfo&&!!t.includes(this.$store.state.userInfo.id)},getDomain:function(t){var e=Object(ut["a"])(Object(mt["a"])(t));return e.hostname},showBigImg:function(t,e){this.$imageTouch({imageList:t,activedIndex:e,isShowBar:!0})},clickToTopic:function(t){var e=0,s=this.categoryList.filter((function(s,n){return s.id===t&&(e=n,!0)}));if(s.length>0){var n=this.$refs["tagScroll"+e][0];n.click(),this.tagScrollY=40-n.getBoundingClientRect().left,-1===this.momentListScrollY?this.momentListScrollY=this.momentListScrollY+.1:this.momentListScrollY=-1}},thumbUpMoment:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:f.momentThumbUp(t.id),f.momentThumbUp(t.id),t.thumbUpCount++,t.thumbUpActive=!0;case 4:case"end":return e.stop()}}),e)})))()},getMomentCommontList:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.getMoyuCommontList(t.id);case 2:for(s=e.sent,a=0;a<s.data.list.length;a++)s.data.list[a].showMore=!1;n["default"].set(t,"commentList",s.data.list);case 5:case"end":return e.stop()}}),e)})))()},openCommontList:function(t){1==t.showCommont?(n["default"].set(t,"showCommont",!1),t.commentStr=""):(n["default"].set(t,"showCommont",!0),this.getMomentCommontList(t))},toArticlePage:function(t){if(t.includes("www.sunofbeach.net/a")){var e=t.substr(t.indexOf("/a/")+3,t.length-1);this.$router.push({path:"/detail",query:{id:e}})}else console.log("其他链接"),window.location.href=t},sendMoyuComment:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return console.log("当前的评论内容是："),console.log(t),s.next=4,f.sendMoyuComment(t.id,t.commentStr);case 4:n=s.sent,n.success?(e.$toast.success("操作成功！"),t.commentStr="",e.getMomentCommontList(t)):e.$toast.fail("发送失败！"+n.message);case 6:case"end":return s.stop()}}),s)})))()},openCommentPanel:function(t,e,s,n,a){this.commentPlaceText="说说你的想法吧",this.popCommentStr="",this.showCommentPanel=!0,this.popCommentTargetUserId=s,this.commentMomentItem=a,this.popCommentObj=t,this.isLogin()&&(this.popCommentType=e,this.commentPlaceText="回复 @".concat(n))},sendMoyuComent:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.sendMoyuSubComment(t.popCommentStr,t.popCommentObj.momentId,t.popCommentTargetUserId,t.popCommentObj.id);case 2:s=e.sent,1e4===s.code?(t.$notify.success(s.message),t.getMomentCommontList(t.commentMomentItem)):t.$notify.warn(s.message);case 4:case"end":return e.stop()}}),e)})))()},handlePopSubmit:function(){5===this.popCommentType?this.sendMoyu():this.sendMoyuComent(),this.popCommentStr="",this.showCommentPanel=!1,this.popCommentObj={}},openMoyuPanel:function(){this.commentPlaceText="今日宜摸鱼",this.popCommentType=5,this.popCommentStr="",this.showCommentPanel=!0,this.isLogin()},sendMoyu:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f.publishMoyu(t.popCommentStr,"",[]);case 2:s=e.sent,console.log(s),1e4===s.code?(t.$notify.success(s.message),t.pulldown()):t.$notify.warn(s.message);case 5:case"end":return e.stop()}}),e)})))()}}},pt=dt,ht=(s("0ab4"),Object(x["a"])(pt,ct,lt,!1,null,"6523333e",null)),gt=ht.exports;n["default"].use(L["a"]);var vt=new L["a"]({mode:"hash",routes:[{path:"/",redirect:"/home"},{path:"/home",component:q,meta:{showHeader:!0,navText:"首页"}},{path:"/detail",component:J,meta:{showHeader:!0,navText:"首页"}},{path:"/login",component:et},{path:"/message",component:rt,meta:{showHeader:!0,navText:"首页"}},{path:"/moment",component:gt,meta:{showHeader:!0,navText:"摸鱼"}}]});vt.beforeEach((function(t,e,s){"/login"==t.path&&U.dispatch("setLastUrl",e.fullPath),s()}));var ft=vt,bt=s("3822"),Ct=s.n(bt),xt=(s("8ce9"),s("c1df")),wt=s.n(xt),kt=s("0348"),_t=s.n(kt),yt={install:function(t){t.prototype.isLogin=function(){var t=this,e=this.$store.state.userInfo;return!!e||(this.$notify.warn("未登录，即将跳转到登录页面..."),setTimeout((function(){t.$router.push("/login")}),1e3),!1)},t.prototype.closeNavMsg=function(){this.$store.dispatch("setMsgBoxShow",!1),this.$store.dispatch("setNavListShow",!1)},t.prototype.mergeTargetFromSource=function(t,e,s){if(!t||0===t.length||!e||0===e.length||!s)return[];for(var n={},a=0;a<t.length;a++)n[t[a][s]]=t[a];for(var i=0;i<e.length;i++)n[e[i][s]]||t.push(e[i]);return t},t.prototype.calcTime=function(t){var e=wt()(t,"YYYY-MM-DD HH:mm").fromNow();return"Invalid date"==e?t:e},t.prototype.getNowTimeStr=function(){return wt()().format("YYYY-MM-DD HH:mm:ss")}}};d.a.defaults.withCredentials=!0,d.a.defaults.timeout=8e3,d.a.interceptors.request.use((function(t){var e=localStorage.getItem("l_c_i"),s=localStorage.getItem("sob_token");return t.headers.l_c_i=e,t.headers.sob_token=s,t})),d.a.interceptors.response.use((function(t){return t.headers.sob_token&&localStorage.setItem("sob_token",t.headers.sob_token),t})),n["default"].config.productionTip=!1,Ct.a.install(n["default"]),wt.a.locale("zh-cn"),n["default"].use(_t.a),n["default"].use(yt),new n["default"]({render:function(t){return t(j)},router:ft,store:U}).$mount("#app")},6064:function(t,e,s){"use strict";s("fb8b")},"85ec":function(t,e,s){},b884e:function(t,e,s){"use strict";s("d482")},bb73:function(t,e,s){},bbc7:function(t,e,s){},d225:function(t,e,s){"use strict";s("f79d")},d482:function(t,e,s){},f0f2:function(t,e,s){"use strict";s("23bf")},f438:function(t,e,s){"use strict";s("0af6")},f79d:function(t,e,s){},fb8b:function(t,e,s){}});
//# sourceMappingURL=app.47f6b36f.js.map